var bn=Object.defineProperty;var wn=(oe,B,ee)=>B in oe?bn(oe,B,{enumerable:!0,configurable:!0,writable:!0,value:ee}):oe[B]=ee;var we=(oe,B,ee)=>wn(oe,typeof B!="symbol"?B+"":B,ee);(function(){"use strict";function oe(S){return S&&S.__esModule&&Object.prototype.hasOwnProperty.call(S,"default")?S.default:S}function B(S){if(S.__esModule)return S;var h=S.default;if(typeof h=="function"){var m=function c(){return this instanceof c?Reflect.construct(h,arguments,this.constructor):h.apply(this,arguments)};m.prototype=h.prototype}else m={};return Object.defineProperty(m,"__esModule",{value:!0}),Object.keys(S).forEach(function(c){var y=Object.getOwnPropertyDescriptor(S,c);Object.defineProperty(m,c,y.get?y:{enumerable:!0,get:function(){return S[c]}})}),m}var ee={exports:{}},wr={},_r=Object.freeze({__proto__:null,default:wr}),Ve=B(_r),vt;function vr(){return vt||(vt=1,function(S,h){var m=void 0,c=function(y){return m||(m=new Promise(function(E,A){var M=typeof y<"u"?y:{},P=M.onAbort;M.onAbort=function(e){A(new Error(e)),P&&P(e)},M.postRun=M.postRun||[],M.postRun.push(function(){E(M)}),S=void 0;var o;o||(o=typeof M<"u"?M:{});var ae=typeof window=="object",se=typeof importScripts=="function",te=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string";o.onRuntimeInitialized=function(){function e(a,l){switch(typeof l){case"boolean":dn(a,l?1:0);break;case"number":hn(a,l);break;case"string":mn(a,l,-1,-1);break;case"object":if(l===null)dr(a);else if(l.length!=null){var p=ze(l,We);pn(a,p,l.length,-1),Je(p)}else Qe(a,"Wrong API use : tried to return a value of an unknown type ("+l+").",-1);break;default:dr(a)}}function t(a,l){for(var p=[],_=0;_<a;_+=1){var T=Y(l+4*_,"i32"),C=sn(T);if(C===1||C===2)T=cn(T);else if(C===3)T=ln(T);else if(C===4){C=T,T=un(C),C=fn(C);for(var z=new Uint8Array(T),W=0;W<T;W+=1)z[W]=D[C+W];T=z}else T=null;p.push(T)}return p}function r(a,l){this.Ka=a,this.db=l,this.Ia=1,this.eb=[]}function n(a,l){if(this.db=l,l=Te(a)+1,this.Xa=wt(l),this.Xa===null)throw Error("Unable to allocate memory for the SQL string");X(a,O,this.Xa,l),this.cb=this.Xa,this.Ta=this.hb=null}function i(a){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),a!=null){var l=this.filename,p="/",_=l;if(p&&(p=typeof p=="string"?p:Pe(p),_=l?fe(p+"/"+l):p),l=jt(!0,!0),_=De(_,(l!==void 0?l:438)&4095|32768,0),a){if(typeof a=="string"){p=Array(a.length);for(var T=0,C=a.length;T<C;++T)p[T]=a.charCodeAt(T);a=p}Ue(_,l|146),p=ye(_,577),ir(p,a,0,a.length,0),ht(p),Ue(_,l)}}this.handleError(w(this.filename,s)),this.db=Y(s,"i32"),br(this.db),this.Ya={},this.Ma={}}var s=ie(4),u=o.cwrap,w=u("sqlite3_open","number",["string","number"]),k=u("sqlite3_close_v2","number",["number"]),g=u("sqlite3_exec","number",["number","string","number","number","number"]),I=u("sqlite3_changes","number",["number"]),$=u("sqlite3_prepare_v2","number",["number","string","number","number","number"]),fr=u("sqlite3_sql","string",["number"]),Hr=u("sqlite3_normalized_sql","string",["number"]),cr=u("sqlite3_prepare_v2","number",["number","number","number","number","number"]),Wr=u("sqlite3_bind_text","number",["number","number","number","number","number"]),hr=u("sqlite3_bind_blob","number",["number","number","number","number","number"]),zr=u("sqlite3_bind_double","number",["number","number","number"]),Kr=u("sqlite3_bind_int","number",["number","number","number"]),Jr=u("sqlite3_bind_parameter_index","number",["number","string"]),Br=u("sqlite3_step","number",["number"]),Qr=u("sqlite3_errmsg","string",["number"]),Vr=u("sqlite3_column_count","number",["number"]),Yr=u("sqlite3_data_count","number",["number"]),Xr=u("sqlite3_column_double","number",["number","number"]),mr=u("sqlite3_column_text","string",["number","number"]),Zr=u("sqlite3_column_blob","number",["number","number"]),en=u("sqlite3_column_bytes","number",["number","number"]),tn=u("sqlite3_column_type","number",["number","number"]),rn=u("sqlite3_column_name","string",["number","number"]),nn=u("sqlite3_reset","number",["number"]),on=u("sqlite3_clear_bindings","number",["number"]),an=u("sqlite3_finalize","number",["number"]),pr=u("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),sn=u("sqlite3_value_type","number",["number"]),un=u("sqlite3_value_bytes","number",["number"]),ln=u("sqlite3_value_text","string",["number"]),fn=u("sqlite3_value_blob","number",["number"]),cn=u("sqlite3_value_double","number",["number"]),hn=u("sqlite3_result_double","",["number","number"]),dr=u("sqlite3_result_null","",["number"]),mn=u("sqlite3_result_text","",["number","string","number","number"]),pn=u("sqlite3_result_blob","",["number","number","number","number"]),dn=u("sqlite3_result_int","",["number","number"]),Qe=u("sqlite3_result_error","",["number","string","number"]),yr=u("sqlite3_aggregate_context","number",["number","number"]),br=u("RegisterExtensionFunctions","number",["number"]);r.prototype.bind=function(a){if(!this.Ka)throw"Statement closed";return this.reset(),Array.isArray(a)?this.vb(a):a!=null&&typeof a=="object"?this.wb(a):!0},r.prototype.step=function(){if(!this.Ka)throw"Statement closed";this.Ia=1;var a=Br(this.Ka);switch(a){case 100:return!0;case 101:return!1;default:throw this.db.handleError(a)}},r.prototype.qb=function(a){return a==null&&(a=this.Ia,this.Ia+=1),Xr(this.Ka,a)},r.prototype.zb=function(a){if(a==null&&(a=this.Ia,this.Ia+=1),a=mr(this.Ka,a),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(a)},r.prototype.Ab=function(a){return a==null&&(a=this.Ia,this.Ia+=1),mr(this.Ka,a)},r.prototype.getBlob=function(a){a==null&&(a=this.Ia,this.Ia+=1);var l=en(this.Ka,a);a=Zr(this.Ka,a);for(var p=new Uint8Array(l),_=0;_<l;_+=1)p[_]=D[a+_];return p},r.prototype.get=function(a,l){l=l||{},a!=null&&this.bind(a)&&this.step(),a=[];for(var p=Yr(this.Ka),_=0;_<p;_+=1)switch(tn(this.Ka,_)){case 1:var T=l.useBigInt?this.zb(_):this.qb(_);a.push(T);break;case 2:a.push(this.qb(_));break;case 3:a.push(this.Ab(_));break;case 4:a.push(this.getBlob(_));break;default:a.push(null)}return a},r.prototype.getColumnNames=function(){for(var a=[],l=Vr(this.Ka),p=0;p<l;p+=1)a.push(rn(this.Ka,p));return a},r.prototype.getAsObject=function(a,l){a=this.get(a,l),l=this.getColumnNames();for(var p={},_=0;_<l.length;_+=1)p[l[_]]=a[_];return p},r.prototype.getSQL=function(){return fr(this.Ka)},r.prototype.getNormalizedSQL=function(){return Hr(this.Ka)},r.prototype.run=function(a){return a!=null&&this.bind(a),this.step(),this.reset()},r.prototype.mb=function(a,l){l==null&&(l=this.Ia,this.Ia+=1),a=Pt(a);var p=ze(a,We);this.eb.push(p),this.db.handleError(Wr(this.Ka,l,p,a.length-1,0))},r.prototype.ub=function(a,l){l==null&&(l=this.Ia,this.Ia+=1);var p=ze(a,We);this.eb.push(p),this.db.handleError(hr(this.Ka,l,p,a.length,0))},r.prototype.lb=function(a,l){l==null&&(l=this.Ia,this.Ia+=1),this.db.handleError((a===(a|0)?Kr:zr)(this.Ka,l,a))},r.prototype.xb=function(a){a==null&&(a=this.Ia,this.Ia+=1),hr(this.Ka,a,0,0,0)},r.prototype.nb=function(a,l){switch(l==null&&(l=this.Ia,this.Ia+=1),typeof a){case"string":this.mb(a,l);return;case"number":this.lb(a,l);return;case"bigint":this.mb(a.toString(),l);return;case"boolean":this.lb(a+0,l);return;case"object":if(a===null){this.xb(l);return}if(a.length!=null){this.ub(a,l);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+a+")."},r.prototype.wb=function(a){var l=this;return Object.keys(a).forEach(function(p){var _=Jr(l.Ka,p);_!==0&&l.nb(a[p],_)}),!0},r.prototype.vb=function(a){for(var l=0;l<a.length;l+=1)this.nb(a[l],l+1);return!0},r.prototype.reset=function(){return this.freemem(),on(this.Ka)===0&&nn(this.Ka)===0},r.prototype.freemem=function(){for(var a;(a=this.eb.pop())!==void 0;)Je(a)},r.prototype.free=function(){this.freemem();var a=an(this.Ka)===0;return delete this.db.Ya[this.Ka],this.Ka=0,a},n.prototype.next=function(){if(this.Xa===null)return{done:!0};if(this.Ta!==null&&(this.Ta.free(),this.Ta=null),!this.db.db)throw this.fb(),Error("Database closed");var a=Ce(),l=ie(4);qe(s),qe(l);try{this.db.handleError(cr(this.db.db,this.cb,-1,s,l)),this.cb=Y(l,"i32");var p=Y(s,"i32");return p===0?(this.fb(),{done:!0}):(this.Ta=new r(p,this.db),this.db.Ya[p]=this.Ta,{value:this.Ta,done:!1})}catch(_){throw this.hb=ot(this.cb),this.fb(),_}finally{ke(a)}},n.prototype.fb=function(){Je(this.Xa),this.Xa=null},n.prototype.getRemainingSQL=function(){return this.hb!==null?this.hb:ot(this.cb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(a,l){if(!this.db)throw"Database closed";if(l){a=this.prepare(a,l);try{a.step()}finally{a.free()}}else this.handleError(g(this.db,a,0,0,s));return this},i.prototype.exec=function(a,l,p){if(!this.db)throw"Database closed";var _=Ce(),T=null;try{var C=yt(a),z=ie(4);for(a=[];Y(C,"i8")!==0;){qe(s),qe(z),this.handleError(cr(this.db,C,-1,s,z));var W=Y(s,"i32");if(C=Y(z,"i32"),W!==0){var H=null;for(T=new r(W,this),l!=null&&T.bind(l);T.step();)H===null&&(H={columns:T.getColumnNames(),values:[]},a.push(H)),H.values.push(T.get(null,p));T.free()}}return a}catch(K){throw T&&T.free(),K}finally{ke(_)}},i.prototype.each=function(a,l,p,_,T){typeof l=="function"&&(_=p,p=l,l=void 0),a=this.prepare(a,l);try{for(;a.step();)p(a.getAsObject(null,T))}finally{a.free()}if(typeof _=="function")return _()},i.prototype.prepare=function(a,l){if(qe(s),this.handleError($(this.db,a,-1,s,0)),a=Y(s,"i32"),a===0)throw"Nothing to prepare";var p=new r(a,this);return l!=null&&p.bind(l),this.Ya[a]=p},i.prototype.iterateStatements=function(a){return new n(a,this)},i.prototype.export=function(){Object.values(this.Ya).forEach(function(l){l.free()}),Object.values(this.Ma).forEach(be),this.Ma={},this.handleError(k(this.db));var a=Dr(this.filename);return this.handleError(w(this.filename,s)),this.db=Y(s,"i32"),br(this.db),a},i.prototype.close=function(){this.db!==null&&(Object.values(this.Ya).forEach(function(a){a.free()}),Object.values(this.Ma).forEach(be),this.Ma={},this.handleError(k(this.db)),Xt("/"+this.filename),this.db=null)},i.prototype.handleError=function(a){if(a===0)return null;throw a=Qr(this.db),Error(a)},i.prototype.getRowsModified=function(){return I(this.db)},i.prototype.create_function=function(a,l){Object.prototype.hasOwnProperty.call(this.Ma,a)&&(be(this.Ma[a]),delete this.Ma[a]);var p=Ke(function(_,T,C){T=t(T,C);try{var z=l.apply(null,T)}catch(W){Qe(_,W,-1);return}e(_,z)},"viii");return this.Ma[a]=p,this.handleError(pr(this.db,a,l.length,1,0,p,0,0,0)),this},i.prototype.create_aggregate=function(a,l){var p=l.init||function(){return null},_=l.finalize||function(H){return H},T=l.step;if(!T)throw"An aggregate function must have a step function in "+a;var C={};Object.hasOwnProperty.call(this.Ma,a)&&(be(this.Ma[a]),delete this.Ma[a]),l=a+"__finalize",Object.hasOwnProperty.call(this.Ma,l)&&(be(this.Ma[l]),delete this.Ma[l]);var z=Ke(function(H,K,_t){var pe=yr(H,1);Object.hasOwnProperty.call(C,pe)||(C[pe]=p()),K=t(K,_t),K=[C[pe]].concat(K);try{C[pe]=T.apply(null,K)}catch(yn){delete C[pe],Qe(H,yn,-1)}},"viii"),W=Ke(function(H){var K=yr(H,1);try{var _t=_(C[K])}catch(pe){delete C[K],Qe(H,pe,-1);return}e(H,_t),delete C[K]},"vi");return this.Ma[a]=z,this.Ma[l]=W,this.handleError(pr(this.db,a,T.length-1,1,0,0,z,W,0)),this},o.Database=i};var _e=Object.assign({},o),Xe="./this.program",V="",Ze,Re;if(te){var et=Ve,Tt=Ve;V=__dirname+"/",Re=e=>(e=Ne(e)?new URL(e):Tt.normalize(e),et.readFileSync(e)),Ze=e=>(e=Ne(e)?new URL(e):Tt.normalize(e),new Promise((t,r)=>{et.readFile(e,void 0,(n,i)=>{n?r(n):t(i.buffer)})})),!o.thisProgram&&1<process.argv.length&&(Xe=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),S.exports=o}else(ae||se)&&(se?V=self.location.href:typeof document<"u"&&document.currentScript&&(V=document.currentScript.src),V=V.startsWith("blob:")?"":V.substr(0,V.replace(/[?#].*/,"").lastIndexOf("/")+1),se&&(Re=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ze=e=>Ne(e)?new Promise((t,r)=>{var n=new XMLHttpRequest;n.open("GET",e,!0),n.responseType="arraybuffer",n.onload=()=>{(n.status==200||n.status==0&&n.response)&&r(n.response),t(n.status)},n.onerror=t,n.send(null)}):fetch(e,{credentials:"same-origin"}).then(t=>t.ok?t.arrayBuffer():Promise.reject(Error(t.status+" : "+t.url))));var St=o.print||console.log.bind(console),ue=o.printErr||console.error.bind(console);Object.assign(o,_e),_e=null,o.thisProgram&&(Xe=o.thisProgram);var ve;o.wasmBinary&&(ve=o.wasmBinary);var Fe,Mt=!1,D,O,Ee,v,N,tt,rt;function At(){var e=Fe.buffer;o.HEAP8=D=new Int8Array(e),o.HEAP16=Ee=new Int16Array(e),o.HEAPU8=O=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAP32=v=new Int32Array(e),o.HEAPU32=N=new Uint32Array(e),o.HEAPF32=tt=new Float32Array(e),o.HEAPF64=rt=new Float64Array(e)}var Ot=[],kt=[],Ct=[];function Sr(){var e=o.preRun.shift();Ot.unshift(e)}var le=0,ge=null;function re(e){var t;throw(t=o.onAbort)==null||t.call(o,e),e="Aborted("+e+")",ue(e),Mt=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var xt=e=>e.startsWith("data:application/octet-stream;base64,"),Ne=e=>e.startsWith("file://"),nt;function Rt(e){if(e==nt&&ve)return new Uint8Array(ve);if(Re)return Re(e);throw"both async and sync fetching of the wasm failed"}function Mr(e){return ve?Promise.resolve().then(()=>Rt(e)):Ze(e).then(t=>new Uint8Array(t),()=>Rt(e))}function Ft(e,t,r){return Mr(e).then(n=>WebAssembly.instantiate(n,t)).then(r,n=>{ue(`failed to asynchronously prepare wasm: ${n}`),re(n)})}function Ar(e,t){var r=nt;ve||typeof WebAssembly.instantiateStreaming!="function"||xt(r)||Ne(r)||te||typeof fetch!="function"?Ft(r,e,t):fetch(r,{credentials:"same-origin"}).then(n=>WebAssembly.instantiateStreaming(n,e).then(t,function(i){return ue(`wasm streaming compile failed: ${i}`),ue("falling back to ArrayBuffer instantiation"),Ft(r,e,t)}))}var b,R,it=e=>{for(;0<e.length;)e.shift()(o)};function Y(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return D[e];case"i8":return D[e];case"i16":return Ee[e>>1];case"i32":return v[e>>2];case"i64":re("to do getValue(i64) use WASM_BIGINT");case"float":return tt[e>>2];case"double":return rt[e>>3];case"*":return N[e>>2];default:re(`invalid type for getValue: ${t}`)}}function qe(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":D[e]=0;break;case"i8":D[e]=0;break;case"i16":Ee[e>>1]=0;break;case"i32":v[e>>2]=0;break;case"i64":re("to do setValue(i64) use WASM_BIGINT");case"float":tt[e>>2]=0;break;case"double":rt[e>>3]=0;break;case"*":N[e>>2]=0;break;default:re(`invalid type for setValue: ${t}`)}}var Nt=typeof TextDecoder<"u"?new TextDecoder:void 0,L=(e,t,r)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&Nt)return Nt.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var s=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|s);else{var u=e[t++]&63;i=(i&240)==224?(i&15)<<12|s<<6|u:(i&7)<<18|s<<12|u<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},ot=(e,t)=>e?L(O,e,t):"",Lt=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},fe=e=>{var t=e.charAt(0)==="/",r=e.substr(-1)==="/";return(e=Lt(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},Or=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.substr(0,t.length-1)),e+t)},Le=e=>{if(e==="/")return"/";e=fe(e),e=e.replace(/\/$/,"");var t=e.lastIndexOf("/");return t===-1?e:e.substr(t+1)},kr=()=>{if(typeof crypto=="object"&&typeof crypto.getRandomValues=="function")return r=>crypto.getRandomValues(r);if(te)try{var e=Ve;if(e.randomFillSync)return r=>e.randomFillSync(r);var t=e.randomBytes;return r=>(r.set(t(r.byteLength)),r)}catch{}re("initRandomDevice")},It=e=>(It=kr())(e),Ie=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=Lt(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},at=[],Te=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},X=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var s=0;s<e.length;++s){var u=e.charCodeAt(s);if(55296<=u&&57343>=u){var w=e.charCodeAt(++s);u=65536+((u&1023)<<10)|w&1023}if(127>=u){if(r>=n)break;t[r++]=u}else{if(2047>=u){if(r+1>=n)break;t[r++]=192|u>>6}else{if(65535>=u){if(r+2>=n)break;t[r++]=224|u>>12}else{if(r+3>=n)break;t[r++]=240|u>>18,t[r++]=128|u>>12&63}t[r++]=128|u>>6&63}t[r++]=128|u&63}}return t[r]=0,r-i};function Pt(e,t){var r=Array(Te(e)+1);return e=X(e,r,0,r.length),t&&(r.length=e),r}var Dt=[];function $t(e,t){Dt[e]={input:[],output:[],Wa:t},ft(e,Cr)}var Cr={open(e){var t=Dt[e.node.rdev];if(!t)throw new f(43);e.tty=t,e.seekable=!1},close(e){e.tty.Wa.fsync(e.tty)},fsync(e){e.tty.Wa.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.Wa.rb)throw new f(60);for(var i=0,s=0;s<n;s++){try{var u=e.tty.Wa.rb(e.tty)}catch{throw new f(29)}if(u===void 0&&i===0)throw new f(6);if(u==null)break;i++,t[r+s]=u}return i&&(e.node.timestamp=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.Wa.ib)throw new f(60);try{for(var i=0;i<n;i++)e.tty.Wa.ib(e.tty,t[r+i])}catch{throw new f(29)}return n&&(e.node.timestamp=Date.now()),i}},xr={rb(){e:{if(!at.length){var e=null;if(te){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=et.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}at=Pt(e,!0)}e=at.shift()}return e},ib(e,t){t===null||t===10?(St(L(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&0<e.output.length&&(St(L(e.output,0)),e.output=[])},Lb(){return{Gb:25856,Ib:5,Fb:191,Hb:35387,Eb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Mb(){return 0},Nb(){return[24,80]}},Rr={ib(e,t){t===null||t===10?(ue(L(e.output,0)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){e.output&&0<e.output.length&&(ue(L(e.output,0)),e.output=[])}};function Ut(e,t){var r=e.Ha?e.Ha.length:0;r>=t||(t=Math.max(t,r*(1048576>r?2:1.125)>>>0),r!=0&&(t=Math.max(t,256)),r=e.Ha,e.Ha=new Uint8Array(t),0<e.La&&e.Ha.set(r.subarray(0,e.La),0))}var q={Pa:null,Qa(){return q.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new f(63);return q.Pa||(q.Pa={dir:{node:{Oa:q.Fa.Oa,Na:q.Fa.Na,lookup:q.Fa.lookup,$a:q.Fa.$a,rename:q.Fa.rename,unlink:q.Fa.unlink,rmdir:q.Fa.rmdir,readdir:q.Fa.readdir,symlink:q.Fa.symlink},stream:{Sa:q.Ga.Sa}},file:{node:{Oa:q.Fa.Oa,Na:q.Fa.Na},stream:{Sa:q.Ga.Sa,read:q.Ga.read,write:q.Ga.write,kb:q.Ga.kb,ab:q.Ga.ab,bb:q.Ga.bb}},link:{node:{Oa:q.Fa.Oa,Na:q.Fa.Na,readlink:q.Fa.readlink},stream:{}},ob:{node:{Oa:q.Fa.Oa,Na:q.Fa.Na},stream:Pr}}),r=zt(e,t,r,n),G(r.mode)?(r.Fa=q.Pa.dir.node,r.Ga=q.Pa.dir.stream,r.Ha={}):(r.mode&61440)===32768?(r.Fa=q.Pa.file.node,r.Ga=q.Pa.file.stream,r.La=0,r.Ha=null):(r.mode&61440)===40960?(r.Fa=q.Pa.link.node,r.Ga=q.Pa.link.stream):(r.mode&61440)===8192&&(r.Fa=q.Pa.ob.node,r.Ga=q.Pa.ob.stream),r.timestamp=Date.now(),e&&(e.Ha[t]=r,e.timestamp=r.timestamp),r},Kb(e){return e.Ha?e.Ha.subarray?e.Ha.subarray(0,e.La):new Uint8Array(e.Ha):new Uint8Array(0)},Fa:{Oa(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,G(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.La:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.timestamp),t.mtime=new Date(e.timestamp),t.ctime=new Date(e.timestamp),t.yb=4096,t.blocks=Math.ceil(t.size/t.yb),t},Na(e,t){if(t.mode!==void 0&&(e.mode=t.mode),t.timestamp!==void 0&&(e.timestamp=t.timestamp),t.size!==void 0&&(t=t.size,e.La!=t))if(t==0)e.Ha=null,e.La=0;else{var r=e.Ha;e.Ha=new Uint8Array(t),r&&e.Ha.set(r.subarray(0,Math.min(t,e.La))),e.La=t}},lookup(){throw ut[44]},$a(e,t,r,n){return q.createNode(e,t,r,n)},rename(e,t,r){if(G(e.mode)){try{var n=ce(t,r)}catch{}if(n)for(var i in n.Ha)throw new f(55)}delete e.parent.Ha[e.name],e.parent.timestamp=Date.now(),e.name=r,t.Ha[r]=e,t.timestamp=e.parent.timestamp},unlink(e,t){delete e.Ha[t],e.timestamp=Date.now()},rmdir(e,t){var r=ce(e,t),n;for(n in r.Ha)throw new f(55);delete e.Ha[t],e.timestamp=Date.now()},readdir(e){var t=[".",".."],r;for(r of Object.keys(e.Ha))t.push(r);return t},symlink(e,t,r){return e=q.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new f(28);return e.link}},Ga:{read(e,t,r,n,i){var s=e.node.Ha;if(i>=e.node.La)return 0;if(e=Math.min(e.node.La-i,n),8<e&&s.subarray)t.set(s.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=s[i+n];return e},write(e,t,r,n,i,s){if(t.buffer===D.buffer&&(s=!1),!n)return 0;if(e=e.node,e.timestamp=Date.now(),t.subarray&&(!e.Ha||e.Ha.subarray)){if(s)return e.Ha=t.subarray(r,r+n),e.La=n;if(e.La===0&&i===0)return e.Ha=t.slice(r,r+n),e.La=n;if(i+n<=e.La)return e.Ha.set(t.subarray(r,r+n),i),n}if(Ut(e,i+n),e.Ha.subarray&&t.subarray)e.Ha.set(t.subarray(r,r+n),i);else for(s=0;s<n;s++)e.Ha[i+s]=t[r+s];return e.La=Math.max(e.La,i+n),n},Sa(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.La),0>t)throw new f(28);return t},kb(e,t,r){Ut(e.node,t+r),e.node.La=Math.max(e.node.La,t+r)},ab(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new f(43);if(e=e.node.Ha,i&2||e.buffer!==D.buffer){if((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),r=!0,t=65536*Math.ceil(t/65536),(i=ur(65536,t))?(O.fill(0,i,i+t),t=i):t=0,!t)throw new f(48);D.set(e,t)}else r=!1,t=e.byteOffset;return{Cb:t,tb:r}},bb(e,t,r,n){return q.Ga.write(e,t,0,n,r,!1),0}}},jt=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},st=null,Gt={},Se=[],Fr=1,ne=null,Ht=!0,f=class{constructor(e){this.name="ErrnoError",this.Ja=e}},ut={},Nr=class{constructor(){this.Za={},this.node=null}get flags(){return this.Za.flags}set flags(e){this.Za.flags=e}get position(){return this.Za.position}set position(e){this.Za.position=e}},Lr=class{constructor(e,t,r,n){e||(e=this),this.parent=e,this.Qa=e.Qa,this.Ua=null,this.id=Fr++,this.name=t,this.mode=r,this.Fa={},this.Ga={},this.rdev=n}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function j(e,t={}){if(e=Ie(e),!e)return{path:"",node:null};if(t=Object.assign({pb:!0,jb:0},t),8<t.jb)throw new f(32);e=e.split("/").filter(u=>!!u);for(var r=st,n="/",i=0;i<e.length;i++){var s=i===e.length-1;if(s&&t.parent)break;if(r=ce(r,e[i]),n=fe(n+"/"+e[i]),r.Ua&&(!s||s&&t.pb)&&(r=r.Ua.root),!s||t.Ra){for(s=0;(r.mode&61440)===40960;)if(r=Zt(n),n=Ie(Or(n),r),r=j(n,{jb:t.jb+1}).node,40<s++)throw new f(32)}}return{path:n,node:r}}function Pe(e){for(var t;;){if(e===e.parent)return e=e.Qa.sb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function lt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ne.length}function Wt(e){var t=lt(e.parent.id,e.name);if(ne[t]===e)ne[t]=e.Va;else for(t=ne[t];t;){if(t.Va===e){t.Va=e.Va;break}t=t.Va}}function ce(e,t){var r=G(e.mode)?(r=de(e,"x"))?r:e.Fa.lookup?0:2:54;if(r)throw new f(r);for(r=ne[lt(e.id,t)];r;r=r.Va){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.Fa.lookup(e,t)}function zt(e,t,r,n){return e=new Lr(e,t,r,n),t=lt(e.parent.id,e.name),e.Va=ne[t],ne[t]=e}function G(e){return(e&61440)===16384}function Kt(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function de(e,t){if(Ht)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function Jt(e,t){try{return ce(e,t),20}catch{}return de(e,"wx")}function Bt(e,t,r){try{var n=ce(e,t)}catch(i){return i.Ja}if(e=de(e,"wx"))return e;if(r){if(!G(n.mode))return 54;if(n===n.parent||Pe(n)==="/")return 10}else if(G(n.mode))return 31;return 0}function U(e){if(e=Se[e],!e)throw new f(8);return e}function Qt(e,t=-1){if(e=Object.assign(new Nr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!Se[t])break e;throw new f(33)}return e.fd=t,Se[t]=e}function Ir(e,t=-1){var r,n;return e=Qt(e,t),(n=(r=e.Ga)==null?void 0:r.Jb)==null||n.call(r,e),e}var Pr={open(e){var t,r;e.Ga=Gt[e.node.rdev].Ga,(r=(t=e.Ga).open)==null||r.call(t,e)},Sa(){throw new f(70)}};function ft(e,t){Gt[e]={Ga:t}}function Vt(e,t){var r=t==="/";if(r&&st)throw new f(10);if(!r&&t){var n=j(t,{pb:!1});if(t=n.path,n=n.node,n.Ua)throw new f(10);if(!G(n.mode))throw new f(54)}t={type:e,Ob:{},sb:t,Bb:[]},e=e.Qa(t),e.Qa=t,t.root=e,r?st=e:n&&(n.Ua=t,n.Qa&&n.Qa.Bb.push(t))}function De(e,t,r){var n=j(e,{parent:!0}).node;if(e=Le(e),!e||e==="."||e==="..")throw new f(28);var i=Jt(n,e);if(i)throw new f(i);if(!n.Fa.$a)throw new f(63);return n.Fa.$a(n,e,t,r)}function J(e,t){return De(e,(t!==void 0?t:511)&1023|16384,0)}function $e(e,t,r){typeof r>"u"&&(r=t,t=438),De(e,t|8192,r)}function ct(e,t){if(!Ie(e))throw new f(44);var r=j(t,{parent:!0}).node;if(!r)throw new f(44);t=Le(t);var n=Jt(r,t);if(n)throw new f(n);if(!r.Fa.symlink)throw new f(63);r.Fa.symlink(r,t,e)}function Yt(e){var t=j(e,{parent:!0}).node;e=Le(e);var r=ce(t,e),n=Bt(t,e,!0);if(n)throw new f(n);if(!t.Fa.rmdir)throw new f(63);if(r.Ua)throw new f(10);t.Fa.rmdir(t,e),Wt(r)}function Xt(e){var t=j(e,{parent:!0}).node;if(!t)throw new f(44);e=Le(e);var r=ce(t,e),n=Bt(t,e,!1);if(n)throw new f(n);if(!t.Fa.unlink)throw new f(63);if(r.Ua)throw new f(10);t.Fa.unlink(t,e),Wt(r)}function Zt(e){if(e=j(e).node,!e)throw new f(44);if(!e.Fa.readlink)throw new f(28);return Ie(Pe(e.parent),e.Fa.readlink(e))}function Me(e,t){if(e=j(e,{Ra:!t}).node,!e)throw new f(44);if(!e.Fa.Oa)throw new f(63);return e.Fa.Oa(e)}function er(e){return Me(e,!0)}function Ue(e,t){if(e=typeof e=="string"?j(e,{Ra:!0}).node:e,!e.Fa.Na)throw new f(63);e.Fa.Na(e,{mode:t&4095|e.mode&-4096,timestamp:Date.now()})}function tr(e,t){if(0>t)throw new f(28);if(e=typeof e=="string"?j(e,{Ra:!0}).node:e,!e.Fa.Na)throw new f(63);if(G(e.mode))throw new f(31);if((e.mode&61440)!==32768)throw new f(28);var r=de(e,"w");if(r)throw new f(r);e.Fa.Na(e,{size:t,timestamp:Date.now()})}function ye(e,t,r){if(e==="")throw new f(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?(typeof r>"u"?438:r)&4095|32768:0,typeof e=="object")var i=e;else{e=fe(e);try{i=j(e,{Ra:!(t&131072)}).node}catch{}}if(n=!1,t&64)if(i){if(t&128)throw new f(20)}else i=De(e,r,0),n=!0;if(!i)throw new f(44);if((i.mode&61440)===8192&&(t&=-513),t&65536&&!G(i.mode))throw new f(54);if(!n&&(r=i?(i.mode&61440)===40960?32:G(i.mode)&&(Kt(t)!=="r"||t&512)?31:de(i,Kt(t)):44))throw new f(r);return t&512&&!n&&tr(i,0),t&=-131713,i=Qt({node:i,path:Pe(i),flags:t,seekable:!0,position:0,Ga:i.Ga,Db:[],error:!1}),i.Ga.open&&i.Ga.open(i),!o.logReadFiles||t&1||(mt||(mt={}),e in mt||(mt[e]=1)),i}function ht(e){if(e.fd===null)throw new f(8);e.gb&&(e.gb=null);try{e.Ga.close&&e.Ga.close(e)}catch(t){throw t}finally{Se[e.fd]=null}e.fd=null}function rr(e,t,r){if(e.fd===null)throw new f(8);if(!e.seekable||!e.Ga.Sa)throw new f(70);if(r!=0&&r!=1&&r!=2)throw new f(28);e.position=e.Ga.Sa(e,t,r),e.Db=[]}function nr(e,t,r,n,i){if(0>n||0>i)throw new f(28);if(e.fd===null)throw new f(8);if((e.flags&2097155)===1)throw new f(8);if(G(e.node.mode))throw new f(31);if(!e.Ga.read)throw new f(28);var s=typeof i<"u";if(!s)i=e.position;else if(!e.seekable)throw new f(70);return t=e.Ga.read(e,t,r,n,i),s||(e.position+=t),t}function ir(e,t,r,n,i){if(0>n||0>i)throw new f(28);if(e.fd===null)throw new f(8);if((e.flags&2097155)===0)throw new f(8);if(G(e.node.mode))throw new f(31);if(!e.Ga.write)throw new f(28);e.seekable&&e.flags&1024&&rr(e,0,2);var s=typeof i<"u";if(!s)i=e.position;else if(!e.seekable)throw new f(70);return t=e.Ga.write(e,t,r,n,i,void 0),s||(e.position+=t),t}function Dr(e){var t,r=ye(e,r||0);e=Me(e).size;var n=new Uint8Array(e);return nr(r,n,0,e,0),t=n,ht(r),t}var or;function Ae(e,t,r){e=fe("/dev/"+e);var n=jt(!!t,!!r);ar||(ar=64);var i=ar++<<8|0;ft(i,{open(s){s.seekable=!1},close(){var s;(s=r==null?void 0:r.buffer)!=null&&s.length&&r(10)},read(s,u,w,k){for(var g=0,I=0;I<k;I++){try{var $=t()}catch{throw new f(29)}if($===void 0&&g===0)throw new f(6);if($==null)break;g++,u[w+I]=$}return g&&(s.node.timestamp=Date.now()),g},write(s,u,w,k){for(var g=0;g<k;g++)try{r(u[w+g])}catch{throw new f(29)}return k&&(s.node.timestamp=Date.now()),g}}),$e(e,n,i)}var ar,x={},mt;function he(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":U(e).path,t.length==0){if(!r)throw new f(44);return e}return fe(e+"/"+t)}function je(e,t,r){e=e(t),v[r>>2]=e.dev,v[r+4>>2]=e.mode,N[r+8>>2]=e.nlink,v[r+12>>2]=e.uid,v[r+16>>2]=e.gid,v[r+20>>2]=e.rdev,R=[e.size>>>0,(b=e.size,1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[r+24>>2]=R[0],v[r+28>>2]=R[1],v[r+32>>2]=4096,v[r+36>>2]=e.blocks,t=e.atime.getTime();var n=e.mtime.getTime(),i=e.ctime.getTime();return R=[Math.floor(t/1e3)>>>0,(b=Math.floor(t/1e3),1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[r+40>>2]=R[0],v[r+44>>2]=R[1],N[r+48>>2]=t%1e3*1e3,R=[Math.floor(n/1e3)>>>0,(b=Math.floor(n/1e3),1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[r+56>>2]=R[0],v[r+60>>2]=R[1],N[r+64>>2]=n%1e3*1e3,R=[Math.floor(i/1e3)>>>0,(b=Math.floor(i/1e3),1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[r+72>>2]=R[0],v[r+76>>2]=R[1],N[r+80>>2]=i%1e3*1e3,R=[e.ino>>>0,(b=e.ino,1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[r+88>>2]=R[0],v[r+92>>2]=R[1],0}var Ge=void 0;function He(){var e=v[+Ge>>2];return Ge+=4,e}var Oe=(e,t)=>t+2097152>>>0<4194305-!!e?(e>>>0)+4294967296*t:NaN,$r=[0,31,60,91,121,152,182,213,244,274,305,335],Ur=[0,31,59,90,120,151,181,212,243,273,304,334],pt={},sr=()=>{if(!dt){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:Xe||"./this.program"},t;for(t in pt)pt[t]===void 0?delete e[t]:e[t]=pt[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);dt=r}return dt},dt,yt=e=>{var t=Te(e)+1,r=ie(t);return X(e,O,r,t),r},jr=(e,t,r,n)=>{var i={string:g=>{var I=0;return g!=null&&g!==0&&(I=yt(g)),I},array:g=>{var I=ie(g.length);return D.set(g,I),I}};e=o["_"+e];var s=[],u=0;if(n)for(var w=0;w<n.length;w++){var k=i[r[w]];k?(u===0&&(u=Ce()),s[w]=k(n[w])):s[w]=n[w]}return r=e(...s),r=function(g){return u!==0&&ke(u),t==="string"?g?L(O,g):"":t==="boolean"?!!g:g}(r)},We=0,ze=(e,t)=>(t=t==1?ie(e.length):wt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),O.set(e,t),t),me,bt=[],Z,be=e=>{me.delete(Z.get(e)),Z.set(e,null),bt.push(e)},Ke=(e,t)=>{if(!me){me=new WeakMap;var r=Z.length;if(me)for(var n=0;n<0+r;n++){var i=Z.get(n);i&&me.set(i,n)}}if(r=me.get(e)||0)return r;if(bt.length)r=bt.pop();else{try{Z.grow(1)}catch(w){throw w instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":w}r=Z.length-1}try{Z.set(r,e)}catch(w){if(!(w instanceof TypeError))throw w;if(typeof WebAssembly.Function=="function"){n=WebAssembly.Function,i={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"};for(var s={parameters:[],results:t[0]=="v"?[]:[i[t[0]]]},u=1;u<t.length;++u)s.parameters.push(i[t[u]]);t=new n(s,e)}else{for(n=[1],i=t.slice(0,1),t=t.slice(1),s={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96),u=t.length,128>u?n.push(u):n.push(u%128|128,u>>7),u=0;u<t.length;++u)n.push(s[t[u]]);i=="v"?n.push(0):n.push(1,s[i]),t=[0,97,115,109,1,0,0,0,1],i=n.length,128>i?t.push(i):t.push(i%128|128,i>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}Z.set(r,t)}return me.set(e,r),r};[44].forEach(e=>{ut[e]=new f(e),ut[e].stack="<generic error, no stack>"}),ne=Array(4096),Vt(q,"/"),J("/tmp"),J("/home"),J("/home/web_user"),function(){J("/dev"),ft(259,{read:()=>0,write:(n,i,s,u)=>u}),$e("/dev/null",259),$t(1280,xr),$t(1536,Rr),$e("/dev/tty",1280),$e("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(t=It(e).byteLength),e[--t]);Ae("random",r),Ae("urandom",r),J("/dev/shm"),J("/dev/shm/tmp")}(),function(){J("/proc");var e=J("/proc/self");J("/proc/self/fd"),Vt({Qa(){var t=zt(e,"fd",16895,73);return t.Fa={lookup(r,n){var i=U(+n);return r={parent:null,Qa:{sb:"fake"},Fa:{readlink:()=>i.path}},r.parent=r}},t}},"/proc/self/fd")}();var Gr={a:(e,t,r,n)=>{re(`Assertion failed: ${e?L(O,e):""}, at: `+[t?t?L(O,t):"":"unknown filename",r,n?n?L(O,n):"":"unknown function"])},h:function(e,t){try{return e=e?L(O,e):"",Ue(e,t),0}catch(r){if(typeof x>"u"||r.name!=="ErrnoError")throw r;return-r.Ja}},H:function(e,t,r){try{if(t=t?L(O,t):"",t=he(e,t),r&-8)return-28;var n=j(t,{Ra:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&de(n,e)?-2:0):-44}catch(i){if(typeof x>"u"||i.name!=="ErrnoError")throw i;return-i.Ja}},i:function(e,t){try{var r=U(e);return Ue(r.node,t),0}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return-n.Ja}},g:function(e){try{var t=U(e).node,r=typeof t=="string"?j(t,{Ra:!0}).node:t;if(!r.Fa.Na)throw new f(63);return r.Fa.Na(r,{timestamp:Date.now()}),0}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return-n.Ja}},b:function(e,t,r){Ge=r;try{var n=U(e);switch(t){case 0:var i=He();if(0>i)break;for(;Se[i];)i++;return Ir(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=He(),n.flags|=i,0;case 12:return i=He(),Ee[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(s){if(typeof x>"u"||s.name!=="ErrnoError")throw s;return-s.Ja}},f:function(e,t){try{var r=U(e);return je(Me,r.path,t)}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return-n.Ja}},n:function(e,t,r){t=Oe(t,r);try{if(isNaN(t))return 61;var n=U(e);if((n.flags&2097155)===0)throw new f(28);return tr(n.node,t),0}catch(i){if(typeof x>"u"||i.name!=="ErrnoError")throw i;return-i.Ja}},C:function(e,t){try{if(t===0)return-28;var r=Te("/")+1;return t<r?-68:(X("/",O,e,t),r)}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return-n.Ja}},F:function(e,t){try{return e=e?L(O,e):"",je(er,e,t)}catch(r){if(typeof x>"u"||r.name!=="ErrnoError")throw r;return-r.Ja}},z:function(e,t,r){try{return t=t?L(O,t):"",t=he(e,t),t=fe(t),t[t.length-1]==="/"&&(t=t.substr(0,t.length-1)),J(t,r),0}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return-n.Ja}},E:function(e,t,r,n){try{t=t?L(O,t):"";var i=n&256;return t=he(e,t,n&4096),je(i?er:Me,t,r)}catch(s){if(typeof x>"u"||s.name!=="ErrnoError")throw s;return-s.Ja}},x:function(e,t,r,n){Ge=n;try{t=t?L(O,t):"",t=he(e,t);var i=n?He():0;return ye(t,r,i).fd}catch(s){if(typeof x>"u"||s.name!=="ErrnoError")throw s;return-s.Ja}},v:function(e,t,r,n){try{if(t=t?L(O,t):"",t=he(e,t),0>=n)return-28;var i=Zt(t),s=Math.min(n,Te(i)),u=D[r+s];return X(i,O,r,n+1),D[r+s]=u,s}catch(w){if(typeof x>"u"||w.name!=="ErrnoError")throw w;return-w.Ja}},u:function(e){try{return e=e?L(O,e):"",Yt(e),0}catch(t){if(typeof x>"u"||t.name!=="ErrnoError")throw t;return-t.Ja}},G:function(e,t){try{return e=e?L(O,e):"",je(Me,e,t)}catch(r){if(typeof x>"u"||r.name!=="ErrnoError")throw r;return-r.Ja}},r:function(e,t,r){try{return t=t?L(O,t):"",t=he(e,t),r===0?Xt(t):r===512?Yt(t):re("Invalid flags passed to unlinkat"),0}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return-n.Ja}},q:function(e,t,r){try{if(t=t?L(O,t):"",t=he(e,t,!0),r){var n=N[r>>2]+4294967296*v[r+4>>2],i=v[r+8>>2];s=1e3*n+i/1e6,r+=16,n=N[r>>2]+4294967296*v[r+4>>2],i=v[r+8>>2],u=1e3*n+i/1e6}else var s=Date.now(),u=s;e=s;var w=j(t,{Ra:!0}).node;return w.Fa.Na(w,{timestamp:Math.max(e,u)}),0}catch(k){if(typeof x>"u"||k.name!=="ErrnoError")throw k;return-k.Ja}},l:function(e,t,r){e=new Date(1e3*Oe(e,t)),v[r>>2]=e.getSeconds(),v[r+4>>2]=e.getMinutes(),v[r+8>>2]=e.getHours(),v[r+12>>2]=e.getDate(),v[r+16>>2]=e.getMonth(),v[r+20>>2]=e.getFullYear()-1900,v[r+24>>2]=e.getDay(),t=e.getFullYear(),v[r+28>>2]=(t%4!==0||t%100===0&&t%400!==0?Ur:$r)[e.getMonth()]+e.getDate()-1|0,v[r+36>>2]=-(60*e.getTimezoneOffset()),t=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();v[r+32>>2]=(t!=n&&e.getTimezoneOffset()==Math.min(n,t))|0},j:function(e,t,r,n,i,s,u,w){i=Oe(i,s);try{if(isNaN(i))return 61;var k=U(n);if((t&2)!==0&&(r&2)===0&&(k.flags&2097155)!==2)throw new f(2);if((k.flags&2097155)===1)throw new f(2);if(!k.Ga.ab)throw new f(43);var g=k.Ga.ab(k,e,i,t,r),I=g.Cb;return v[u>>2]=g.tb,N[w>>2]=I,0}catch($){if(typeof x>"u"||$.name!=="ErrnoError")throw $;return-$.Ja}},k:function(e,t,r,n,i,s,u){s=Oe(s,u);try{var w=U(i);if(r&2){if((w.node.mode&61440)!==32768)throw new f(43);if(!(n&2)){var k=O.slice(e,e+t);w.Ga.bb&&w.Ga.bb(w,k,s,t,n)}}}catch(g){if(typeof x>"u"||g.name!=="ErrnoError")throw g;return-g.Ja}},y:(e,t,r,n)=>{var i=new Date().getFullYear(),s=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),N[e>>2]=60*Math.max(s,i),v[t>>2]=+(s!=i),t=u=>{var w=Math.abs(u);return`UTC${0<=u?"-":"+"}${String(Math.floor(w/60)).padStart(2,"0")}${String(w%60).padStart(2,"0")}`},e=t(s),t=t(i),i<s?(X(e,O,r,17),X(t,O,n,17)):(X(e,O,n,17),X(t,O,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=O.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);var i=Math;n=Math.max(e,n);e:{i=(i.min.call(i,2147483648,n+(65536-n%65536)%65536)-Fe.buffer.byteLength+65535)/65536;try{Fe.grow(i),At();var s=1;break e}catch{}s=void 0}if(s)return!0}return!1},A:(e,t)=>{var r=0;return sr().forEach((n,i)=>{var s=t+r;for(i=N[e+4*i>>2]=s,s=0;s<n.length;++s)D[i++]=n.charCodeAt(s);D[i]=0,r+=n.length+1}),0},B:(e,t)=>{var r=sr();N[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),N[t>>2]=n,0},e:function(e){try{var t=U(e);return ht(t),0}catch(r){if(typeof x>"u"||r.name!=="ErrnoError")throw r;return r.Ja}},p:function(e,t){try{var r=U(e);return D[t]=r.tty?2:G(r.mode)?3:(r.mode&61440)===40960?7:4,Ee[t+2>>1]=0,R=[0,(b=0,1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[t+8>>2]=R[0],v[t+12>>2]=R[1],R=[0,(b=0,1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[t+16>>2]=R[0],v[t+20>>2]=R[1],0}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return n.Ja}},w:function(e,t,r,n){try{e:{var i=U(e);e=t;for(var s,u=t=0;u<r;u++){var w=N[e>>2],k=N[e+4>>2];e+=8;var g=nr(i,D,w,k,s);if(0>g){var I=-1;break e}if(t+=g,g<k)break;typeof s<"u"&&(s+=g)}I=t}return N[n>>2]=I,0}catch($){if(typeof x>"u"||$.name!=="ErrnoError")throw $;return $.Ja}},m:function(e,t,r,n,i){t=Oe(t,r);try{if(isNaN(t))return 61;var s=U(e);return rr(s,t,n),R=[s.position>>>0,(b=s.position,1<=+Math.abs(b)?0<b?+Math.floor(b/4294967296)>>>0:~~+Math.ceil((b-+(~~b>>>0))/4294967296)>>>0:0)],v[i>>2]=R[0],v[i+4>>2]=R[1],s.gb&&t===0&&n===0&&(s.gb=null),0}catch(u){if(typeof x>"u"||u.name!=="ErrnoError")throw u;return u.Ja}},D:function(e){var r;try{var t=U(e);return(r=t.Ga)!=null&&r.fsync?t.Ga.fsync(t):0}catch(n){if(typeof x>"u"||n.name!=="ErrnoError")throw n;return n.Ja}},t:function(e,t,r,n){try{e:{var i=U(e);e=t;for(var s,u=t=0;u<r;u++){var w=N[e>>2],k=N[e+4>>2];e+=8;var g=ir(i,D,w,k,s);if(0>g){var I=-1;break e}t+=g,typeof s<"u"&&(s+=g)}I=t}return N[n>>2]=I,0}catch($){if(typeof x>"u"||$.name!=="ErrnoError")throw $;return $.Ja}}},d=function(){var r;function e(n){var i;return d=n.exports,Fe=d.I,At(),Z=d.K,kt.unshift(d.J),le--,(i=o.monitorRunDependencies)==null||i.call(o,le),le==0&&ge&&(n=ge,ge=null,n()),d}var t={a:Gr};if(le++,(r=o.monitorRunDependencies)==null||r.call(o,le),o.instantiateWasm)try{return o.instantiateWasm(t,e)}catch(n){return ue(`Module.instantiateWasm callback failed with error: ${n}`),!1}return nt||(nt=xt("sql-wasm.wasm")?"sql-wasm.wasm":o.locateFile?o.locateFile("sql-wasm.wasm",V):V+"sql-wasm.wasm"),Ar(t,function(n){e(n.instance)}),{}}();o._sqlite3_free=e=>(o._sqlite3_free=d.L)(e),o._sqlite3_value_text=e=>(o._sqlite3_value_text=d.M)(e),o._sqlite3_prepare_v2=(e,t,r,n,i)=>(o._sqlite3_prepare_v2=d.N)(e,t,r,n,i),o._sqlite3_step=e=>(o._sqlite3_step=d.O)(e),o._sqlite3_reset=e=>(o._sqlite3_reset=d.P)(e),o._sqlite3_exec=(e,t,r,n,i)=>(o._sqlite3_exec=d.Q)(e,t,r,n,i),o._sqlite3_finalize=e=>(o._sqlite3_finalize=d.R)(e),o._sqlite3_column_name=(e,t)=>(o._sqlite3_column_name=d.S)(e,t),o._sqlite3_column_text=(e,t)=>(o._sqlite3_column_text=d.T)(e,t),o._sqlite3_column_type=(e,t)=>(o._sqlite3_column_type=d.U)(e,t),o._sqlite3_errmsg=e=>(o._sqlite3_errmsg=d.V)(e),o._sqlite3_clear_bindings=e=>(o._sqlite3_clear_bindings=d.W)(e),o._sqlite3_value_blob=e=>(o._sqlite3_value_blob=d.X)(e),o._sqlite3_value_bytes=e=>(o._sqlite3_value_bytes=d.Y)(e),o._sqlite3_value_double=e=>(o._sqlite3_value_double=d.Z)(e),o._sqlite3_value_int=e=>(o._sqlite3_value_int=d._)(e),o._sqlite3_value_type=e=>(o._sqlite3_value_type=d.$)(e),o._sqlite3_result_blob=(e,t,r,n)=>(o._sqlite3_result_blob=d.aa)(e,t,r,n),o._sqlite3_result_double=(e,t)=>(o._sqlite3_result_double=d.ba)(e,t),o._sqlite3_result_error=(e,t,r)=>(o._sqlite3_result_error=d.ca)(e,t,r),o._sqlite3_result_int=(e,t)=>(o._sqlite3_result_int=d.da)(e,t),o._sqlite3_result_int64=(e,t,r)=>(o._sqlite3_result_int64=d.ea)(e,t,r),o._sqlite3_result_null=e=>(o._sqlite3_result_null=d.fa)(e),o._sqlite3_result_text=(e,t,r,n)=>(o._sqlite3_result_text=d.ga)(e,t,r,n),o._sqlite3_aggregate_context=(e,t)=>(o._sqlite3_aggregate_context=d.ha)(e,t),o._sqlite3_column_count=e=>(o._sqlite3_column_count=d.ia)(e),o._sqlite3_data_count=e=>(o._sqlite3_data_count=d.ja)(e),o._sqlite3_column_blob=(e,t)=>(o._sqlite3_column_blob=d.ka)(e,t),o._sqlite3_column_bytes=(e,t)=>(o._sqlite3_column_bytes=d.la)(e,t),o._sqlite3_column_double=(e,t)=>(o._sqlite3_column_double=d.ma)(e,t),o._sqlite3_bind_blob=(e,t,r,n,i)=>(o._sqlite3_bind_blob=d.na)(e,t,r,n,i),o._sqlite3_bind_double=(e,t,r)=>(o._sqlite3_bind_double=d.oa)(e,t,r),o._sqlite3_bind_int=(e,t,r)=>(o._sqlite3_bind_int=d.pa)(e,t,r),o._sqlite3_bind_text=(e,t,r,n,i)=>(o._sqlite3_bind_text=d.qa)(e,t,r,n,i),o._sqlite3_bind_parameter_index=(e,t)=>(o._sqlite3_bind_parameter_index=d.ra)(e,t),o._sqlite3_sql=e=>(o._sqlite3_sql=d.sa)(e),o._sqlite3_normalized_sql=e=>(o._sqlite3_normalized_sql=d.ta)(e),o._sqlite3_changes=e=>(o._sqlite3_changes=d.ua)(e),o._sqlite3_close_v2=e=>(o._sqlite3_close_v2=d.va)(e),o._sqlite3_create_function_v2=(e,t,r,n,i,s,u,w,k)=>(o._sqlite3_create_function_v2=d.wa)(e,t,r,n,i,s,u,w,k),o._sqlite3_open=(e,t)=>(o._sqlite3_open=d.xa)(e,t);var wt=o._malloc=e=>(wt=o._malloc=d.ya)(e),Je=o._free=e=>(Je=o._free=d.za)(e);o._RegisterExtensionFunctions=e=>(o._RegisterExtensionFunctions=d.Aa)(e);var ur=(e,t)=>(ur=d.Ba)(e,t),ke=e=>(ke=d.Ca)(e),ie=e=>(ie=d.Da)(e),Ce=()=>(Ce=d.Ea)();o.stackSave=()=>Ce(),o.stackRestore=e=>ke(e),o.stackAlloc=e=>ie(e),o.cwrap=(e,t,r,n)=>{var i=!r||r.every(s=>s==="number"||s==="boolean");return t!=="string"&&i&&!n?o["_"+e]:(...s)=>jr(e,t,r,s)},o.addFunction=Ke,o.removeFunction=be,o.UTF8ToString=ot,o.ALLOC_NORMAL=We,o.allocate=ze,o.allocateUTF8OnStack=yt;var Be;ge=function e(){Be||lr(),Be||(ge=e)};function lr(){function e(){var r;if(!Be&&(Be=!0,o.calledRun=!0,!Mt)){if(o.noFSInit||or||(or=!0,o.stdin=o.stdin,o.stdout=o.stdout,o.stderr=o.stderr,o.stdin?Ae("stdin",o.stdin):ct("/dev/tty","/dev/stdin"),o.stdout?Ae("stdout",null,o.stdout):ct("/dev/tty","/dev/stdout"),o.stderr?Ae("stderr",null,o.stderr):ct("/dev/tty1","/dev/stderr"),ye("/dev/stdin",0),ye("/dev/stdout",1),ye("/dev/stderr",1)),Ht=!1,it(kt),(r=o.onRuntimeInitialized)==null||r.call(o),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var t=o.postRun.shift();Ct.unshift(t)}it(Ct)}}if(!(0<le)){if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Sr();it(Ot),0<le||(o.setStatus?(o.setStatus("Running..."),setTimeout(function(){setTimeout(function(){o.setStatus("")},1),e()},1)):e())}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return lr(),M}),m)};S.exports=c,S.exports.default=c}(ee)),ee.exports}var Er=vr(),gr=oe(Er);const qr=`
-- Enable foreign key support
PRAGMA foreign_keys = ON;

-- Drop existing tables if they exist
DROP TABLE IF EXISTS Orders;
DROP TABLE IF EXISTS Customers;
DROP TABLE IF EXISTS Products;

-- Create Customers Table
CREATE TABLE Customers (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE,
    phone TEXT
);

-- Create Products Table
CREATE TABLE Products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    created_at DATE NOT NULL
);

-- Create Orders Table with Foreign Key Constraints
CREATE TABLE Orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_id INTEGER NOT NULL,
    product_id INTEGER NOT NULL,
    order_date DATE NOT NULL,
    quantity INTEGER NOT NULL,
    FOREIGN KEY (customer_id) REFERENCES Customers(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES Products(id) ON DELETE CASCADE
);

-- Insert 30 Customers
INSERT INTO Customers (first_name, last_name, email, phone) VALUES
('Emma', 'Rodriguez', 'emma.rodriguez@gmail.com', '(555) 123-4567'),
('Liam', 'Chen', 'liam.chen@example.com', '(555) 234-5678'),
('Olivia', 'Patel', 'olivia.patel@hotmail.com', '(555) 345-6789'),
('Noah', 'Kim', 'noah.kim@live.com', '(555) 456-7890'),
('Ava', 'Singh', 'ava.singh@gmail.com', '(555) 567-8901'),
('Ethan', 'Garcia', 'ethan.garcia@hotmail.com', '(555) 678-9012'),
('Sophia', 'Nguyen', 'sophia.nguyen@live.com', '(555) 789-0123'),
('Mason', 'Wang', 'mason.wang@example.com', '(555) 890-1234'),
('Isabella', 'Kumar', 'isabella.kumar@outlook.com', '(555) 901-2345'),
('William', 'Hernandez', 'william.hernandez@example.com', '(555) 012-3456'),
('Mia', 'Lee', 'mia.lee@example.com', '(555) 987-6543'),
('James', 'Gupta', 'james.gupta@outlook.com', '(555) 876-5432'),
('Charlotte', 'Martinez', 'charlotte.martinez@example.com', '(555) 765-4321'),
('Benjamin', 'Suzuki', 'benjamin.suzuki@hotmail.com', '(555) 654-3210'),
('Amelia', 'Ahmed', 'amelia.ahmed@outlook.com', '(555) 543-2109'),
('Lucas', 'Park', 'lucas.park@hotmail.com', '(555) 432-1098'),
('Harper', 'Tanaka', 'harper.tanaka@gmail.com', '(555) 321-0987'),
('Alexander', 'Mehta', 'alexander.mehta@proton.com', '(555) 210-9876'),
('Evelyn', 'Sato', 'evelyn.sato@outlook.com', '(555) 109-8765'),
('Michael', 'Khan', 'michael.khan@outlook.com', '(555) 098-7654'),
('Abigail', 'Yamaguchi', 'abigail.yamaguchi@proton.com', '(555) 876-5432'),
('Daniel', 'Choi', 'daniel.choi@gmail.com', '(555) 765-4321'),
('Emily', 'Gupta', 'emily.gupta@example.com', '(555) 654-3210'),
('Jacob', 'Liu', 'jacob.liu@proton.com', '(555) 543-2109'),
('Madison', 'Cho', 'madison.cho@hotmail.com', '(555) 432-1098'),
('Logan', 'Pham', 'logan.pham@gmail.com', '(555) 321-0987'),
('Elizabeth', 'Nakamura', 'elizabeth.nakamura@example.com', '(555) 210-9876'),
('Sebastian', 'Malik', 'sebastian.malik@example.com', '(555) 109-8765'),
('Avery', 'Suzuki', 'avery.suzuki@hotmail.com', '(555) 098-7654'),
('Jackson', 'Krishnamurthy', 'jackson.krishnamurthy@gmail.com', '(555) 987-6543');

-- Insert 20 Products
INSERT INTO Products (name, description, price, created_at) VALUES
('Smart Home Hub', 'Central control system for smart home devices', 129.99, '2025-01-15'),
('Wireless Earbuds', 'Noise-cancelling earbuds with long battery life', 199.99, '2025-01-16'),
('Fitness Tracker', 'Advanced health monitoring smartwatch', 149.99, '2025-01-17'),
('4K Action Camera', 'Waterproof camera for extreme sports', 299.99, '2025-01-18'),
('Portable Solar Charger', 'Eco-friendly charging solution for devices', 79.99, '2025-01-19'),
('Smart Robot Vacuum', 'AI-powered cleaning robot with mapping', 249.99, '2025-01-20'),
('Noise-Cancelling Headphones', 'Premium over-ear wireless headphones', 349.99, '2025-01-21'),
('Portable Power Station', 'High-capacity battery for outdoor adventures', 399.99, '2025-01-22'),
('Smart Garden Sensor', 'Monitors plant health and soil conditions', 59.99, '2025-01-23'),
('Electric Skateboard', 'Compact personal transportation device', 499.99, '2025-01-24'),
('Compact Drone', 'Portable aerial photography drone', 299.99, '2025-01-25'),
('Smart Thermostat', 'Energy-efficient home temperature control', 179.99, '2025-01-26'),
('Portable Projector', 'Pocket-sized HD movie projector', 249.99, '2025-01-27'),
('Wireless Charging Pad', 'Multi-device fast charging station', 69.99, '2025-01-28'),
('Smart Water Bottle', 'Hydration tracking and temperature control', 39.99, '2025-01-29'),
('Bluetooth Speaker', 'Waterproof outdoor sound system', 129.99, '2025-01-30'),
('Digital Writing Tablet', 'Electronic notebook with cloud sync', 199.99, '2025-02-01'),
('Portable Air Purifier', 'Compact air cleaning device', 99.99, '2025-02-02'),
('Smart Light Bulbs', 'Color-changing WiFi-enabled lighting', 29.99, '2025-02-03'),
('Wireless Game Controller', 'Universal gaming controller', 79.99, '2025-02-04');

-- Insert 10 Orders
INSERT INTO Orders (customer_id, product_id, order_date, quantity) VALUES
(1, 5, '2025-02-10', 2),
(7, 12, '2025-02-11', 1),
(15, 3, '2025-02-12', 3),
(22, 8, '2025-02-13', 1),
(9, 16, '2025-02-14', 2),
(18, 1, '2025-02-15', 1),
(25, 7, '2025-02-16', 1),
(11, 19, '2025-02-17', 4),
(29, 11, '2025-02-18', 1),
(5, 14, '2025-02-19', 2);

-- Verification Queries
SELECT 'Customers Count:', COUNT(*) FROM Customers;
SELECT 'Products Count:', COUNT(*) FROM Products;
SELECT 'Orders Count:', COUNT(*) FROM Orders;
`,Q=class Q{constructor(h,m=!1){we(this,"db");we(this,"firstTable",null);we(this,"tablesSchema",{});we(this,"indexesSchema",[]);this.db=h,m||this.db.exec(qr),this.getDatabaseSchema()}static async initSQLjs(){return Q.sqlJsStatic?Q.sqlJsStatic:await gr({locateFile:h=>`/wasm/${h}`})}static async create(){const h=await Q.initSQLjs(),m=new h.Database;return new Q(m,!1)}static async open(h){const m=await Q.initSQLjs(),c=new m.Database(h);return new Q(c,!0)}exec(h){const m=this.db.exec(h),c=h.toUpperCase();let y=!1;return Tr(c)&&(this.getDatabaseSchema(),y=!0),[m,y]}download(){return this.db.export()}getTableInfo(h){const[m]=this.exec(`PRAGMA table_info("${h}")`),[c]=this.exec(`PRAGMA foreign_key_list("${h}")`),y={};if(c.length>0)for(const M of c[0].values)y[M[3]]=!0;let E="_rowid_";const A=[];if(m.length>0)for(const M of m[0].values){const[P,o,ae,se,te,_e]=M;_e===1&&(E=o),A.push({name:o||"Unknown",cid:P,type:ae||"Unknown",dflt_value:te,IsNullable:se===0,isPrimaryKey:_e===1,isForeignKey:y[o]??!1})}else console.error("No table info found");return[A,E]}getDatabaseSchema(){this.tablesSchema={},this.indexesSchema=[],this.firstTable=null;const[h]=this.exec("SELECT type, name, tbl_name FROM sqlite_master WHERE name != 'sqlite_sequence'");if(h.length!==0){for(const m of h[0].values){const[c,y,E]=m;if(c==="table"){const[A,M]=this.getTableInfo(E);this.tablesSchema[E]={schema:A,primaryKey:M}}else c==="index"&&this.indexesSchema.push({name:y,tableName:E})}this.firstTable=Object.keys(this.tablesSchema)[0]}}getMaxSizeOfTable(h,m){const[c]=this.exec(`
      SELECT COUNT(*) FROM "${h}" 
      ${Ye(m)}
    `);return c.length===0?0:Math.ceil(c[0].values[0][0])}getTableData(h,m,c,y,E){const[A]=this.exec(`
      SELECT ${this.tablesSchema[h].primaryKey}, * FROM "${h}" 
      ${Ye(y)} 
      ${Et(E)} 
      LIMIT ${m} OFFSET ${c}
    `);if(A.length===0)return[];const M=this.getMaxSizeOfTable(h,y);return[A,M]}getPrimaryKey(h){const m=this.tablesSchema[h];if(!m)throw new Error(`Table "${h}" not found.`);return m.primaryKey}update(h,m,c,y){try{const E=this.getPrimaryKey(h),A=m.map(o=>`"${o}" = ?`).join(", "),M=`UPDATE "${h}" SET ${A} WHERE "${E}" = ?`;c=c.map(o=>o===""?null:o);const P=this.db.prepare(M);P.run([...c,y]),P.free()}catch(E){throw E instanceof Error?new Error(`Error while updating table ${h}: ${E.message}`):new Error(`Error while updating table ${h}: ${E}`)}}delete(h,m){try{const c=this.getPrimaryKey(h),y=`DELETE FROM "${h}" WHERE "${c}" = ?`,E=this.db.prepare(y);E.run([m]),E.free()}catch(c){throw c instanceof Error?new Error(`Error while deleting from table ${h}: ${c.message}`):new Error(`Error while deleting from table ${h}: ${c}`)}}insert(h,m,c){try{const y=m.map((o,ae)=>({col:o,val:c[ae]})).filter(o=>o.val!=="");if(y.length===0)throw new Error("No valid values provided for insertion.");const E=y.map(o=>o.col),A=y.map(o=>o.val),M=`INSERT INTO "${h}" (${E.join(", ")}) VALUES (${E.map(()=>"?").join(", ")})`,P=this.db.prepare(M);P.run([...A]),P.free()}catch(y){throw new Error(`Error while inserting into table ${h}: ${y}`)}}export({table:h,offset:m,limit:c,filters:y,sorters:E}){let A=`SELECT * FROM "${h}" ${Ye(y)} ${Et(E)}`;m&&c&&(A+=` LIMIT ${c} OFFSET ${m}`);const[M]=this.exec(A);return M}getTableAsCsv(h){const m=this.export({table:h});return gt(m[0].columns,m[0].values)}getCurrentDataAsCsv(h,m,c,y,E){const A=this.export({table:h,filters:y,sorters:E,limit:m,offset:c});return gt(A[0].columns,A[0].values)}};we(Q,"sqlJsStatic");let xe=Q;function Tr(S){return S.match(/^\s*(CREATE|DROP|ALTER)\s/i)!==null}function Ye(S){return S?`WHERE ${Object.entries(S).map(([m,c])=>`${m} LIKE '%${c}%' ESCAPE '\\'`).join(" AND ")}`:""}function Et(S){return S?`ORDER BY ${Object.entries(S).map(([m,c])=>`${m} ${c}`).join(", ")}`:""}function gt(S,h){const m=S.map(y=>`"${y}"`).join(","),c=h.map(y=>S.map(E=>`"${y[S.indexOf(E)]}"`).join(","));return[m,...c].join(`
`)}class qt extends Error{constructor(h){super(h),this.name="CustomQueryError"}}let F=null;self.onmessage=async S=>{const{action:h,payload:m}=S.data;if(h==="init"){F=await xe.create(),self.postMessage({action:"initComplete",payload:{tableSchema:F.tablesSchema,indexSchema:F.indexesSchema,currentTable:F.firstTable}});return}if(F===null){self.postMessage({action:"queryError",payload:"Database not initialized"});return}try{switch(h){case"openFile":{F=await xe.open(new Uint8Array(m.file)),self.postMessage({action:"initComplete",payload:{tableSchema:F.tablesSchema,indexSchema:F.indexesSchema,currentTable:F.firstTable}});break}case"refresh":{const{currentTable:c,limit:y,offset:E,filters:A,sorters:M}=m,[P,o]=F.getTableData(c,y,E,A,M);self.postMessage({action:"queryComplete",payload:{results:P,maxSize:o}});break}case"exec":{try{const{query:c,currentTable:y,limit:E,offset:A,filters:M,sorters:P}=m,[o,ae]=F.exec(c);if(ae)self.postMessage({action:"updateInstance",payload:{tableSchema:F.tablesSchema,indexSchema:F.indexesSchema}});else if(o.length>0)self.postMessage({action:"customQueryComplete",payload:{results:o}});else{const[se,te]=F.getTableData(y,E,A,M,P);self.postMessage({action:"queryComplete",payload:{results:se,maxSize:te}})}}catch(c){if(c instanceof Error)throw new qt(c.message)}break}case"getTableData":{const{currentTable:c,limit:y,offset:E,filters:A,sorters:M}=m,[P,o]=F.getTableData(c,y,E,A,M);self.postMessage({action:"queryComplete",payload:{results:P,maxSize:o}});break}case"download":{const c=F.download();self.postMessage({action:"downloadComplete",payload:{bytes:c}});break}case"update":{const{table:c,columns:y,values:E,primaryValue:A}=m;F.update(c,y,E,A),self.postMessage({action:"updateComplete",payload:{type:"updated"}});break}case"delete":{const{table:c,primaryValue:y}=m;F.delete(c,y),self.postMessage({action:"updateComplete",payload:{type:"deleted"}});break}case"insert":{const{table:c,columns:y,values:E}=m;F.insert(c,y,E),self.postMessage({action:"insertComplete"});break}case"export":{const{table:c,filters:y,sorters:E,limit:A,offset:M,exportType:P}=m;let o;P==="table"?o=F.getTableAsCsv(c):o=F.getCurrentDataAsCsv(c,A,M,y,E),self.postMessage({action:"exportComplete",payload:{results:o}});break}default:console.warn("Unknown worker action:",h)}}catch(c){c instanceof Error?self.postMessage({action:"queryError",payload:{error:{message:c.message,isCustomQueryError:c instanceof qt}}}):self.postMessage({action:"queryError",payload:{error:{message:"Unknown error",isCustomQueryError:!1}}})}}})();
