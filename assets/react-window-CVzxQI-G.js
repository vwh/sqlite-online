import{b as pe,a as ve,c as Q}from"./@babel-BTbEZfjA.js";import{m as B}from"./memoize-one-CcMeOnPo.js";import{r as D}from"./react-egwdCabL.js";var ge=typeof performance=="object"&&typeof performance.now=="function",X=ge?function(){return performance.now()}:function(){return Date.now()};function Y(l){cancelAnimationFrame(l.id)}function we(l,t){var o=X();function n(){X()-o>=t?l.call(null):r.id=requestAnimationFrame(n)}var r={id:requestAnimationFrame(n)};return r}var K=-1;function Ce(l){if(l===void 0&&(l=!1),K===-1||l){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",document.body.appendChild(t),K=t.offsetWidth-t.clientWidth,document.body.removeChild(t)}return K}var E=null;function ee(l){if(l===void 0&&(l=!1),E===null||l){var t=document.createElement("div"),o=t.style;o.width="50px",o.height="50px",o.overflow="scroll",o.direction="rtl";var n=document.createElement("div"),r=n.style;return r.width="100px",r.height="100px",t.appendChild(n),document.body.appendChild(t),t.scrollLeft>0?E="positive-descending":(t.scrollLeft=1,t.scrollLeft===0?E="negative":E="positive-ascending"),document.body.removeChild(t),E}return E}var Ie=150,Se=function(t){var o=t.columnIndex;t.data;var n=t.rowIndex;return n+":"+o},U=null,q=null,V=null;typeof window<"u"&&typeof window.WeakSet<"u"&&(U=new WeakSet,q=new WeakSet,V=new WeakSet);function Me(l){var t,o=l.getColumnOffset,n=l.getColumnStartIndexForOffset,r=l.getColumnStopIndexForStartIndex,s=l.getColumnWidth,a=l.getEstimatedTotalHeight,u=l.getEstimatedTotalWidth,d=l.getOffsetForColumnAndAlignment,v=l.getOffsetForRowAndAlignment,h=l.getRowHeight,T=l.getRowOffset,R=l.getRowStartIndexForOffset,le=l.getRowStopIndexForStartIndex,se=l.initInstanceProps,$=l.shouldResetStyleCacheOnItemSizeChange,ce=l.validateProps;return t=function(j){pe(k,j);function k(b){var e;return e=j.call(this,b)||this,e._instanceProps=se(e.props,Q(e)),e._resetIsScrollingTimeoutId=null,e._outerRef=void 0,e.state={instance:Q(e),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof e.props.initialScrollLeft=="number"?e.props.initialScrollLeft:0,scrollTop:typeof e.props.initialScrollTop=="number"?e.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},e._callOnItemsRendered=void 0,e._callOnItemsRendered=B(function(c,i,m,p,f,g,C,M){return e.props.onItemsRendered({overscanColumnStartIndex:c,overscanColumnStopIndex:i,overscanRowStartIndex:m,overscanRowStopIndex:p,visibleColumnStartIndex:f,visibleColumnStopIndex:g,visibleRowStartIndex:C,visibleRowStopIndex:M})}),e._callOnScroll=void 0,e._callOnScroll=B(function(c,i,m,p,f){return e.props.onScroll({horizontalScrollDirection:m,scrollLeft:c,scrollTop:i,verticalScrollDirection:p,scrollUpdateWasRequested:f})}),e._getItemStyle=void 0,e._getItemStyle=function(c,i){var m=e.props,p=m.columnWidth,f=m.direction,g=m.rowHeight,C=e._getItemStyleCache($&&p,$&&f,$&&g),M=c+":"+i,I;if(C.hasOwnProperty(M))I=C[M];else{var S=o(e.props,i,e._instanceProps),w=f==="rtl";C[M]=I={position:"absolute",left:w?void 0:S,right:w?S:void 0,top:T(e.props,c,e._instanceProps),height:h(e.props,c,e._instanceProps),width:s(e.props,i,e._instanceProps)}}return I},e._getItemStyleCache=void 0,e._getItemStyleCache=B(function(c,i,m){return{}}),e._onScroll=function(c){var i=c.currentTarget,m=i.clientHeight,p=i.clientWidth,f=i.scrollLeft,g=i.scrollTop,C=i.scrollHeight,M=i.scrollWidth;e.setState(function(I){if(I.scrollLeft===f&&I.scrollTop===g)return null;var S=e.props.direction,w=f;if(S==="rtl")switch(ee()){case"negative":w=-f;break;case"positive-descending":w=M-p-f;break}w=Math.max(0,Math.min(w,M-p));var x=Math.max(0,Math.min(g,C-m));return{isScrolling:!0,horizontalScrollDirection:I.scrollLeft<f?"forward":"backward",scrollLeft:w,scrollTop:x,verticalScrollDirection:I.scrollTop<g?"forward":"backward",scrollUpdateWasRequested:!1}},e._resetIsScrollingDebounced)},e._outerRefSetter=function(c){var i=e.props.outerRef;e._outerRef=c,typeof i=="function"?i(c):i!=null&&typeof i=="object"&&i.hasOwnProperty("current")&&(i.current=c)},e._resetIsScrollingDebounced=function(){e._resetIsScrollingTimeoutId!==null&&Y(e._resetIsScrollingTimeoutId),e._resetIsScrollingTimeoutId=we(e._resetIsScrolling,Ie)},e._resetIsScrolling=function(){e._resetIsScrollingTimeoutId=null,e.setState({isScrolling:!1},function(){e._getItemStyleCache(-1)})},e}k.getDerivedStateFromProps=function(e,c){return Re(e,c),ce(e),null};var O=k.prototype;return O.scrollTo=function(e){var c=e.scrollLeft,i=e.scrollTop;c!==void 0&&(c=Math.max(0,c)),i!==void 0&&(i=Math.max(0,i)),this.setState(function(m){return c===void 0&&(c=m.scrollLeft),i===void 0&&(i=m.scrollTop),m.scrollLeft===c&&m.scrollTop===i?null:{horizontalScrollDirection:m.scrollLeft<c?"forward":"backward",scrollLeft:c,scrollTop:i,scrollUpdateWasRequested:!0,verticalScrollDirection:m.scrollTop<i?"forward":"backward"}},this._resetIsScrollingDebounced)},O.scrollToItem=function(e){var c=e.align,i=c===void 0?"auto":c,m=e.columnIndex,p=e.rowIndex,f=this.props,g=f.columnCount,C=f.height,M=f.rowCount,I=f.width,S=this.state,w=S.scrollLeft,x=S.scrollTop,y=Ce();m!==void 0&&(m=Math.max(0,Math.min(m,g-1))),p!==void 0&&(p=Math.max(0,Math.min(p,M-1)));var W=a(this.props,this._instanceProps),_=u(this.props,this._instanceProps),z=_>I?y:0,A=W>C?y:0;this.scrollTo({scrollLeft:m!==void 0?d(this.props,m,i,w,this._instanceProps,A):w,scrollTop:p!==void 0?v(this.props,p,i,x,this._instanceProps,z):x})},O.componentDidMount=function(){var e=this.props,c=e.initialScrollLeft,i=e.initialScrollTop;if(this._outerRef!=null){var m=this._outerRef;typeof c=="number"&&(m.scrollLeft=c),typeof i=="number"&&(m.scrollTop=i)}this._callPropsCallbacks()},O.componentDidUpdate=function(){var e=this.props.direction,c=this.state,i=c.scrollLeft,m=c.scrollTop,p=c.scrollUpdateWasRequested;if(p&&this._outerRef!=null){var f=this._outerRef;if(e==="rtl")switch(ee()){case"negative":f.scrollLeft=-i;break;case"positive-ascending":f.scrollLeft=i;break;default:var g=f.clientWidth,C=f.scrollWidth;f.scrollLeft=C-g-i;break}else f.scrollLeft=Math.max(0,i);f.scrollTop=Math.max(0,m)}this._callPropsCallbacks()},O.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&Y(this._resetIsScrollingTimeoutId)},O.render=function(){var e=this.props,c=e.children,i=e.className,m=e.columnCount,p=e.direction,f=e.height,g=e.innerRef,C=e.innerElementType,M=e.innerTagName,I=e.itemData,S=e.itemKey,w=S===void 0?Se:S,x=e.outerElementType,y=e.outerTagName,W=e.rowCount,_=e.style,z=e.useIsScrolling,A=e.width,N=this.state.isScrolling,P=this._getHorizontalRangeToRender(),G=P[0],ue=P[1],Z=this._getVerticalRangeToRender(),de=Z[0],fe=Z[1],J=[];if(m>0&&W)for(var F=de;F<=fe;F++)for(var H=G;H<=ue;H++)J.push(D.createElement(c,{columnIndex:H,data:I,isScrolling:z?N:void 0,key:w({columnIndex:H,data:I,rowIndex:F}),rowIndex:F,style:this._getItemStyle(F,H)}));var me=a(this.props,this._instanceProps),he=u(this.props,this._instanceProps);return D.createElement(x||y||"div",{className:i,onScroll:this._onScroll,ref:this._outerRefSetter,style:ve({position:"relative",height:f,width:A,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:p},_)},D.createElement(C||M||"div",{children:J,ref:g,style:{height:me,pointerEvents:N?"none":void 0,width:he}}))},O._callPropsCallbacks=function(){var e=this.props,c=e.columnCount,i=e.onItemsRendered,m=e.onScroll,p=e.rowCount;if(typeof i=="function"&&c>0&&p>0){var f=this._getHorizontalRangeToRender(),g=f[0],C=f[1],M=f[2],I=f[3],S=this._getVerticalRangeToRender(),w=S[0],x=S[1],y=S[2],W=S[3];this._callOnItemsRendered(g,C,w,x,M,I,y,W)}if(typeof m=="function"){var _=this.state,z=_.horizontalScrollDirection,A=_.scrollLeft,N=_.scrollTop,P=_.scrollUpdateWasRequested,G=_.verticalScrollDirection;this._callOnScroll(A,N,z,G,P)}},O._getHorizontalRangeToRender=function(){var e=this.props,c=e.columnCount,i=e.overscanColumnCount,m=e.overscanColumnsCount,p=e.overscanCount,f=e.rowCount,g=this.state,C=g.horizontalScrollDirection,M=g.isScrolling,I=g.scrollLeft,S=i||m||p||1;if(c===0||f===0)return[0,0,0,0];var w=n(this.props,I,this._instanceProps),x=r(this.props,w,I,this._instanceProps),y=!M||C==="backward"?Math.max(1,S):1,W=!M||C==="forward"?Math.max(1,S):1;return[Math.max(0,w-y),Math.max(0,Math.min(c-1,x+W)),w,x]},O._getVerticalRangeToRender=function(){var e=this.props,c=e.columnCount,i=e.overscanCount,m=e.overscanRowCount,p=e.overscanRowsCount,f=e.rowCount,g=this.state,C=g.isScrolling,M=g.verticalScrollDirection,I=g.scrollTop,S=m||p||i||1;if(c===0||f===0)return[0,0,0,0];var w=R(this.props,I,this._instanceProps),x=le(this.props,w,I,this._instanceProps),y=!C||M==="backward"?Math.max(1,S):1,W=!C||M==="forward"?Math.max(1,S):1;return[Math.max(0,w-y),Math.max(0,Math.min(f-1,x+W)),w,x]},k}(D.PureComponent),t.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},t}var Re=function(t,o){var n=t.children,r=t.direction,s=t.height,a=t.innerTagName,u=t.outerTagName,d=t.overscanColumnsCount,v=t.overscanCount,h=t.overscanRowsCount,T=t.width,R=o.instance;{if(typeof v=="number"&&U&&!U.has(R)&&(U.add(R),console.warn("The overscanCount prop has been deprecated. Please use the overscanColumnCount and overscanRowCount props instead.")),(typeof d=="number"||typeof h=="number")&&q&&!q.has(R)&&(q.add(R),console.warn("The overscanColumnsCount and overscanRowsCount props have been deprecated. Please use the overscanColumnCount and overscanRowCount props instead.")),(a!=null||u!=null)&&V&&!V.has(R)&&(V.add(R),console.warn("The innerTagName and outerTagName props have been deprecated. Please use the innerElementType and outerElementType props instead.")),n==null)throw Error('An invalid "children" prop has been specified. Value should be a React component. '+('"'+(n===null?"null":typeof n)+'" was specified.'));switch(r){case"ltr":case"rtl":break;default:throw Error('An invalid "direction" prop has been specified. Value should be either "ltr" or "rtl". '+('"'+r+'" was specified.'))}if(typeof T!="number")throw Error('An invalid "width" prop has been specified. Grids must specify a number for width. '+('"'+(T===null?"null":typeof T)+'" was specified.'));if(typeof s!="number")throw Error('An invalid "height" prop has been specified. Grids must specify a number for height. '+('"'+(s===null?"null":typeof s)+'" was specified.'))}},te=50,re=function(t,o){var n=t.rowCount,r=o.rowMetadataMap,s=o.estimatedRowHeight,a=o.lastMeasuredRowIndex,u=0;if(a>=n&&(a=n-1),a>=0){var d=r[a];u=d.offset+d.size}var v=n-a-1,h=v*s;return u+h},ae=function(t,o){var n=t.columnCount,r=o.columnMetadataMap,s=o.estimatedColumnWidth,a=o.lastMeasuredColumnIndex,u=0;if(a>=n&&(a=n-1),a>=0){var d=r[a];u=d.offset+d.size}var v=n-a-1,h=v*s;return u+h},L=function(t,o,n,r){var s,a,u;if(t==="column"?(s=r.columnMetadataMap,a=o.columnWidth,u=r.lastMeasuredColumnIndex):(s=r.rowMetadataMap,a=o.rowHeight,u=r.lastMeasuredRowIndex),n>u){var d=0;if(u>=0){var v=s[u];d=v.offset+v.size}for(var h=u+1;h<=n;h++){var T=a(h);s[h]={offset:d,size:T},d+=T}t==="column"?r.lastMeasuredColumnIndex=n:r.lastMeasuredRowIndex=n}return s[n]},oe=function(t,o,n,r){var s,a;t==="column"?(s=n.columnMetadataMap,a=n.lastMeasuredColumnIndex):(s=n.rowMetadataMap,a=n.lastMeasuredRowIndex);var u=a>0?s[a].offset:0;return u>=r?ie(t,o,n,a,0,r):Te(t,o,n,Math.max(0,a),r)},ie=function(t,o,n,r,s,a){for(;s<=r;){var u=s+Math.floor((r-s)/2),d=L(t,o,u,n).offset;if(d===a)return u;d<a?s=u+1:d>a&&(r=u-1)}return s>0?s-1:0},Te=function(t,o,n,r,s){for(var a=t==="column"?o.columnCount:o.rowCount,u=1;r<a&&L(t,o,r,n).offset<s;)r+=u,u*=2;return ie(t,o,n,Math.min(r,a-1),Math.floor(r/2),s)},ne=function(t,o,n,r,s,a,u){var d=t==="column"?o.width:o.height,v=L(t,o,n,a),h=t==="column"?ae(o,a):re(o,a),T=Math.max(0,Math.min(h-d,v.offset)),R=Math.max(0,v.offset-d+u+v.size);switch(r==="smart"&&(s>=R-d&&s<=T+d?r="auto":r="center"),r){case"start":return T;case"end":return R;case"center":return Math.round(R+(T-R)/2);case"auto":default:return s>=R&&s<=T?s:R>T||s<R?R:T}},Oe=Me({getColumnOffset:function(t,o,n){return L("column",t,o,n).offset},getColumnStartIndexForOffset:function(t,o,n){return oe("column",t,n,o)},getColumnStopIndexForStartIndex:function(t,o,n,r){for(var s=t.columnCount,a=t.width,u=L("column",t,o,r),d=n+a,v=u.offset+u.size,h=o;h<s-1&&v<d;)h++,v+=L("column",t,h,r).size;return h},getColumnWidth:function(t,o,n){return n.columnMetadataMap[o].size},getEstimatedTotalHeight:re,getEstimatedTotalWidth:ae,getOffsetForColumnAndAlignment:function(t,o,n,r,s,a){return ne("column",t,o,n,r,s,a)},getOffsetForRowAndAlignment:function(t,o,n,r,s,a){return ne("row",t,o,n,r,s,a)},getRowOffset:function(t,o,n){return L("row",t,o,n).offset},getRowHeight:function(t,o,n){return n.rowMetadataMap[o].size},getRowStartIndexForOffset:function(t,o,n){return oe("row",t,n,o)},getRowStopIndexForStartIndex:function(t,o,n,r){for(var s=t.rowCount,a=t.height,u=L("row",t,o,r),d=n+a,v=u.offset+u.size,h=o;h<s-1&&v<d;)h++,v+=L("row",t,h,r).size;return h},initInstanceProps:function(t,o){var n=t,r=n.estimatedColumnWidth,s=n.estimatedRowHeight,a={columnMetadataMap:{},estimatedColumnWidth:r||te,estimatedRowHeight:s||te,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return o.resetAfterColumnIndex=function(u,d){d===void 0&&(d=!0),o.resetAfterIndices({columnIndex:u,shouldForceUpdate:d})},o.resetAfterRowIndex=function(u,d){d===void 0&&(d=!0),o.resetAfterIndices({rowIndex:u,shouldForceUpdate:d})},o.resetAfterIndices=function(u){var d=u.columnIndex,v=u.rowIndex,h=u.shouldForceUpdate,T=h===void 0?!0:h;typeof d=="number"&&(a.lastMeasuredColumnIndex=Math.min(a.lastMeasuredColumnIndex,d-1)),typeof v=="number"&&(a.lastMeasuredRowIndex=Math.min(a.lastMeasuredRowIndex,v-1)),o._getItemStyleCache(-1),T&&o.forceUpdate()},a},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(t){var o=t.columnWidth,n=t.rowHeight;{if(typeof o!="function")throw Error('An invalid "columnWidth" prop has been specified. Value should be a function. '+('"'+(o===null?"null":typeof o)+'" was specified.'));if(typeof n!="function")throw Error('An invalid "rowHeight" prop has been specified. Value should be a function. '+('"'+(n===null?"null":typeof n)+'" was specified.'))}}});export{Oe as V};
