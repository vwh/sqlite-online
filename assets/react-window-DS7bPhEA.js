import{b as X,a as Y,c as N}from"./@babel-BTbEZfjA.js";import{m as F}from"./memoize-one-CcMeOnPo.js";import{r as R}from"./react-B2RL9x2s.js";var Z=typeof performance=="object"&&typeof performance.now=="function",A=Z?function(){return performance.now()}:function(){return Date.now()};function U(n){cancelAnimationFrame(n.id)}function tt(n,e){var a=A();function u(){A()-a>=e?n.call(null):h.id=requestAnimationFrame(u)}var h={id:requestAnimationFrame(u)};return h}var W=-1;function $(n){if(n===void 0&&(n=!1),W===-1||n){var e=document.createElement("div"),a=e.style;a.width="50px",a.height="50px",a.overflow="scroll",document.body.appendChild(e),W=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return W}var _=null;function q(n){if(n===void 0&&(n=!1),_===null||n){var e=document.createElement("div"),a=e.style;a.width="50px",a.height="50px",a.overflow="scroll",a.direction="rtl";var u=document.createElement("div"),h=u.style;return h.width="100px",h.height="100px",e.appendChild(u),document.body.appendChild(e),e.scrollLeft>0?_="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?_="negative":_="positive-ascending"),document.body.removeChild(e),_}return _}var et=150,it=function(e,a){return e};function rt(n){var e,a=n.getItemOffset,u=n.getEstimatedTotalSize,h=n.getItemSize,x=n.getOffsetForIndexAndAlignment,C=n.getStartIndexForOffset,z=n.getStopIndexForStartIndex,O=n.initInstanceProps,y=n.shouldResetStyleCacheOnItemSizeChange,S=n.validateProps;return e=function(T){X(I,T);function I(f){var t;return t=T.call(this,f)||this,t._instanceProps=O(t.props,N(t)),t._outerRef=void 0,t._resetIsScrollingTimeoutId=null,t.state={instance:N(t),isScrolling:!1,scrollDirection:"forward",scrollOffset:typeof t.props.initialScrollOffset=="number"?t.props.initialScrollOffset:0,scrollUpdateWasRequested:!1},t._callOnItemsRendered=void 0,t._callOnItemsRendered=F(function(i,r,o,s){return t.props.onItemsRendered({overscanStartIndex:i,overscanStopIndex:r,visibleStartIndex:o,visibleStopIndex:s})}),t._callOnScroll=void 0,t._callOnScroll=F(function(i,r,o){return t.props.onScroll({scrollDirection:i,scrollOffset:r,scrollUpdateWasRequested:o})}),t._getItemStyle=void 0,t._getItemStyle=function(i){var r=t.props,o=r.direction,s=r.itemSize,d=r.layout,l=t._getItemStyleCache(y&&s,y&&d,y&&o),c;if(l.hasOwnProperty(i))c=l[i];else{var m=a(t.props,i,t._instanceProps),v=h(t.props,i,t._instanceProps),g=o==="horizontal"||d==="horizontal",b=o==="rtl",P=g?m:0;l[i]=c={position:"absolute",left:b?void 0:P,right:b?P:void 0,top:g?0:m,height:g?"100%":v,width:g?v:"100%"}}return c},t._getItemStyleCache=void 0,t._getItemStyleCache=F(function(i,r,o){return{}}),t._onScrollHorizontal=function(i){var r=i.currentTarget,o=r.clientWidth,s=r.scrollLeft,d=r.scrollWidth;t.setState(function(l){if(l.scrollOffset===s)return null;var c=t.props.direction,m=s;if(c==="rtl")switch(q()){case"negative":m=-s;break;case"positive-descending":m=d-o-s;break}return m=Math.max(0,Math.min(m,d-o)),{isScrolling:!0,scrollDirection:l.scrollOffset<m?"forward":"backward",scrollOffset:m,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._onScrollVertical=function(i){var r=i.currentTarget,o=r.clientHeight,s=r.scrollHeight,d=r.scrollTop;t.setState(function(l){if(l.scrollOffset===d)return null;var c=Math.max(0,Math.min(d,s-o));return{isScrolling:!0,scrollDirection:l.scrollOffset<c?"forward":"backward",scrollOffset:c,scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._outerRefSetter=function(i){var r=t.props.outerRef;t._outerRef=i,typeof r=="function"?r(i):r!=null&&typeof r=="object"&&r.hasOwnProperty("current")&&(r.current=i)},t._resetIsScrollingDebounced=function(){t._resetIsScrollingTimeoutId!==null&&U(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=tt(t._resetIsScrolling,et)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},function(){t._getItemStyleCache(-1,null)})},t}I.getDerivedStateFromProps=function(t,i){return ot(t,i),S(t),null};var p=I.prototype;return p.scrollTo=function(t){t=Math.max(0,t),this.setState(function(i){return i.scrollOffset===t?null:{scrollDirection:i.scrollOffset<t?"forward":"backward",scrollOffset:t,scrollUpdateWasRequested:!0}},this._resetIsScrollingDebounced)},p.scrollToItem=function(t,i){i===void 0&&(i="auto");var r=this.props,o=r.itemCount,s=r.layout,d=this.state.scrollOffset;t=Math.max(0,Math.min(t,o-1));var l=0;if(this._outerRef){var c=this._outerRef;s==="vertical"?l=c.scrollWidth>c.clientWidth?$():0:l=c.scrollHeight>c.clientHeight?$():0}this.scrollTo(x(this.props,t,i,d,this._instanceProps,l))},p.componentDidMount=function(){var t=this.props,i=t.direction,r=t.initialScrollOffset,o=t.layout;if(typeof r=="number"&&this._outerRef!=null){var s=this._outerRef;i==="horizontal"||o==="horizontal"?s.scrollLeft=r:s.scrollTop=r}this._callPropsCallbacks()},p.componentDidUpdate=function(){var t=this.props,i=t.direction,r=t.layout,o=this.state,s=o.scrollOffset,d=o.scrollUpdateWasRequested;if(d&&this._outerRef!=null){var l=this._outerRef;if(i==="horizontal"||r==="horizontal")if(i==="rtl")switch(q()){case"negative":l.scrollLeft=-s;break;case"positive-ascending":l.scrollLeft=s;break;default:var c=l.clientWidth,m=l.scrollWidth;l.scrollLeft=m-c-s;break}else l.scrollLeft=s;else l.scrollTop=s}this._callPropsCallbacks()},p.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&U(this._resetIsScrollingTimeoutId)},p.render=function(){var t=this.props,i=t.children,r=t.className,o=t.direction,s=t.height,d=t.innerRef,l=t.innerElementType,c=t.innerTagName,m=t.itemCount,v=t.itemData,g=t.itemKey,b=g===void 0?it:g,P=t.layout,H=t.outerElementType,K=t.outerTagName,V=t.style,j=t.useIsScrolling,B=t.width,E=this.state.isScrolling,M=o==="horizontal"||P==="horizontal",G=M?this._onScrollHorizontal:this._onScrollVertical,L=this._getRangeToRender(),J=L[0],Q=L[1],k=[];if(m>0)for(var w=J;w<=Q;w++)k.push(R.createElement(i,{data:v,key:b(w,v),index:w,isScrolling:j?E:void 0,style:this._getItemStyle(w)}));var D=u(this.props,this._instanceProps);return R.createElement(H||K||"div",{className:r,onScroll:G,ref:this._outerRefSetter,style:Y({position:"relative",height:s,width:B,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:o},V)},R.createElement(l||c||"div",{children:k,ref:d,style:{height:M?"100%":D,pointerEvents:E?"none":void 0,width:M?D:"100%"}}))},p._callPropsCallbacks=function(){if(typeof this.props.onItemsRendered=="function"){var t=this.props.itemCount;if(t>0){var i=this._getRangeToRender(),r=i[0],o=i[1],s=i[2],d=i[3];this._callOnItemsRendered(r,o,s,d)}}if(typeof this.props.onScroll=="function"){var l=this.state,c=l.scrollDirection,m=l.scrollOffset,v=l.scrollUpdateWasRequested;this._callOnScroll(c,m,v)}},p._getRangeToRender=function(){var t=this.props,i=t.itemCount,r=t.overscanCount,o=this.state,s=o.isScrolling,d=o.scrollDirection,l=o.scrollOffset;if(i===0)return[0,0,0,0];var c=C(this.props,l,this._instanceProps),m=z(this.props,c,l,this._instanceProps),v=!s||d==="backward"?Math.max(1,r):1,g=!s||d==="forward"?Math.max(1,r):1;return[Math.max(0,c-v),Math.max(0,Math.min(i-1,m+g)),c,m]},I}(R.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,layout:"vertical",overscanCount:2,useIsScrolling:!1},e}var ot=function(e,a){e.children,e.direction,e.height,e.layout,e.innerTagName,e.outerTagName,e.width,a.instance},st=rt({getItemOffset:function(e,a){var u=e.itemSize;return a*u},getItemSize:function(e,a){var u=e.itemSize;return u},getEstimatedTotalSize:function(e){var a=e.itemCount,u=e.itemSize;return u*a},getOffsetForIndexAndAlignment:function(e,a,u,h,x,C){var z=e.direction,O=e.height,y=e.itemCount,S=e.itemSize,T=e.layout,I=e.width,p=z==="horizontal"||T==="horizontal",f=p?I:O,t=Math.max(0,y*S-f),i=Math.min(t,a*S),r=Math.max(0,a*S-f+S+C);switch(u==="smart"&&(h>=r-f&&h<=i+f?u="auto":u="center"),u){case"start":return i;case"end":return r;case"center":{var o=Math.round(r+(i-r)/2);return o<Math.ceil(f/2)?0:o>t+Math.floor(f/2)?t:o}case"auto":default:return h>=r&&h<=i?h:h<r?r:i}},getStartIndexForOffset:function(e,a){var u=e.itemCount,h=e.itemSize;return Math.max(0,Math.min(u-1,Math.floor(a/h)))},getStopIndexForStartIndex:function(e,a,u){var h=e.direction,x=e.height,C=e.itemCount,z=e.itemSize,O=e.layout,y=e.width,S=h==="horizontal"||O==="horizontal",T=a*z,I=S?y:x,p=Math.ceil((I+u-T)/z);return Math.max(0,Math.min(C-1,a+p-1))},initInstanceProps:function(e){},shouldResetStyleCacheOnItemSizeChange:!0,validateProps:function(e){e.itemSize}});export{st as F};
