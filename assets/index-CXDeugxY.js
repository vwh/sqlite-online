import{r as n,j as e,R as A}from"./react-DmpIMwDM.js";import{c as bt}from"./react-dom-tIxIBQuZ.js";import{c as yt}from"./zustand-B1IM3DrU.js";import{i as jt}from"./sql.js-Ch_tM77n.js";import{F as le}from"./file-saver-DhbZvGod.js";import{c as wt}from"./clsx-B-dksMZM.js";import{t as Nt}from"./tailwind-merge-BkWO730n.js";import{S as vt,T as ie,I as Ct,a as ce,b as de,P as Rt,C as me,V as St,L as ue,c as fe,d as Et,e as Tt,f as xe,R as kt,G as Lt,g as Ft,h as pe,i as Dt,j as Pt,k as At,l as he,m as Ot,n as It,O as ge,o as be,p as $t,q as ye,D as je,r as Mt,s as Ht,t as Qt,u as we,v as Bt,w as qt,x as Ne,y as Ut,z as ve,A as Ce,B as Re,E as Se,F as zt,H as Ee,J as Te,K as ke,M as Le,N as Fe,Q as De,U as Vt,W as _t}from"./@radix-ui-BhwD-zRC.js";import{c as Q}from"./class-variance-authority-Bb4qSo10.js";import{C as Kt,a as Gt,b as Pe,c as Wt,d as Yt,K as Jt,e as Zt,f as Xt,g as Ae,T as es,H as ts,h as ss,i as as,I as rs,j as os,L as ns,k as ls,F as is,D as cs,P as ds,l as ms,m as us,M as fs,n as xs,X as ps,o as hs,R as gs,p as bs,q as ys,S as Oe,r as js,s as ws,G as Ns,t as vs,Z as Cs,u as Rs,v as Ss,A as Es}from"./lucide-react-CqMwyToG.js";import{f as Ts,a as W}from"./date-fns-fqmN70Xj.js";import{u as ks}from"./react-dropzone-D-IBOhIS.js";import{J as M,T as Ls}from"./sonner-BJG0sXho.js";import"./attr-accept-BWI1aNlo.js";import"./scheduler-CzFDRTuY.js";import"./use-sync-external-store-ByYeed7R.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-BOyN_WUU.js";import"./tslib-CuZy2iRz.js";import"./react-remove-scroll-bar-DZjhPxUV.js";import"./react-style-singleton-CpxBwIWS.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-D8_hMcUG.js";import"./use-callback-ref-DRzK4jWO.js";import"./@floating-ui-Dh2yObIN.js";import"./prop-types-psm7UO16.js";import"./file-selector-CBHVlu32.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const i of l.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function a(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function r(o){if(o.ep)return;o.ep=!0;const l=a(o);fetch(o.href,l)}})();const Fs="/sql.wasm",Ds=async t=>{try{const[s,a]=await Promise.all([t.arrayBuffer(),jt({locateFile:()=>Fs})]);return new a.Database(new Uint8Array(s))}catch(s){throw console.error("Failed to load database:",s),s}},Y=t=>{var s;try{return((s=t.exec("SELECT name FROM sqlite_master WHERE type='table';")[0])==null?void 0:s.values.flat())||[]}catch(a){return console.error("Failed to get table names:",a),[]}},Ps=async(t,s)=>{try{const[a,r]=t.exec(`
      PRAGMA table_info("${s}");
      PRAGMA foreign_key_list("${s}");
    `),o=a.values.reduce((l,i)=>(l[i[1]]={type:i[2]?i[2].toUpperCase():i[2],isPrimaryKey:i[5]===1,isForeignKey:!1},l),{});return r==null||r.values.forEach(l=>{const i=l[3];o[i]&&(o[i].isForeignKey=!0)}),o}catch(a){throw console.error(`Failed to get schema for table "${s}":`,a),a}},_=t=>{if(t.length===0)return{data:[],columns:[]};const{columns:s,values:a}=t[0];return{data:a.map(o=>Object.fromEntries(s.map((l,i)=>[l,o[i]]))),columns:s}},As=t=>{try{const s=t.export(),a=new Blob([s],{type:"application/x-sqlite3"});le.saveAs(a,"database.sqlite")}catch(s){throw console.error("Failed to export database:",s),s}},Os=(t,s)=>{const a=t.map(o=>`"${o}"`).join(","),r=s.map(o=>t.map(l=>`"${o[l]??""}"`).join(","));return[a,...r].join(`
`)},J=(t,s,a)=>{try{const r=s.exec(t);if(r.length===0)throw new Error(`Query "${t}" returned no results.`);const{data:o,columns:l}=_(r),i=Os(l,o),c=new Blob([i],{type:"text/csv;charset=utf-8;"});le.saveAs(c,`${a}.csv`)}catch(r){throw console.error(`Failed to get CSV for query "${t}":`,r),r}},Is=(t,s)=>{const r=Y(t)[s],o=`SELECT * FROM "${r}"`;J(o,t,r)},$s=t=>{Y(t).forEach(s=>{const a=`SELECT * FROM "${s}"`;J(a,t,s)})},Ms=(t,s)=>{J(s,t,"custom_query")},C=yt((t,s)=>({db:null,isLoading:!1,queryError:null,tables:[],selectedTable:"0",tableSchemas:{},rowPerPageOrAuto:"auto",isCustomQuery:!1,loadDatabase:async a=>{t({isLoading:!0,queryError:null});try{const r=await Ds(a),o=Y(r),l=await Promise.all(o.map(async m=>{const u=r.exec(`SELECT COUNT(*) FROM "${m}"`),x=parseInt(u[0].values[0][0],10),y=await Ps(r,m);return{name:m,count:x,schema:y}})),i=l.map(({name:m,count:u})=>({name:m,count:u})),c=l.reduce((m,{name:u,schema:x})=>(m[u]=x,m),{});t({db:r,tables:i,tableSchemas:c,isLoading:!1})}catch(r){throw console.error("Failed to load database:",r),t({isLoading:!1,queryError:"Failed to load database"}),r}},query:a=>{const{db:r}=s();return r?r.exec(a):(console.warn("Database is not loaded."),[])},setQueryError:a=>t({queryError:a}),setTables:a=>t({tables:a}),setSelectedTable:a=>t({selectedTable:a}),setRowPerPageOrAuto:a=>t({rowPerPageOrAuto:a}),customQuery:"",setIsCustomQuery:a=>t({isCustomQuery:a}),setCustomQuery:a=>t({customQuery:a}),queryHestory:[],unShiftToQueryHestory:a=>t(r=>({queryHestory:[a,...r.queryHestory]})),expandPage:!1,setExpandPage:a=>t({expandPage:a}),dateFormatValue:"formatDateFormatted",setDateFormatValue:a=>t({dateFormatValue:a}),filters:{},setFilters:a=>t({filters:a}),appendToFilters:(a,r)=>t(o=>({filters:{...o.filters,[a]:r}})),totalRows:0,setTotalRows:a=>t({totalRows:a})}));function Hs(t,s,a,r){const{db:o,setQueryError:l,setIsCustomQuery:i,query:c,unShiftToQueryHestory:m,customQuery:u,setCustomQuery:x,filters:y,totalRows:h,setTotalRows:f}=C(),[p,w]=n.useState([]),[L,b]=n.useState([]),[R,v]=n.useState(!0);n.useEffect(()=>{o&&t&&!r&&(v(!0),(async()=>{try{const g=`PRAGMA table_info("${t}");`,T=c(g)[0].values.map(j=>({name:j[1],type:j[2]})).map(j=>j.type.toUpperCase()==="BLOB"?`hex(${j.name}) as ${j.name}`:j.name).join(", "),k=Object.fromEntries(Object.entries(y).filter(([,j])=>j!==""));let O=`SELECT COUNT(*) as count FROM "${t}"`;if(Object.keys(k).length>0){const j=Object.entries(k).map(([U,z])=>`LOWER(${U}) LIKE LOWER('%${z}%')`).join(" AND ");O=`SELECT COUNT(*) as count FROM "${t}" WHERE ${j}`}const D=c(O)[0].values[0][0];f(D);let I=`SELECT ${T} FROM "${t}" LIMIT ${s} OFFSET ${a};`;if(Object.keys(k).length>0){const j=Object.entries(k).map(([U,z])=>`LOWER(${U}) LIKE LOWER('%${z}%')`).join(" AND ");I=`SELECT ${T} FROM "${t}" WHERE ${j} LIMIT ${s} OFFSET ${a};`}const pt=c(I),{data:ht,columns:gt}=_(pt);b(gt),w(ht),l(null),x(I),m(I)}catch(g){g instanceof Error&&l(g.message)}finally{v(!1)}})())},[o,t,a,s,r,l,c,x,m,y,f]);const S=n.useCallback(()=>{if(u.trim()===""){l(null);return}v(!0),(async()=>{try{const g=c(u),{data:E,columns:F}=_(g);b(F),w(E),i(!0),l(null)}catch(g){g instanceof Error&&l(g.message)}finally{v(!1)}})()},[u,c,l,i]);return{data:p,columns:L,customQuery:u,setCustomQuery:x,isQueryLoading:R,handleCustomQuery:S,totalRows:h}}function Qs(t){const{setIsCustomQuery:s}=C(),[a,r]=n.useState(0);n.useEffect(()=>{r(0),s(!1)},[s]);let o=30;if(t==="auto"){const l=window.innerHeight,i=[{height:1700,rowHeight:65},{height:1200,rowHeight:70},{height:1100,rowHeight:75},{height:1e3,rowHeight:80},{height:910,rowHeight:90},{height:850,rowHeight:95},{height:799,rowHeight:100},{height:750,rowHeight:110},{height:730,rowHeight:120},{height:700,rowHeight:135},{height:599,rowHeight:140},{height:500,rowHeight:200},{height:0,rowHeight:280}];let m=120;for(const u of i)if(l>u.height){m=u.rowHeight-10;break}o=Math.max(1,Math.floor(l/m))}else o=t;return{page:a,setPage:r,rowsPerPage:o}}function d(...t){return Nt(wt(t))}const B=n.forwardRef(({className:t,type:s,...a},r)=>e.jsx("input",{type:s,className:d("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),ref:r,...a}));B.displayName="Input";const Z=Q("inline-flex items-center justify-center whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),N=n.forwardRef(({className:t,variant:s,size:a,asChild:r=!1,...o},l)=>{const i=r?vt:"button";return e.jsx(i,{className:d(Z({variant:s,size:a,className:t})),ref:l,...o})});N.displayName="Button";function Bs({page:t,setPage:s,rowsPerPage:a}){const{totalRows:r}=C(),o=Math.ceil(r/a),l=Math.floor(t/a)+1,i=()=>{l<o&&s(t+a)},c=()=>{l>1&&s(t-a)};return e.jsx("section",{className:"fixed bottom-2 left-1/2 z-10 w-[270px] -translate-x-1/2 transform",children:e.jsxs("div",{className:"flex justify-between gap-2 rounded border bg-secondary p-[6px]",children:[e.jsx(N,{onClick:c,title:"Previous page",disabled:l===1,children:e.jsx(Kt,{className:"h-4 w-4"})}),e.jsxs("span",{className:"flex items-center justify-center text-sm",children:["Page ",l," of ",o]}),e.jsx(N,{onClick:i,title:"Next page",disabled:l>=o,children:e.jsx(Gt,{className:"h-4 w-4"})})]})})}const qs=kt,Us=Lt,zs=Ft,Ie=n.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(ie,{ref:r,className:d("flex h-10 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",t),...a,children:[s,e.jsx(Ct,{asChild:!0,children:e.jsx(Pe,{className:"h-4 w-4 opacity-50"})})]}));Ie.displayName=ie.displayName;const $e=n.forwardRef(({className:t,...s},a)=>e.jsx(ce,{ref:a,className:d("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Wt,{className:"h-4 w-4"})}));$e.displayName=ce.displayName;const Me=n.forwardRef(({className:t,...s},a)=>e.jsx(de,{ref:a,className:d("flex cursor-default items-center justify-center py-1",t),...s,children:e.jsx(Pe,{className:"h-4 w-4"})}));Me.displayName=de.displayName;const He=n.forwardRef(({className:t,children:s,position:a="popper",...r},o)=>e.jsx(Rt,{children:e.jsxs(me,{ref:o,className:d("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",a==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",t),position:a,...r,children:[e.jsx($e,{}),e.jsx(St,{className:d("p-1",a==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:s}),e.jsx(Me,{})]})}));He.displayName=me.displayName;const Qe=n.forwardRef(({className:t,...s},a)=>e.jsx(ue,{ref:a,className:d("py-1.5 pl-8 pr-2 text-sm font-semibold",t),...s}));Qe.displayName=ue.displayName;const Be=n.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(fe,{ref:r,className:d("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",t),...a,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(Et,{children:e.jsx(Yt,{className:"h-4 w-4"})})}),e.jsx(Tt,{children:s})]}));Be.displayName=fe.displayName;const Vs=n.forwardRef(({className:t,...s},a)=>e.jsx(xe,{ref:a,className:d("-mx-1 my-1 h-px bg-muted",t),...s}));Vs.displayName=xe.displayName;const _s=Q("inline-flex items-center rounded border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function X({className:t,variant:s,...a}){return e.jsx("div",{className:d(_s({variant:s}),t),...a})}function Ks(){const{tables:t,selectedTable:s,setSelectedTable:a,setIsCustomQuery:r}=C(),o=n.useMemo(()=>{var m;const c=parseInt(s);return isNaN(c)?0:((m=t[c])==null?void 0:m.count)||0},[t,s]),l=n.useMemo(()=>t.map((c,m)=>e.jsx(Be,{value:`${m}`,children:c.name[0].toUpperCase()+c.name.slice(1)},c.name)),[t]);function i(c){r(!1),a(c)}return e.jsxs("section",{className:"flex grow items-center justify-center gap-1",children:[e.jsxs(qs,{value:s,onValueChange:i,children:[e.jsx(Ie,{className:"grow",children:e.jsx(zs,{placeholder:"Select a table"})}),e.jsx(He,{children:e.jsxs(Us,{children:[e.jsx(Qe,{children:"Tables"}),l]})})]}),e.jsx(X,{title:"Rows",className:"hidden min-w-[100px] grow bg-background py-2 text-center text-sm md:block md:min-w-[200px]",variant:"outline",children:e.jsx("span",{className:"w-full text-center",children:o})})]})}const q=t=>t instanceof Date&&!isNaN(t.getTime()),Gs=t=>{const s=new Date(t);return q(s)?Ts(s,{addSuffix:!0}):t},Ws=t=>{const s=new Date(t);return q(s)?W(s,"MMMM do, yyyy"):t},Ys=t=>{const s=new Date(t);return q(s)?W(s,"MM/dd/yyyy"):t},Js=t=>{const s=new Date(t);return q(s)?W(s,"yyyy/dd/MM"):t},K={formatDateRelative:{label:"Over 56 years ago",func:Gs},formatDateFormatted:{label:"January 9th, 1968",func:Ws},formatDateLong:{label:"1968/09/01",func:Js},formatDateShort:{label:"01/09/1968",func:Ys}},qe=t=>t.includes("DATE")||t==="TIMESTAMP",Zs=t=>t==="BLOB",Xs=t=>t.includes("CHAR")||t.includes("TEXT")||t==="CLOB"||t.includes("VARCHAR"),ea=t=>t.includes("INT"),ta=t=>t.includes("REAL")||t.includes("FLOAT")||t.includes("DOUBLE")||t.includes("DECIMAL"),sa=t=>t.includes("NUMERIC"),aa=t=>ea(t)||ta(t)||sa(t),ra=t=>t.includes("BOOL"),Ue=Dt,ze=Pt,ee=n.forwardRef(({className:t,align:s="start",side:a="bottom",sideOffset:r=4,...o},l)=>e.jsx(pe,{ref:l,align:s,side:a,sideOffset:r,className:d("z-50 w-64 text-balance break-words rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...o}));ee.displayName=pe.displayName;const Ve=n.forwardRef(({className:t,...s},a)=>e.jsx("div",{className:"relative w-full overflow-auto",children:e.jsx("table",{ref:a,className:d("w-full caption-bottom text-sm",t),...s})}));Ve.displayName="Table";const _e=n.forwardRef(({className:t,...s},a)=>e.jsx("thead",{ref:a,className:d("[&_tr]:border-b",t),...s}));_e.displayName="TableHeader";const Ke=n.forwardRef(({className:t,...s},a)=>e.jsx("tbody",{ref:a,className:d("[&_tr:last-child]:border-0",t),...s}));Ke.displayName="TableBody";const oa=n.forwardRef(({className:t,...s},a)=>e.jsx("tfoot",{ref:a,className:d("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",t),...s}));oa.displayName="TableFooter";const G=n.forwardRef(({className:t,...s},a)=>e.jsx("tr",{ref:a,className:d("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",t),...s}));G.displayName="TableRow";const Ge=n.forwardRef(({className:t,...s},a)=>e.jsx("th",{ref:a,className:d("h-12 min-w-[150px] px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",t),...s}));Ge.displayName="TableHead";const na=t=>{const s=new Uint8Array(t.match(/.{1,2}/g).map(r=>parseInt(r,16))),a=new Blob([s],{type:"image/jpeg"});return URL.createObjectURL(a)},We=n.forwardRef(({className:t,children:s,dataType:a,...r},o)=>{const l=(a==null?void 0:a.toUpperCase())==="BLOB",i=n.useMemo(()=>typeof s=="string"&&s.length>40?s.slice(0,40)+"...":s,[s]);return e.jsx("td",{ref:o,className:d("max-w-[200px] overflow-hidden truncate text-ellipsis whitespace-nowrap p-4 align-middle [&:has([role=checkbox])]:pr-0",t),...r,children:e.jsxs(Ue,{children:[e.jsx(ze,{asChild:!0,children:e.jsx("span",{className:"cursor-pointer hover:underline",children:l?e.jsx("span",{className:"italic opacity-40",children:"BLOB"}):i})}),e.jsx(ee,{side:"bottom",align:"start",children:e.jsxs("div",{className:"flex flex-col justify-center gap-1",children:[l&&typeof s=="string"?e.jsxs(e.Fragment,{children:[e.jsx("img",{src:na(s),alt:"BLOB content",className:"flex max-h-40 flex-col items-center justify-center gap-2 rounded object-contain",onError:c=>{c.currentTarget.style.display="none"}}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:["Blob length: ",s.length]})]}):e.jsx("span",{className:"max-w-full break-words",children:s}),e.jsx(X,{className:"w-full self-start text-xs font-semibold",children:a||"Unknown"})]})})]})})});We.displayName="TableCell";const la=n.forwardRef(({className:t,...s},a)=>e.jsx("caption",{ref:a,className:d("mt-4 text-sm text-muted-foreground",t),...s}));la.displayName="TableCaption";const ia=A.memo(({columnSchema:t})=>{const{type:s,isPrimaryKey:a,isForeignKey:r}=t;if(a)return e.jsx(Jt,{className:"h-4 w-4 text-yellow-500"});if(r)return e.jsx(Zt,{className:"h-4 w-4 text-purple-500"});if(s){if(Zs(s))return e.jsx(Xt,{className:"h-4 w-4 text-green-500"});if(qe(s))return e.jsx(Ae,{className:"h-4 w-4 text-blue-500"});if(Xs(s))return e.jsx(es,{className:"h-4 w-4 text-indigo-500"});if(aa(s))return e.jsx(ts,{className:"h-4 w-4 text-red-500"});if(ra(s))return e.jsx(ss,{className:"h-4 w-4 text-pink-500"})}return e.jsx(as,{className:"h-4 w-4 text-gray-500"})});function ca({col:t}){const{appendToFilters:s,selectedTable:a}=C(),[r,o]=n.useState(""),l=i=>{o(i.target.value),s(t,i.target.value)};return n.useEffect(()=>{o("")},[a]),e.jsx(B,{value:r,onChange:l,className:"mt-[2px] max-h-7 w-full text-xs",placeholder:"Filter"})}const da=A.memo(({col:t,columnSchema:s})=>e.jsxs(Ge,{className:"bg-gray-100 py-2 dark:bg-gray-700",children:[e.jsxs(Ue,{children:[e.jsx(ze,{asChild:!0,children:e.jsxs("div",{className:"flex cursor-pointer items-center space-x-1",children:[e.jsx("span",{children:t}),s&&e.jsx(ia,{columnSchema:s})]})}),e.jsxs(ee,{className:"w-64",children:[e.jsxs("div",{className:"mb-1 flex items-center space-x-1",children:[e.jsx("p",{className:"text-sm font-medium",children:t}),(s==null?void 0:s.isPrimaryKey)&&e.jsx("p",{className:"text-sm font-semibold text-yellow-600",children:"(Primary)"}),(s==null?void 0:s.isForeignKey)&&e.jsx("p",{className:"text-sm font-semibold text-purple-600",children:"(Foreign)"})]}),e.jsx(X,{className:"w-full self-start text-xs font-semibold",children:(s==null?void 0:s.type)||"Unknown"})]})]}),e.jsx(ca,{col:t})]})),ma=A.memo(({value:t,dataType:s})=>{const{dateFormatValue:a}=C(),r=()=>t?s&&qe(s)&&K[a]?K[a].func(t):t:e.jsx("span",{className:"italic text-gray-400",children:"NULL"});return e.jsx(We,{dataType:s,className:"px-5 py-3 text-sm",children:r()})});function ua({data:t,columns:s,tableName:a,tableSchemas:r}){const o=n.useMemo(()=>e.jsx(_e,{children:e.jsx(G,{children:s.map((i,c)=>e.jsx(da,{col:i,columnSchema:r[a][i]},c))})}),[s,r,a]),l=n.useMemo(()=>e.jsx(Ke,{children:t.map((i,c)=>e.jsx(G,{children:s.map((m,u)=>{var x;return e.jsx(ma,{value:i[m],dataType:(x=r[a][m])==null?void 0:x.type},u)})},c))}),[t,s,r,a]);return e.jsxs("div",{className:"overflow-x-auto",children:[e.jsxs(Ve,{children:[o,t.length>0&&l]}),t.length===0&&e.jsxs("div",{className:"w-full p-4 text-center font-medium",children:["No data available for ",a]})]})}function $({type:t,children:s,className:a=""}){const r="flex items-center p-4 rounded-lg shadow-md";let o,l;switch(t){case"error":o=e.jsx(ls,{className:"mr-3 h-6 w-6 text-red-500"}),l="bg-red-100 text-red-800 border-l-4 border-red-500";break;case"loading":o=e.jsx(ns,{className:"mr-3 h-6 w-6 animate-spin text-blue-500"}),l="bg-blue-100 text-blue-800 border-l-4 border-blue-500";break;case"success":o=e.jsx(os,{className:"mr-3 h-6 w-6 text-green-500"}),l="bg-green-100 text-green-800 border-l-4 border-green-500";break;case"info":o=e.jsx(rs,{className:"mr-3 h-6 w-6 text-yellow-500"}),l="bg-yellow-100 text-yellow-800 border-l-4 border-yellow-500";break;default:o=null,l=""}return e.jsxs("div",{className:`${r} ${l} ${a}`,children:[o,e.jsx("span",{className:"font-medium",children:s})]})}const fa=Ot,xa=It,Ye=n.forwardRef(({className:t,align:s="center",sideOffset:a=4,...r},o)=>e.jsx(At,{children:e.jsx(he,{ref:o,align:s,sideOffset:a,className:d("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",t),...r})}));Ye.displayName=he.displayName;function pa(){const{selectedTable:t,tables:s,customQuery:a,db:r}=C(),o=n.useCallback((i,c,m,u)=>e.jsx(N,{className:u,onClick:i,title:m,children:e.jsx("span",{className:"ml-2",children:c})}),[]),l=n.useMemo(()=>{var i;return r&&e.jsxs("div",{className:"flex flex-col gap-1",children:[o(()=>As(r),"Export as SQLite","Download database as SQLite"),o(()=>Is(r,parseInt(t)),`Export ${((i=s[parseInt(t)])==null?void 0:i.name)||"selected"} table as CSV`,"Export selected table as CSV"),o(()=>$s(r),"Export all tables as CSV","Export all tables as CSV"),o(()=>Ms(r,a),"Export custom query as CSV","Export the result of the custom query as CSV")]})},[r,o,t,s,a]);return e.jsxs(fa,{children:[e.jsx(xa,{asChild:!0,children:e.jsx(N,{title:"Open export options",children:e.jsx(is,{className:"h-5 w-5"})})}),e.jsx(Ye,{align:"end",className:"w-80",children:l})]})}function ha(){const{tables:t,selectedTable:s,tableSchemas:a,queryError:r,setQueryError:o,rowPerPageOrAuto:l,isCustomQuery:i,setIsCustomQuery:c,customQuery:m,setCustomQuery:u,expandPage:x,setExpandPage:y,filters:h,setFilters:f}=C(),{page:p,setPage:w,rowsPerPage:L}=Qs(l),b=n.useMemo(()=>{var D;return(D=t[parseInt(s)])==null?void 0:D.name},[t,s]),{data:R,columns:v,isQueryLoading:S,handleCustomQuery:g}=Hs(b,L,p,i),[E,F]=n.useState([]);n.useEffect(()=>{v.length>0&&F(v)},[b,v]);const T=n.useCallback(()=>{o(null),u(""),c(!1)},[c,o,u]),k=n.useCallback(()=>{w(0),T()},[T,w]);n.useEffect(()=>{w(0),f({})},[s]),n.useEffect(()=>{w(0)},[h]);const O=n.useMemo(()=>e.jsxs("div",{className:"flex flex-col gap-2 md:flex-row",children:[e.jsxs("div",{className:"relative flex-grow",children:[e.jsx(B,{type:"text",value:m,onChange:D=>u(D.target.value),placeholder:"Enter your custom query",className:"w-full rounded-lg pr-10 shadow-sm"}),e.jsx(cs,{className:"absolute right-3 top-1/2 h-5 w-5 -translate-y-1/2 transform text-gray-400"})]}),e.jsxs("div",{className:"flex gap-1",children:[e.jsx(N,{className:"grow",onClick:g,title:"Run custom query",children:e.jsx(ds,{className:"h-5 w-5"})}),e.jsx(N,{className:"grow",onClick:T,title:"Remove query",children:e.jsx(ms,{className:"h-5 w-5"})}),e.jsx(N,{className:"grow",onClick:k,title:"Reset to first page",disabled:p===0,children:e.jsx(us,{className:"h-5 w-5"})})]})]}),[m,g,T,k,p]),se=n.useMemo(()=>S?e.jsxs($,{type:"loading",children:["Loading ",b]}):e.jsx("div",{className:`${l==="auto"?"":"mb-[40px]"} overflow-hidden rounded-lg border-2 border-gray-200 dark:border dark:border-gray-700`,children:e.jsx(ua,{data:R,columns:E.length>0?E:v,tableName:b,tableSchemas:a})}),[S,R,v,b,a,h,E]);return e.jsxs("div",{className:"flex flex-col gap-4 pb-8",children:[e.jsxs("section",{className:"rounded-lg bg-white p-4 shadow-md dark:bg-gray-700",children:[e.jsxs("div",{className:"mb-[7px] flex items-center justify-between gap-2",children:[e.jsx(Ks,{}),e.jsxs("div",{className:"flex items-center justify-center gap-1",children:[e.jsx(pa,{}),e.jsx(N,{className:"hidden expand:block",onClick:()=>y(!x),title:"Toggle page size",children:x?e.jsx(fs,{className:"h-5 w-5"}):e.jsx(xs,{className:"h-5 w-5"})})]})]}),O,r&&e.jsx("p",{className:"mt-2 text-center text-sm text-red-500 dark:text-red-400",children:r})]}),se,!i&&e.jsx(Bs,{page:p,setPage:w,rowsPerPage:L})]})}const Je=(t,s)=>localStorage.getItem(t)||s,Ze=(t,s)=>localStorage.setItem(t,s),ae=(t,s)=>{const[a,r]=n.useState(()=>Je(t,s));return n.useEffect(()=>{Ze(t,a)},[t,a]),[a,r]},ga=Ht,ba=Qt,ya=Mt,Xe=n.forwardRef(({className:t,...s},a)=>e.jsx(ge,{className:d("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));Xe.displayName=ge.displayName;const ja=Q("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),et=n.forwardRef(({side:t="right",className:s,children:a,...r},o)=>e.jsxs(ya,{children:[e.jsx(Xe,{}),e.jsxs(be,{ref:o,className:d(ja({side:t}),s),...r,children:[a,e.jsxs($t,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(ps,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));et.displayName=be.displayName;const wa=n.forwardRef(({className:t,...s},a)=>e.jsx(ye,{ref:a,className:d("text-lg font-semibold text-foreground",t),...s}));wa.displayName=ye.displayName;const Na=n.forwardRef(({className:t,...s},a)=>e.jsx(je,{ref:a,className:d("text-sm text-muted-foreground",t),...s}));Na.displayName=je.displayName;const tt=n.forwardRef(({className:t,children:s,...a},r)=>e.jsxs(we,{ref:r,className:d("relative overflow-hidden",t),...a,children:[e.jsx(Bt,{className:"h-full w-full rounded-[inherit]",children:s}),e.jsx(st,{}),e.jsx(qt,{})]}));tt.displayName=we.displayName;const st=n.forwardRef(({className:t,orientation:s="vertical",...a},r)=>e.jsx(Ne,{ref:r,orientation:s,className:d("flex touch-none select-none transition-colors",s==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",s==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",t),...a,children:e.jsx(Ut,{className:"relative flex-1 rounded-full bg-border"})}));st.displayName=Ne.displayName;const at=n.forwardRef(({className:t,orientation:s="horizontal",decorative:a=!0,...r},o)=>e.jsx(ve,{ref:o,decorative:a,orientation:s,className:d("shrink-0 bg-border",s==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",t),...r}));at.displayName=ve.displayName;const va=Q("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),rt=n.forwardRef(({className:t,...s},a)=>e.jsx(Ce,{ref:a,className:d(va(),t),...s}));rt.displayName=Ce.displayName;const te=n.forwardRef(({className:t,...s},a)=>e.jsx(Re,{className:d("grid gap-2",t),...s,ref:a}));te.displayName=Re.displayName;const ot=n.forwardRef(({className:t,...s},a)=>e.jsx(Se,{ref:a,className:d("aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50",t),...s,children:e.jsx(zt,{className:"flex items-center justify-center",children:e.jsx(hs,{className:"h-2.5 w-2.5 fill-current text-current"})})}));ot.displayName=Se.displayName;function Ca({rowsPerPage:t,onRowsPerPageChange:s}){const a=t==="auto";return e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gs,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Rows Per Page"})]}),e.jsxs("div",{className:"flex flex-col items-center justify-center gap-1 rounded border p-2",children:[e.jsx(B,{id:"rowsPerPage",value:a?"":t,onChange:r=>s(r.target.value),placeholder:"Number of rows",type:"number",className:"w-full"}),e.jsx(N,{variant:a?"secondary":"outline",onClick:()=>s("auto"),className:"w-full whitespace-nowrap",children:"Auto Calculate"})]})]})}function Ra({dateFormatValue:t,onDateFormatChange:s}){return e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ae,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Date Format"})]}),e.jsx("div",{className:"rounded border p-2",children:e.jsxs(te,{className:"flex flex-col gap-2",name:"dateType",value:t,onValueChange:s,children:[e.jsx(H,{value:"default",label:"Default"}),Object.entries(K).map(([a,{label:r}])=>e.jsx(H,{value:a,label:r},a))]})})]})}function Sa({themeColor:t,onThemeChange:s,themeColors:a}){return e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(bs,{className:"h-4 w-4"}),e.jsx("p",{className:"text-sm font-medium",children:"Theme Color"})]}),e.jsxs(te,{className:"flex flex-col gap-2 rounded border p-2",name:"themeColor",value:t,onValueChange:s,children:[e.jsx(H,{value:"default",label:"Default"}),a.map(r=>e.jsx(H,{value:r,label:r[0].toUpperCase()+r.slice(1)},r))]})]})}function Ea({queryHistory:t}){return e.jsxs("div",{className:"flex grow flex-col gap-1",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(ys,{className:"h-4 w-4"}),e.jsxs("p",{className:"text-sm font-medium",children:["Query History (",t.length,")"]})]}),e.jsx(tt,{className:"h-[155px] rounded-md border font-medium",children:e.jsx("div",{className:"p-4",children:t.map((s,a)=>e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-normal",children:s}),e.jsx(at,{className:"my-2"})]},a))})})]})}function H({value:t,label:s}){return e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ot,{value:t,id:`r-${t}`}),e.jsx(rt,{htmlFor:`r-${t}`,children:s})]})}const Ta="rowsPerPage",re="dateFormat",ka="theme-color",oe=["slate","blue","nord","old"];function La(){const{setRowPerPageOrAuto:t,setIsCustomQuery:s,queryHestory:a,dateFormatValue:r,setDateFormatValue:o}=C(),[l,i]=ae(Ta,"auto"),[c,m]=ae(ka,"default"),u=l==="auto";n.useEffect(()=>{t(u?"auto":Number(l))},[l,t]),n.useEffect(()=>{o(Je(re,"default"))},[o]),n.useEffect(()=>{oe.forEach(f=>{var p;return(p=document.body)==null?void 0:p.classList.toggle(f,f===c)})},[c]);const x=n.useCallback(f=>{s(!1),f==="auto"||Number(f)>0?i(f):M.error("Please provide a positive number of rows per page or set it to auto.")},[s,i]),y=n.useCallback(f=>{o(f),Ze(re,f)},[o]),h=n.useCallback(f=>{m(f)},[m]);return e.jsxs(ga,{children:[e.jsx(ba,{asChild:!0,children:e.jsx(N,{className:"grow",title:"Open settings drawer",children:e.jsx(Oe,{className:"h-5 w-5"})})}),e.jsx(et,{className:"sm:max-w-[425px]",children:e.jsxs("div",{className:"mt-6 space-y-6",children:[e.jsx(Ca,{rowsPerPage:l,onRowsPerPageChange:x}),e.jsx(Ra,{dateFormatValue:r,onDateFormatChange:y}),e.jsx(Sa,{themeColor:c,onThemeChange:h,themeColors:oe}),e.jsx(Ea,{queryHistory:a})]})})]})}const V="theme-mode",ne="animate-circular-reveal";function nt(){const[t,s]=n.useState(()=>{const o=localStorage.getItem(V),l=window.matchMedia("(prefers-color-scheme: dark)").matches;return o||(l?"dark":"light")}),a=n.useCallback(o=>{s(o),document.body.classList.remove("light","dark"),document.body.classList.add(o),localStorage.setItem(V,o),document.body.classList.add(ne),setTimeout(()=>{document.body.classList.remove(ne)},500)},[]);n.useEffect(()=>{const o=i=>{localStorage.getItem(V)||a(i.matches?"dark":"light")},l=window.matchMedia("(prefers-color-scheme: dark)");return l.addEventListener("change",o),a(t),()=>{l.removeEventListener("change",o)}},[a,t]);const r=n.useCallback(()=>{a(t==="light"?"dark":"light")},[t,a]);return e.jsx(N,{className:"relative grow",onClick:r,title:t==="dark"?"Enable light mode":"Enable dark mode",children:t==="dark"?e.jsx(js,{className:"h-5 w-5"}):e.jsx(ws,{className:"h-5 w-5"})})}const Fa={"application/vnd.sqlite3":[".sqlite",".sqlite3"],"application/x-sqlite3":[".sqlite",".sqlite3"],"application/octet-stream":[".db"],"application/sql":[".sql"]};function Da(){const{loadDatabase:t,setTables:s,setSelectedTable:a,db:r}=C(),[o,l]=n.useState([]),i=n.useCallback(async(h,f)=>{if(l([]),s([]),a("0"),f.length>0){const p=f.flatMap(w=>w.errors);l(p);return}if(h.length>0)try{await t(h[0])}catch(p){return console.error("Failed to load database:",p),p instanceof Error?M(p.message,{position:"bottom-right"}):M("Failed to load database",{position:"bottom-right"})}},[t,s,a]),{getRootProps:c,getInputProps:m,isDragActive:u}=ks({onDrop:i,multiple:!1,accept:Fa}),x=n.useCallback(h=>e.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[e.jsxs("div",{...c(),className:`flex w-full grow transform cursor-pointer flex-col items-center justify-center rounded-lg border-2 border-dashed p-6 transition-colors duration-300 ease-in-out hover:bg-secondary ${u?"border-blue-500 bg-blue-50 dark:bg-blue-900/20":"border-primary dark:border-gray-700"} ${h?"py-7":"py-12"}`,children:[e.jsx("input",{id:"file-upload",...m()}),e.jsx("label",{htmlFor:"file-upload",className:"sr-only",children:"Upload SQLite File"}),e.jsxs("div",{className:"text-center text-sm md:text-base",children:[e.jsx("span",{className:"hidden sm:block lg:text-lg",children:"Drag and drop file here, or click to select one"}),e.jsx("div",{className:"block sm:hidden",children:h?e.jsx("span",{className:"font-medium",children:"Click to select a file"}):e.jsx("span",{className:"font-medium",children:"Click to select a SQLite file"})})]})]}),h&&e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsx(nt,{}),e.jsx(La,{})]})]}),[c,m,u,r]),y=n.useMemo(()=>x(!!r),[x,r]);return e.jsxs("section",{className:"mx-auto w-full",children:[y,e.jsx(Pa,{errors:o})]})}const Pa=A.memo(({errors:t})=>(A.useEffect(()=>{t==null||t.forEach(s=>M(s.message,{position:"bottom-right"}))},[t]),null));function Aa(){return e.jsx("header",{className:"rounded bg-gradient-to-r shadow-md dark:from-gray-800 dark:to-indigo-900",children:e.jsx("div",{className:"mx-auto max-w-4xl px-4 py-8 sm:py-12",children:e.jsxs("div",{className:"flex flex-col items-center text-center",children:[e.jsx("h1",{className:"mb-2 text-2xl font-bold sm:text-3xl",children:"SQLite Viewer"}),e.jsx("p",{className:"max-w-md text-sm sm:text-base",children:"Explore and analyze your SQLite databases directly in your browser"})]})})})}const Oa=_t,Ia=Vt,lt=n.forwardRef(({className:t,...s},a)=>e.jsx(Ee,{className:d("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",t),...s,ref:a}));lt.displayName=Ee.displayName;const it=n.forwardRef(({className:t,...s},a)=>e.jsxs(Ia,{children:[e.jsx(lt,{}),e.jsx(Te,{ref:a,className:d("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",t),...s})]}));it.displayName=Te.displayName;const ct=({className:t,...s})=>e.jsx("div",{className:d("flex flex-col space-y-2 text-left",t),...s});ct.displayName="AlertDialogHeader";const dt=({className:t,...s})=>e.jsx("div",{className:d("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",t),...s});dt.displayName="AlertDialogFooter";const mt=n.forwardRef(({className:t,...s},a)=>e.jsx(ke,{ref:a,className:d("text-lg font-semibold",t),...s}));mt.displayName=ke.displayName;const ut=n.forwardRef(({className:t,...s},a)=>e.jsx(Le,{ref:a,className:d("text-sm",t),...s}));ut.displayName=Le.displayName;const ft=n.forwardRef(({className:t,...s},a)=>e.jsx(Fe,{ref:a,className:d(Z(),t),...s}));ft.displayName=Fe.displayName;const xt=n.forwardRef(({className:t,...s},a)=>e.jsx(De,{ref:a,className:d(Z({variant:"outline"}),"mt-2 sm:mt-0",t),...s}));xt.displayName=De.displayName;function $a({showDialog:t,setShowDialog:s,fn:a}){return e.jsx(Oa,{open:t,onOpenChange:s,children:e.jsxs(it,{children:[e.jsxs(ct,{children:[e.jsx(mt,{children:"Retry using a proxy?"}),e.jsx(ut,{children:"Failed to load the database from the provided URL due to possible CORS restrictions."})]}),e.jsx("div",{className:"text-sm font-semibold",children:"Using the proxy may expose your database to corsproxy.io services."}),e.jsxs(dt,{children:[e.jsx(xt,{onClick:()=>s(!1),children:"Cancel"}),e.jsx(ft,{onClick:a,children:"Confirm"})]})]})})}const Ma="https://github.com/vwh/sqlite-viewer";function Ha(){return e.jsx("footer",{className:"fixed bottom-0 left-0 right-0 border-t-2 bg-background shadow-md",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsxs("div",{className:"flex items-center justify-between py-4 md:py-6",children:[e.jsxs("div",{className:"flex flex-col gap-1",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sms hidden sm:block",children:"No file will be uploaded to server. Using JavaScript, sql.js"}),e.jsx("p",{className:"text-sm sm:hidden",children:"No file uploads to server."})]}),e.jsxs("a",{href:Ma,target:"_blank",rel:"noopener noreferrer",className:"flex items-center space-x-2 text-blue-500 transition-colors dark:text-blue-400",title:"Star on GitHub",children:[e.jsx(Ns,{className:"h-5 w-5"}),e.jsx("span",{className:"text-sm font-medium hover:underline",children:"Star us on GitHub"})]})]}),e.jsx("div",{className:"flex items-center space-x-4",children:e.jsx(nt,{})})]})})})}const P=({icon:t,title:s,description:a})=>e.jsxs("div",{className:"flex items-start space-x-3",children:[e.jsx("div",{className:"flex-shrink-0",children:e.jsx(t,{className:"h-6 w-6 text-blue-500"})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium",children:s}),e.jsx("p",{className:"mt-1 text-sm",children:a})]})]});function Qa(){return e.jsxs(e.Fragment,{children:[e.jsx("section",{className:"rounded bg-gradient-to-r py-6 shadow-md dark:from-gray-800 dark:to-indigo-900 md:py-10",children:e.jsx("div",{className:"mx-auto max-w-7xl px-4 sm:px-6 lg:px-8",children:e.jsx("div",{children:e.jsxs("div",{className:"grid grid-cols-1 gap-8 sm:grid-cols-2 lg:grid-cols-3",children:[e.jsx(P,{icon:vs,title:"Browser Based",description:"No installation required. Access and analyze your SQLite databases directly in your web browser."}),e.jsx(P,{icon:Cs,title:"Lightning Fast",description:"Powered by WebAssembly (WASM) for near-native performance, even with large databases."}),e.jsx(P,{icon:Rs,title:"100% Secure",description:"Your data never leaves your device. All processing happens client-side, ensuring complete privacy."}),e.jsx(P,{icon:Oe,title:"Customizable Interface",description:"Different themes and settings. Adjust the look and feel of your interface to suit your preferences and workflow."}),e.jsx(P,{icon:Ss,title:"Offline Capable",description:"Work on your databases without an internet connection. Perfect for sensitive data or remote work."}),e.jsx(P,{icon:Es,title:"PWA Support",description:"Install the app on your desktop or mobile device for a genuine native experience. Enjoy robust offline functionality."})]})})})}),e.jsx("div",{className:"pb-[72px] md:pb-0"})]})}function Ba(){const{db:t,tables:s,isLoading:a,loadDatabase:r,expandPage:o}=C(),[l,i]=n.useState(null),[c,m]=n.useState(!1),[u,x]=n.useState(null),[y,h]=n.useState(!1),f=n.useRef(!1),p=n.useCallback(async(b,R=!1)=>{if(!/^(https?:\/\/(?:www\.)?[a-zA-Z0-9-]{1,256}\.[a-zA-Z]{2,6}(?:\/[^\s]*)?)$/i.test(b)){i("Invalid URL");return}try{h(!0);const S=R?`https://cors.eu.org/${encodeURIComponent(b)}`:b,g=await fetch(S);if(!g.ok)throw new Error("URL not found or invalid");const E=await g.blob(),F=new File([E],"database.sqlite");await r(F),i(null)}catch(S){R?i(`Error whilefetching, ${S instanceof Error?S.message:String(S)}`):(x(b),m(!0))}finally{h(!1)}},[r]);n.useEffect(()=>{if(f.current)return;const R=new URLSearchParams(window.location.search).get("url");R&&(p(decodeURIComponent(R)),f.current=!0)},[p]);const w=n.useCallback(()=>{u&&(p(u,!0),m(!1))},[u,p]),L=()=>a||y?e.jsxs($,{type:"loading",children:[y?"Fetching":"Loading"," SQLite file"]}):l&&!t?e.jsx($,{type:"error",children:l}):t?s.length>0?e.jsx(ha,{}):e.jsx($,{type:"info",children:"Your database is empty, no tables found"}):null;return e.jsxs("main",{id:"main",className:`mx-auto flex h-screen flex-col ${t?"gap-3":"gap-4"} p-4 ${o?"w-full":"container"}`,children:[!t&&e.jsx(Aa,{}),e.jsx(Da,{}),L(),e.jsx($a,{showDialog:c,setShowDialog:m,fn:w}),!t&&e.jsxs(e.Fragment,{children:[e.jsx(Qa,{})," ",e.jsx(Ha,{})]})]})}const qa=({...t})=>e.jsx(Ls,{className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-primary group-[.toaster]:text-background group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...t});bt.createRoot(document.getElementById("root")).render(e.jsxs(A.StrictMode,{children:[e.jsx(Ba,{}),e.jsx(qa,{})]}));
