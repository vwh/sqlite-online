var ut=Object.defineProperty;var ft=(t,e,s)=>e in t?ut(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var xe=(t,e,s)=>ft(t,typeof e!="symbol"?e+"":e,s);import{c as T,j as l,r as N,R as He}from"./react-B2RL9x2s.js";import{c as ht}from"./react-dom-BizTJEze.js";import{T as pt,t as Pe}from"./sonner-CRkCOcXB.js";import{S as xt,R as bt,T as gt,C as yt,L as jt,P as wt,a as Nt,I as vt,V as St,b as Ct,c as Et,d as Tt,e as _t,f as It,g as Lt,h as kt,i as $t,j as Rt,k as At,l as Dt,m as zt,n as Ot,o as Pt,p as Mt,q as Ft,r as Bt,D as Ut,s as Kt,t as Qt,O as Gt}from"./@radix-ui-Z8o0b7XT.js";import{c as Ht}from"./clsx-B-dksMZM.js";import{t as Vt}from"./tailwind-merge-BJOqOzcM.js";import{c as Wt}from"./class-variance-authority-Dp3B9jqt.js";import{T as qt,R as Yt,I as Xt,C as Jt,a as Zt,S as es,M as ts,b as ss,D as fe,c as as,G as ls,d as rs,e as ns,f as is,H as os,g as cs,h as ds,K as ms,i as us,j as Ce,k as Ve,E as fs,l as hs,m as ps,n as xs,o as bs,p as gs,q as ys,r as js,s as ws,P as ve,t as Me,u as We,A as Ns,v as vs,w as Ss,F as Ae,x as Cs,y as Es,z as ye,L as qe,B as Se,J as Ne,X as Ye,N as Ts,O as _s,Q as Is}from"./lucide-react-CCzNLkjD.js";import{c as De}from"./zustand-B_-DjuRk.js";import{l as Ie}from"./lodash-BkzDGCz7.js";import{P as Ls,a as ks,b as $s}from"./react-resizable-panels-CS3z951J.js";import{R as Rs,d as As}from"./@uiw-CUzFlGTr.js";import{r as Fe,G as Ds,I as zs}from"./@codemirror-Bbikk1gI.js";import{V as Os}from"./react-window-u4mEteSV.js";import{A as Ps}from"./react-virtualized-auto-sizer-Dc1p5HBS.js";import"./scheduler-SPyfQU6S.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-DWlXkXzq.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DpNLLOLX.js";import"./react-style-singleton-D7c23Nxa.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BS8h9NSd.js";import"./use-callback-ref-hrg4jhP2.js";import"./@floating-ui-xbqwxxL4.js";import"./@babel-BTbEZfjA.js";import"./@lezer-E7PapBHi.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./memoize-one-CcMeOnPo.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const n of r)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function s(r){const n={};return r.integrity&&(n.integrity=r.integrity),r.referrerPolicy&&(n.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?n.credentials="include":r.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function a(r){if(r.ep)return;r.ep=!0;const n=s(r);fetch(r.href,n)}})();function Ms(){const t=T.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=l.jsx(pt,{position:"bottom-center",toastOptions:{className:"custom-toast",duration:2e3,style:{fontFamily:"Lexend, sans-serif",borderRadius:"0.5rem",fontSize:"0.875rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid var(--border)",background:"var(--background)",color:"var(--foreground)"}}}),t[0]=e):e=t[0],e}function P(...t){return Vt(Ht(t))}const Fs=Wt("inline-flex cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow,transform] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] focus-visible:scale-105 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive active:scale-95",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),Bs=t=>{const e=T.c(14);let s,a,r,n,i;e[0]!==t?({className:s,variant:i,size:r,asChild:n,...a}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r,e[4]=n,e[5]=i):(s=e[1],a=e[2],r=e[3],n=e[4],i=e[5]);const c=(n===void 0?!1:n)?xt:"button";let u;e[6]!==s||e[7]!==r||e[8]!==i?(u=P(Fs({variant:i,size:r,className:s})),e[6]=s,e[7]=r,e[8]=i,e[9]=u):u=e[9];let d;return e[10]!==c||e[11]!==a||e[12]!==u?(d=l.jsx(c,{"data-slot":"button",className:u,...a}),e[10]=c,e[11]=a,e[12]=u,e[13]=d):d=e[13],d},O=Bs;class Us extends N.Component{constructor(s){super(s);xe(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});xe(this,"handleReload",()=>{window.location.reload()});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(s){return{hasError:!0,error:s,errorInfo:null}}componentDidCatch(s,a){this.setState({error:s,errorInfo:a}),this.props.onError&&this.props.onError(s,a)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:l.jsx("div",{className:"bg-background flex min-h-screen items-center justify-center p-4",children:l.jsxs("div",{className:"w-full max-w-md space-y-6 text-center",children:[l.jsx("div",{className:"bg-destructive/10 mx-auto flex h-16 w-16 items-center justify-center rounded-full",children:l.jsx(qt,{className:"text-destructive h-8 w-8"})}),l.jsxs("div",{className:"space-y-2",children:[l.jsx("h1",{className:"text-foreground text-2xl font-bold",children:"Something went wrong"}),l.jsx("p",{className:"text-muted-foreground",children:"An unexpected error occurred. Please try refreshing the page or contact support if the problem persists."})]}),!1,l.jsxs("div",{className:"flex flex-col gap-2 sm:flex-row sm:justify-center",children:[l.jsxs(O,{onClick:this.handleReset,variant:"outline",children:[l.jsx(Yt,{className:"mr-2 h-4 w-4"}),"Try Again"]}),l.jsx(O,{onClick:this.handleReload,children:"Reload Page"})]})]})}):this.props.children}}const Ks={theme:"system",setTheme:()=>null},Xe=N.createContext(Ks);function Qs(t){const e=T.c(20);let s,a,r,n;e[0]!==t?({children:s,defaultTheme:r,storageKey:n,...a}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r,e[4]=n):(s=e[1],a=e[2],r=e[3],n=e[4]);const i=r===void 0?"system":r,o=n===void 0?"vite-ui-theme":n;let c;e[5]!==i||e[6]!==o?(c=()=>localStorage.getItem(o)||i,e[5]=i,e[6]=o,e[7]=c):c=e[7];const[u,d]=N.useState(c);let m;e[8]!==o?(m=S=>{localStorage.setItem(o,S),d(S)},e[8]=o,e[9]=m):m=e[9];const f=m;let p,x;e[10]!==u?(p=()=>{const S=document.documentElement;if(S.classList.remove("light","dark"),u==="system"){const C=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";S.classList.add(C)}else S.classList.add(u)},x=[u],e[10]=u,e[11]=p,e[12]=x):(p=e[11],x=e[12]),N.useEffect(p,x);let b,g;e[13]!==u||e[14]!==f?(g={theme:u,setTheme:f},e[13]=u,e[14]=f,e[15]=g):g=e[15],b=g;const w=b;let y;return e[16]!==s||e[17]!==a||e[18]!==w?(y=l.jsx(Xe.Provider,{...a,value:w,children:s}),e[16]=s,e[17]=a,e[18]=w,e[19]=y):y=e[19],y}const ne=(t,e,s)=>{const a=T.c(5),r=s===void 0?!1:s;let n,i;a[0]!==e||a[1]!==r||a[2]!==t?(n=()=>{if(!t||typeof t!="string"||!e)return;const o=c=>{if(!c.key)return;const u=t.split("+"),d=u.includes("ctrl");let m;m=c.key,r||(m=m.toLowerCase());const f=c.ctrlKey||!d,p=u.some(x=>x==="ctrl"?!1:r?x===c.key:x.toLowerCase()===m);f&&p&&(c.preventDefault(),c.stopPropagation(),e())};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},i=[t,e,r],a[0]=e,a[1]=r,a[2]=t,a[3]=n,a[4]=i):(n=a[3],i=a[4]),N.useEffect(n,i)};class me{static async getEncryptionKey(){try{const s=localStorage.getItem(this.ENCRYPTION_KEY_NAME);if(s){const a=new Uint8Array(JSON.parse(s));return await crypto.subtle.importKey("raw",a,{name:"AES-GCM"},!1,["encrypt","decrypt"])}}catch(s){console.warn("Failed to retrieve existing encryption key:",s)}const e=await crypto.subtle.generateKey({name:"AES-GCM",length:256},!0,["encrypt","decrypt"]);try{const s=await crypto.subtle.exportKey("raw",e);localStorage.setItem(this.ENCRYPTION_KEY_NAME,JSON.stringify(Array.from(new Uint8Array(s))))}catch(s){console.warn("Failed to store encryption key:",s)}return e}static async encrypt(e){try{const s=await this.getEncryptionKey(),r=new TextEncoder().encode(e),n=crypto.getRandomValues(new Uint8Array(12)),i=await crypto.subtle.encrypt({name:"AES-GCM",iv:n},s,r),o=new Uint8Array(n.length+i.byteLength);return o.set(n),o.set(new Uint8Array(i),n.length),btoa(String.fromCharCode(...o))}catch(s){throw console.error("Encryption failed:",s),new Error("Failed to encrypt data")}}static async decrypt(e){try{const s=await this.getEncryptionKey(),a=new Uint8Array(atob(e).split("").map(c=>c.charCodeAt(0))),r=a.slice(0,12),n=a.slice(12),i=await crypto.subtle.decrypt({name:"AES-GCM",iv:r},s,n);return new TextDecoder().decode(i)}catch(s){throw console.error("Decryption failed:",s),new Error("Failed to decrypt data")}}static async setItem(e,s){const a=this.STORAGE_KEY_PREFIX+e;if(typeof window>"u")throw new Error("Secure storage is only available in browser environment");try{if(window.crypto&&window.crypto.subtle){const r=await this.encrypt(s);localStorage.setItem(a,JSON.stringify({encrypted:!0,data:r}))}else{console.warn("Web Crypto API not available, using base64 encoding");const r=btoa(s);localStorage.setItem(a,JSON.stringify({encrypted:!1,data:r}))}}catch(r){throw console.error("Failed to store secure data:",r),new Error("Failed to store sensitive data")}}static async getItem(e){const s=this.STORAGE_KEY_PREFIX+e;if(typeof window>"u")return null;try{const a=localStorage.getItem(s);if(!a)return null;const r=JSON.parse(a);return r.encrypted?await this.decrypt(r.data):atob(r.data)}catch(a){return console.error("Failed to retrieve secure data:",a),null}}static removeItem(e){const s=this.STORAGE_KEY_PREFIX+e;typeof window<"u"&&localStorage.removeItem(s)}static isSecureStorageAvailable(){return typeof window<"u"&&window.crypto&&window.crypto.subtle!==void 0}}xe(me,"STORAGE_KEY_PREFIX","secure_"),xe(me,"ENCRYPTION_KEY_NAME","app_encryption_key");const v=De(t=>({tablesSchema:{},indexesSchema:[],currentTable:null,data:null,columns:null,maxSize:1,isDatabaseLoading:!1,isDataLoading:!1,errorMessage:null,filters:null,sorters:null,limit:50,offset:0,customQuery:void 0,customQueryObject:null,geminiApiKey:null,isAiLoading:!1,setTablesSchema:e=>t({tablesSchema:e}),setIndexesSchema:e=>t({indexesSchema:e}),setCurrentTable:e=>t({currentTable:e}),setData:e=>t({data:e}),setColumns:e=>t({columns:e}),setMaxSize:e=>t({maxSize:e}),setIsDatabaseLoading:e=>t({isDatabaseLoading:e}),setIsDataLoading:e=>t({isDataLoading:e}),setErrorMessage:e=>t({errorMessage:e}),setFilters:e=>t({filters:e}),setSorters:e=>t({sorters:e}),setLimit:e=>t({limit:e}),setOffset:e=>t({offset:e}),setCustomQuery:e=>t({customQuery:e}),setCustomQueryObject:e=>t({customQueryObject:e}),setGeminiApiKey:async e=>{t({geminiApiKey:e});try{e?await me.setItem("geminiApiKey",e):me.removeItem("geminiApiKey")}catch(s){console.error("Failed to store API key securely:",s),console.warn("Falling back to localStorage for API key storage"),e?localStorage.setItem("geminiApiKey",e):localStorage.removeItem("geminiApiKey")}},setIsAiLoading:e=>t({isAiLoading:e}),resetPagination:()=>t({offset:0}),initializeApiKey:async()=>{try{const e=await me.getItem("geminiApiKey");if(e)t({geminiApiKey:e});else{const s=typeof window<"u"?localStorage.getItem("geminiApiKey"):null;s&&(await me.setItem("geminiApiKey",s),localStorage.removeItem("geminiApiKey"),t({geminiApiKey:s}))}}catch(e){console.error("Failed to initialize API key:",e);const s=typeof window<"u"?localStorage.getItem("geminiApiKey"):null;t({geminiApiKey:s})}}})),re=De(t=>{const e=Ie.debounce(a=>t({schemaPanelSize:a}),200),s=Ie.debounce(a=>t({dataPanelSize:a}),200);return{schemaPanelSize:25,dataPanelSize:75,editValues:[],isInserting:!1,setSchemaPanelSize:e,setDataPanelSize:s,setEditValues:a=>t({editValues:a}),setIsInserting:a=>t({isInserting:a})}}),Je=N.createContext(void 0),he=()=>{const t=N.useContext(Je);if(t===void 0)throw new Error("usePanelManager must be used within a PanelProvider");return t},Be={success:"#22c55e",error:"#ef4444",info:"#3b82f6"};function G(t,e="info",s={}){if(typeof t=="string"){const a={success:l.jsx(Zt,{className:"h-5 w-5 text-green-500"}),error:l.jsx(Jt,{className:"h-5 w-5 text-red-500"}),info:l.jsx(Xt,{className:"h-5 w-5 text-blue-500"})};setTimeout(()=>{Pe(l.jsxs("div",{className:"flex items-center gap-2",children:[a[e],l.jsx("div",{className:"flex-1 capitalize",children:t})]}),{style:{borderLeft:`4px solid ${Be[e]}`,background:"var(--background)"},...s})},0)}else setTimeout(()=>{Pe(t,{style:{borderLeft:`4px solid ${Be[e]}`,background:"var(--background)"},...s})},0)}const Ze=N.createContext(void 0),Ue=33,Gs=({children:t})=>{const e=N.useRef(null),s=v(h=>h.setTablesSchema),a=v(h=>h.setIndexesSchema),r=v(h=>h.setCurrentTable),n=v(h=>h.setData),i=v(h=>h.setCustomQuery),o=v(h=>h.setColumns),c=v(h=>h.setMaxSize),u=v(h=>h.setIsDatabaseLoading),d=v(h=>h.setIsDataLoading),m=v(h=>h.setErrorMessage),f=v(h=>h.filters),p=v(h=>h.sorters),x=v(h=>h.limit),b=v(h=>h.offset),g=v(h=>h.currentTable),w=v(h=>h.maxSize),y=v(h=>h.setOffset),S=v(h=>h.setFilters),C=v(h=>h.setSorters),_=v(h=>h.setLimit),k=v(h=>h.resetPagination),I=v(h=>h.setCustomQueryObject),j=v(h=>h.customQuery),E=v(h=>h.tablesSchema),{selectedRowObject:L,setSelectedRowObject:R,setIsInserting:$,handleCloseEdit:z}=he(),[F,M]=N.useState(!0);N.useEffect(()=>{try{e.current=new Worker(new URL("/sqlite-online/assets/sqliteWorker-DTRdGYwu.js",import.meta.url),{type:"module"}),e.current.onerror=h=>{console.error("Main: Worker error:",h),m("Worker failed to initialize"),u(!1)},e.current.onmessageerror=h=>{console.error("Main: Worker message error:",h)}}catch(h){console.error("Main: Failed to create worker:",h),m("Failed to create worker"),u(!1);return}return e.current.onmessage=h=>{var J,te,pe;const A=h.data,{action:D}=A;if(D==="initComplete"){window.parent.postMessage({type:"loadDatabaseBufferReady"},"*");const{payload:U}=A;if(!U.currentTable){console.error("Main: No current table found in payload"),m("No tables found in database"),u(!1);return}s(U.tableSchema),a(U.indexSchema),r(U.currentTable),o(U.tableSchema[U.currentTable].schema.map(se=>se.name)),S(null),C(null),R(null),$(!1),I(null),i(""),y(0),u(!1)}else if(D==="queryComplete"){const{payload:U}=A;c(U.maxSize);const se=U.results;if(!se)n(null);else{const oe=((J=se[0])==null?void 0:J.values)||[];oe.length!==0?n(oe):n(null)}d(!1)}else if(D==="customQueryComplete"){const{payload:U}=A,se=U.results;if(!se)n(null);else{const oe=((te=se[0])==null?void 0:te.values)||[];oe.length!==0?I({data:oe,columns:((pe=se[0])==null?void 0:pe.columns)||[]}):I(null)}d(!1),m(null)}else if(D==="updateInstance"){const{payload:U}=A;s(U.tableSchema),a(U.indexSchema),d(!1),m(null),G("Database schema updated successfully","success")}else if(D==="updateComplete"){const{payload:U}=A;m(null),z(),G(`Row ${U.type} successfully`,"success")}else if(D==="insertComplete")m(null),z(),G("Row inserted successfully","success");else if(D==="downloadComplete"){const{payload:U}=A,se=new Blob([U.bytes],{type:"application/octet-stream"}),oe=URL.createObjectURL(se),ce=document.createElement("a");ce.href=oe,ce.download="database.sqlite",ce.click(),G("Database downloaded successfully","success")}else if(D==="exportComplete"){const{payload:U}=A,se=new Blob([U.results],{type:"text/csv"}),oe=URL.createObjectURL(se),ce=document.createElement("a");ce.href=oe,ce.download="export.csv",ce.click(),G("Database exported successfully","success")}else if(D==="queryError"){const{payload:U}=A;console.error("Worker error:",U.error),d(!1),U.error.isCustomQueryError&&m(U.error.message),G(U.error.message,"error")}else console.warn("Unknown action:",D)},u(!0),e.current.postMessage({action:"init"}),()=>{e.current&&e.current.terminate()}},[o,y,u,s,r,a,I,n,c,d,m,S,C,R,z,$,i]),N.useEffect(()=>{if(!g)return;const h=setTimeout(()=>{var pe,U,se;if(!e.current){G("Worker is not initialized","error");return}d(!0);let A=50;const D=(pe=document.getElementById("tableHeader"))==null?void 0:pe.getBoundingClientRect().height,J=(U=document.getElementById("dataSection"))==null?void 0:U.getBoundingClientRect().height,te=(se=document.getElementById("paginationControls"))==null?void 0:se.getBoundingClientRect().height;F?(M(!1),J&&te&&(A=Math.floor((J-te-47.5)/Ue))):D&&J&&te&&(A=Math.floor((J-D-te)/Ue)),_(A),e.current.postMessage({action:"getTableData",payload:{currentTable:g,filters:f,sorters:p,limit:A,offset:b}})},100);return()=>clearTimeout(h)},[g,f,p,F,b,_,d]);const K=N.useCallback(async h=>{var A;(A=e.current)==null||A.postMessage({action:"openFile",payload:{file:h}})},[]);N.useEffect(()=>{window.loadDatabaseBuffer=K;const h=async A=>{var D,J;if(A.data.type==="invokeLoadDatabaseBuffer")try{const te=A.data.buffer;await K(te),(D=A.source)==null||D.postMessage({type:"loadDatabaseBufferSuccess"},A.origin)}catch(te){(J=A.source)==null||J.postMessage({type:"loadDatabaseBufferError",error:te==null?void 0:te.message},A.origin)}};return window.addEventListener("message",h),()=>{window.removeEventListener("message",h)}},[K]);const q=N.useCallback(h=>{G("Opening database","info");const A=new FileReader;A.onload=D=>{var te;const J=(te=D.target)==null?void 0:te.result;if(!e.current){G("Worker is not initialized","error");return}e.current.postMessage({action:"openFile",payload:{file:J}})},A.readAsArrayBuffer(h)},[]),H=N.useCallback(h=>{var D;const A=(D=h.target.files)==null?void 0:D[0];if(!A){G("No file selected","error");return}q(A)},[q]),ee=N.useCallback(()=>{if(!e.current){G("Worker is not initialized","error");return}e.current.postMessage({action:"download"})},[]),Z=N.useCallback(h=>{S(null),C(null),k(),c(0),R(null),$(!1),r(h),o(E[h].schema.map(A=>A.name))},[S,C,k,c,r,R,$,E,o]),Y=N.useCallback((h,A)=>{const J={...v.getState().filters||{},[h]:A};S(J),k()},[S,k]),X=N.useCallback(h=>{const J=((v.getState().sorters||{})[h]||"asc")==="asc"?"desc":"asc",te={[h]:J};C(te)},[C]),Q=N.useCallback(h=>{const A=v.getState().offset;if(w){if(typeof h=="number")y(h);else if(h==="next"){const D=A+x;D>=w?w-x<0&&y(0):y(D)}else if(h==="prev"){const D=A-x;D<0?y(0):y(D)}else h==="first"?y(0):h==="last"&&(w-x<0?y(0):y(w-x));R(null)}},[w,x,y,R]),V=N.useCallback(h=>{if(!e.current){G("Worker is not initialized","error");return}e.current.postMessage({action:"export",payload:{table:g,offset:b,limit:x,filters:f,sorters:p,customQuery:j,exportType:h}})},[g,f,p,b,x,j]),B=N.useCallback(()=>{if(!e.current){G("Worker is not initialized","error");return}const h=j;if(!h)return;const D=h.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").split(";").map(J=>J.trim()).filter(J=>J!=="");D.length!==0&&(d(!0),D.length===1?e.current.postMessage({action:"exec",payload:{query:D[0],currentTable:g,filters:f,sorters:p,limit:x,offset:b}}):e.current.postMessage({action:"execBatch",payload:{queries:D,currentTable:g,filters:f,sorters:p,limit:x,offset:b}}))},[g,f,p,x,b,d,j]),W=N.useCallback(h=>{if(!e.current){G("Worker is not initialized","error");return}if(!(L!=null&&L.primaryValue)&&h!=="insert"){G(h==="delete"?"No row selected to delete":`No values provided to ${h}`,"error");return}d(!0),e.current.postMessage({action:h,payload:{table:g,columns:v.getState().columns,values:re.getState().editValues,primaryValue:L==null?void 0:L.primaryValue}}),e.current.postMessage({action:"refresh",payload:{currentTable:g,offset:b,limit:x,filters:f,sorters:p}})},[g,f,p,b,x,d,L]);ne("ctrl+s",()=>ee()),ne("ctrl+I",()=>W("insert"),!0),ne("ctrl+u",()=>W("update")),ne("ctrl+d",()=>W("delete")),ne("ctrl+q",()=>B()),ne("ctrl+ArrowRight",()=>Q("next")),ne("ctrl+ArrowUp",()=>Q("first")),ne("ctrl+ArrowDown",()=>Q("last")),ne("ctrl+ArrowLeft",()=>Q("prev"));const le=N.useMemo(()=>({workerRef:e,handleFileUpload:q,handleFileChange:H,handleDownload:ee,handleTableChange:Z,handleQueryFilter:Y,handleQuerySorter:X,handlePageChange:Q,handleExport:V,handleQueryExecute:B,handleEditSubmit:W}),[e,q,H,ee,Z,Y,X,Q,V,B,W]);return l.jsx(Ze.Provider,{value:le,children:t})},Hs=t=>{const e=T.c(10),{children:s}=t,[a,r]=N.useState(null),[n,i]=N.useState(!1),o=a!==null||n;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=(y,S,C)=>{i(!1),r({data:y,index:S,primaryValue:C})},e[0]=c):c=e[0];const u=c;let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{r(null),i(!0)},e[1]=d):d=e[1];const m=d;let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{i(!1),r(null)},e[2]=f):f=e[2];const p=f;ne("ctrl+i",m,!0),ne("ctrl+`",p,!0);let x,b;e[3]!==o||e[4]!==n||e[5]!==a?(b={handleRowClick:u,handleInsert:m,handleCloseEdit:p,isEditing:o,selectedRowObject:a,isInserting:n,setIsInserting:i,setSelectedRowObject:r},e[3]=o,e[4]=n,e[5]=a,e[6]=b):b=e[6],x=b;const g=x;let w;return e[7]!==s||e[8]!==g?(w=l.jsx(Je.Provider,{value:g,children:s}),e[7]=s,e[8]=g,e[9]=w):w=e[9],w},Vs=N.memo(function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("flex flex-col",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx(bt,{"data-slot":"tabs",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i});function Ws(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center p-1",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx(jt,{"data-slot":"tabs-list",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}const Ee=He.memo(function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("inline-flex flex-1 cursor-pointer items-center justify-center gap-1.5 rounded-md! px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow]","data-[state=active]:bg-white data-[state=active]:text-black","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring focus-visible:ring-[3px] focus-visible:outline-1","disabled:pointer-events-none disabled:opacity-50","[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx(gt,{"data-slot":"tabs-trigger",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i}),Te=He.memo(function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("flex-1 outline-none",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx(yt,{"data-slot":"tabs-content",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i}),ie=()=>{const t=N.useContext(Ze);if(t===void 0)throw new Error("useDatabaseWorker must be used within a DatabaseWorkerProvider");return t},qs=t=>{const e=T.c(10);let s,a,r;e[0]!==t?({className:s,type:r,...a}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r):(s=e[1],a=e[2],r=e[3]);let n;e[4]!==s?(n=P("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-5 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),e[4]=s,e[5]=n):n=e[5];let i;return e[6]!==a||e[7]!==n||e[8]!==r?(i=l.jsx("input",{type:r,"data-slot":"input",className:n,...a}),e[6]=a,e[7]=n,e[8]=r,e[9]=i):i=e[9],i},je=qs,et=()=>{const t=N.useContext(Xe);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function Ys(){const t=T.c(10),{theme:e,setTheme:s}=et();let a;t[0]!==s||t[1]!==e?(a=()=>s(e==="dark"?"light":"dark"),t[0]=s,t[1]=e,t[2]=a):a=t[2];const r=e==="dark"?"Switch to light mode":"Switch to dark mode",n=e==="dark"?"Switch to light mode":"Switch to dark mode";let i;t[3]!==e?(i=e==="dark"?l.jsx(es,{className:"h-[1.2rem] w-[1.2rem]"}):l.jsx(ts,{className:"h-[1.2rem] w-[1.2rem]"}),t[3]=e,t[4]=i):i=t[4];let o;return t[5]!==a||t[6]!==r||t[7]!==n||t[8]!==i?(o=l.jsx(O,{variant:"outline",size:"sm",onClick:a,"aria-label":r,title:n,className:"border-foreground/25 relative flex items-center justify-center transition-transform duration-300",children:i}),t[5]=a,t[6]=r,t[7]=n,t[8]=i,t[9]=o):o=t[9],o}function Xs(){const t=T.c(10),[e,s]=N.useState(!1);let a,r;t[0]===Symbol.for("react.memo_cache_sentinel")?(a=()=>{const f=localStorage.getItem("high-contrast")==="true";s(f),f&&document.documentElement.classList.add("high-contrast")},r=[],t[0]=a,t[1]=r):(a=t[0],r=t[1]),N.useEffect(a,r);let n;t[2]!==e?(n=()=>{const m=!e;s(m),localStorage.setItem("high-contrast",String(m)),m?document.documentElement.classList.add("high-contrast"):document.documentElement.classList.remove("high-contrast")},t[2]=e,t[3]=n):n=t[3];const i=n,o=`${e?"Disable":"Enable"} high contrast mode`,c=`${e?"Disable":"Enable"} high contrast mode for better visibility`;let u;t[4]===Symbol.for("react.memo_cache_sentinel")?(u=l.jsx(ss,{className:"h-4 w-4"}),t[4]=u):u=t[4];let d;return t[5]!==e||t[6]!==o||t[7]!==c||t[8]!==i?(d=l.jsx(O,{size:"icon",variant:"ghost",className:"h-8 w-8",onClick:i,"aria-label":o,"aria-pressed":e,title:c,children:u}),t[5]=e,t[6]=o,t[7]=c,t[8]=i,t[9]=d):d=t[9],d}function Js(){const t=T.c(15),{handleFileChange:e,handleDownload:s}=ie();let a;t[0]!==e?(a=l.jsx(je,{id:"file-upload",type:"file",accept:".db,.sqlite,.sqlite3",className:"absolute inset-0 cursor-pointer opacity-0",onChange:e,"aria-describedby":"file-upload-description"}),t[0]=e,t[1]=a):a=t[1];let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=l.jsx("span",{id:"file-upload-description",className:"sr-only",children:"Select a SQLite database file to open (.db, .sqlite, .sqlite3)"}),t[2]=r):r=t[2];let n;t[3]===Symbol.for("react.memo_cache_sentinel")?(n=l.jsxs(O,{size:"sm",variant:"outline",className:"border-foreground/25 pointer-events-none h-8 cursor-pointer px-3 text-xs font-medium sm:w-[200px]","aria-hidden":"true",tabIndex:-1,children:[l.jsx(fe,{className:"mr-1.5 h-3.5 w-3.5","aria-hidden":"true"}),"Open Database"]}),t[3]=n):n=t[3];let i;t[4]!==a?(i=l.jsxs("label",{htmlFor:"file-upload",className:"focus-within:ring-ring relative cursor-pointer rounded-md transition-opacity focus-within:ring-2 focus-within:ring-offset-2 hover:opacity-80",children:[a,r,n]}),t[4]=a,t[5]=i):i=t[5];let o;t[6]===Symbol.for("react.memo_cache_sentinel")?(o=l.jsx(as,{className:"mr-1.5 h-3.5 w-3.5","aria-hidden":"true"}),t[6]=o):o=t[6];let c;t[7]!==s?(c=l.jsxs(O,{size:"sm",variant:"outline",className:"border-foreground/25 h-8 px-3 text-xs font-medium",onClick:s,"aria-label":"Save current database to file",children:[o,"Save Database"]}),t[7]=s,t[8]=c):c=t[8];let u;t[9]!==i||t[10]!==c?(u=l.jsxs("div",{className:"flex items-center gap-1",role:"group","aria-label":"Database file operations",children:[i,c]}),t[9]=i,t[10]=c,t[11]=u):u=t[11];let d;t[12]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsxs("div",{className:"flex items-center gap-1",role:"group","aria-label":"Application settings and links",children:[l.jsx("a",{href:"https://github.com/vwh/sqlite-online",target:"_blank",rel:"noopener noreferrer",className:"focus:ring-ring rounded-md transition-opacity hover:opacity-80 focus:ring-2 focus:ring-offset-2 focus:outline-none","aria-label":"View source code on GitHub (opens in new tab)",children:l.jsx(O,{size:"icon",variant:"ghost",className:"hidden h-8 w-8 sm:flex",tabIndex:-1,"aria-hidden":"true",children:l.jsx(ls,{className:"h-4 w-4"})})}),l.jsx(Xs,{}),l.jsx(Ys,{})]}),t[12]=d):d=t[12];let m;return t[13]!==u?(m=l.jsxs("header",{className:"flex items-center justify-between gap-2 border-b px-1 py-1.5",role:"banner",children:[u,d]}),t[13]=u,t[14]=m):m=t[14],m}const be=De(t=>({expandedTables:[],expandedIndexSection:!0,toggleTable:e=>t(s=>({expandedTables:s.expandedTables.includes(e)?s.expandedTables.filter(r=>r!==e):[...s.expandedTables,e]})),setExpandedTables:e=>t(()=>({expandedTables:e})),toggleExpandedIndexSection:()=>t(e=>({expandedIndexSection:!e.expandedIndexSection})),setExpandedIndexSection:e=>t(()=>({expandedIndexSection:e}))})),ae=N.memo(function(e){const s=T.c(3),{children:a,className:r}=e,n=`block max-w-80 overflow-hidden text-ellipsis ${r??""}`;let i;return s[0]!==a||s[1]!==n?(i=l.jsx("span",{className:n,children:a}),s[0]=a,s[1]=n,s[2]=i):i=s[2],i}),Zs={DATE:/DATE|TIMESTAMP/i,BLOB:/^BLOB$/i,TEXT:/CHAR|TEXT|CLOB|VARCHAR/i,INTEGER:/INT/i,REAL:/REAL|FLOAT|DOUBLE|DECIMAL/i,NUMERIC:/NUMERIC/i,BOOLEAN:/BOOL/i},de=(t,e)=>Zs[e].test(t),tt=t=>de(t,"DATE"),ea=t=>de(t,"BLOB"),st=t=>de(t,"TEXT"),ta=t=>de(t,"BOOLEAN"),at=t=>de(t,"INTEGER")||de(t,"REAL")||de(t,"NUMERIC");function ze(t){const e=T.c(12),{columnSchema:s}=t;if(!s)return null;const{type:a,isPrimaryKey:r,isForeignKey:n}=s;let i;e[0]!==a?(i=()=>a?ea(a)?l.jsx(rs,{className:"h-4 w-4 text-green-500"}):tt(a)?l.jsx(ns,{className:"h-4 w-4 text-blue-500"}):st(a)?l.jsx(is,{className:"h-4 w-4 text-indigo-500"}):at(a)?l.jsx(os,{className:"h-4 w-4 text-red-500"}):ta(a)?l.jsx(cs,{className:"h-4 w-4 text-pink-500"}):l.jsx(ds,{className:"h-4 w-4 text-gray-500"}):null,e[0]=a,e[1]=i):i=e[1];const o=i;let c;e[2]!==o?(c=o(),e[2]=o,e[3]=c):c=e[3];const u=c;let d;e[4]!==r?(d=r&&l.jsx(ms,{className:"h-4 w-4 text-yellow-500"}),e[4]=r,e[5]=d):d=e[5];let m;e[6]!==n?(m=n&&l.jsx(us,{className:"h-4 w-4 text-purple-500"}),e[6]=n,e[7]=m):m=e[7];let f;return e[8]!==d||e[9]!==m||e[10]!==u?(f=l.jsxs("div",{className:"flex items-center gap-[2px]",children:[d,m,u]}),e[8]=d,e[9]=m,e[10]=u,e[11]=f):f=e[11],f}const sa=N.memo(t=>{const e=T.c(12),{columnSchema:s}=t;let a;e[0]!==s?(a=l.jsx(ze,{columnSchema:s}),e[0]=s,e[1]=a):a=e[1];let r;e[2]!==s.name?(r=l.jsx("span",{className:"text-primary/60 ml-1 text-xs",children:s.name}),e[2]=s.name,e[3]=r):r=e[3];let n;e[4]!==a||e[5]!==r?(n=l.jsxs("div",{className:"flex items-center",children:[a,r]}),e[4]=a,e[5]=r,e[6]=n):n=e[6];let i;e[7]!==s.type?(i=l.jsx(ae,{className:"text-primary/60 text-xs whitespace-nowrap",children:l.jsx("span",{className:"text-primary/50 bg-primary/5 rounded-full px-2 py-0.5 text-xs",children:s.type})}),e[7]=s.type,e[8]=i):i=e[8];let o;return e[9]!==n||e[10]!==i?(o=l.jsxs("div",{className:"flex items-center justify-between gap-1",children:[n,i]}),e[9]=n,e[10]=i,e[11]=o):o=e[11],o}),aa=N.memo(Ce),la=N.memo(Ve),lt=N.memo(t=>{const e=T.c(4),{expanded:s,size:a}=t,r=a===void 0?4:a,n=`h-${r} w-${r}`;if(s){let o;return e[0]!==n?(o=l.jsx(aa,{className:n}),e[0]=n,e[1]=o):o=e[1],o}let i;return e[2]!==n?(i=l.jsx(la,{className:n}),e[2]=n,e[3]=i):i=e[3],i}),ra=N.memo(t=>{const e=T.c(29),{name:s,table:a,expanded:r,toggleTable:n}=t;let i;e[0]!==s||e[1]!==n?(i=()=>n(s),e[0]=s,e[1]=n,e[2]=i):i=e[2];const o=i,c=r&&"ml-1";let u;e[3]!==c?(u=P("flex cursor-pointer items-center rounded px-1.5 py-1 transition-all hover:ml-2",c),e[3]=c,e[4]=u):u=e[4];let d;e[5]!==r?(d=l.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:l.jsx(lt,{expanded:r})}),e[5]=r,e[6]=d):d=e[6];let m;e[7]!==a.type?(m=a.type==="view"&&l.jsx(fs,{className:"h-4 w-4"}),e[7]=a.type,e[8]=m):m=e[8];let f;e[9]!==s?(f=l.jsx("span",{className:"text-sm",children:s}),e[9]=s,e[10]=f):f=e[10];let p;e[11]!==a.schema.length?(p=l.jsxs("span",{className:"text-primary/50 text-xs",children:["(",a.schema.length,")"]}),e[11]=a.schema.length,e[12]=p):p=e[12];let x;e[13]!==m||e[14]!==f||e[15]!==p?(x=l.jsxs("span",{className:"flex items-center gap-1 capitalize",children:[m,f,p]}),e[13]=m,e[14]=f,e[15]=p,e[16]=x):x=e[16];let b;e[17]!==r||e[18]!==o||e[19]!==u||e[20]!==d||e[21]!==x?(b=l.jsxs("button",{className:u,onClick:o,"aria-expanded":r,children:[d,x]}),e[17]=r,e[18]=o,e[19]=u,e[20]=d,e[21]=x,e[22]=b):b=e[22];let g;e[23]!==r||e[24]!==a.schema?(g=r&&l.jsx("div",{className:"border-primary/20 mt-1 mb-2 ml-4 flex flex-col gap-1 space-y-0.5 border-l-2 pl-2",children:a.schema.map(na)}),e[23]=r,e[24]=a.schema,e[25]=g):g=e[25];let w;return e[26]!==g||e[27]!==b?(w=l.jsxs("article",{children:[b,g]}),e[26]=g,e[27]=b,e[28]=w):w=e[28],w});function na(t){return l.jsx(sa,{columnSchema:t},t.cid)}const rt=N.memo(t=>{const e=T.c(17),{title:s,expanded:a,icon:r,onToggle:n,children:i}=t;let o;e[0]!==n?(o=x=>{(x.key==="Enter"||x.key===" ")&&(x.preventDefault(),n())},e[0]=n,e[1]=o):o=e[1];const c=o,u=!a&&"mb-0";let d;e[2]!==u?(d=P("hover:bg-primary/5 bg-primary/7 flex cursor-pointer items-center px-2 py-2 transition-colors",u),e[2]=u,e[3]=d):d=e[3];let m;e[4]!==a?(m=l.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:l.jsx(lt,{expanded:a,size:5})}),e[4]=a,e[5]=m):m=e[5];let f;e[6]!==s?(f=l.jsx(ae,{className:"flex items-center gap-1",children:s}),e[6]=s,e[7]=f):f=e[7];let p;return e[8]!==i||e[9]!==a||e[10]!==c||e[11]!==r||e[12]!==n||e[13]!==d||e[14]!==m||e[15]!==f?(p=l.jsxs("header",{className:d,role:"button",tabIndex:0,onClick:n,onKeyDown:c,"aria-expanded":a,children:[m,r,f,i]}),e[8]=i,e[9]=a,e[10]=c,e[11]=r,e[12]=n,e[13]=d,e[14]=m,e[15]=f,e[16]=p):p=e[16],p}),ia=N.memo(t=>{const e=T.c(23),{tablesSchema:s,expandAllTables:a,collapseAllTables:r,expandedTableSection:n,toggleTableSection:i,expandedTables:o,toggleTable:c}=t,[u,d]=N.useState(!1);let m;e[0]!==a||e[1]!==s?(m=_=>{_.stopPropagation(),a(s),d(!0)},e[0]=a,e[1]=s,e[2]=m):m=e[2];const f=m;let p;e[3]!==r?(p=_=>{_.stopPropagation(),r(),d(!1)},e[3]=r,e[4]=p):p=e[4];const x=p;let b;e[5]!==n||e[6]!==x||e[7]!==f||e[8]!==u?(b=n&&l.jsx("div",{className:"ml-auto flex",children:u?l.jsx(O,{className:"text-primary hover:bg-primary/5 h-7 rounded px-2 py-0.5 text-xs transition-colors",variant:"ghost",size:"icon",onClick:x,"aria-label":"Collapse all tables",children:l.jsx(hs,{className:"h-4 w-4"})}):l.jsx(O,{className:"text-primary hover:bg-primary/5 h-7 rounded px-2 py-0.5 text-xs transition-colors",variant:"ghost",size:"icon",onClick:f,"aria-label":"Expand all tables",children:l.jsx(ps,{className:"h-4 w-4"})})}),e[5]=n,e[6]=x,e[7]=f,e[8]=u,e[9]=b):b=e[9];const g=b;let w;e[10]===Symbol.for("react.memo_cache_sentinel")?(w=l.jsx(fe,{className:"mr-2 h-4 w-4"}),e[10]=w):w=e[10];let y;e[11]!==g||e[12]!==n||e[13]!==i?(y=l.jsx(rt,{title:"Tables",expanded:n,icon:w,onToggle:i,children:g}),e[11]=g,e[12]=n,e[13]=i,e[14]=y):y=e[14];let S;e[15]!==n||e[16]!==o||e[17]!==s||e[18]!==c?(S=n&&l.jsx("div",{className:"space-y-0.5 overflow-y-auto pr-1 pl-2",children:Object.entries(s).map(_=>{const[k,I]=_;return l.jsx(ra,{name:k,table:I,expanded:o.includes(k),toggleTable:c},k)})}),e[15]=n,e[16]=o,e[17]=s,e[18]=c,e[19]=S):S=e[19];let C;return e[20]!==y||e[21]!==S?(C=l.jsxs("section",{children:[y,S]}),e[20]=y,e[21]=S,e[22]=C):C=e[22],C}),oa=N.memo(t=>{const e=T.c(7),{index:s}=t;let a;e[0]!==s.name?(a=l.jsx("span",{className:"text-sm",children:s.name}),e[0]=s.name,e[1]=a):a=e[1];let r;e[2]!==s.tableName?(r=l.jsx(ae,{className:"text-primary/60 text-xs font-medium whitespace-nowrap",children:l.jsx("span",{className:"text-primary/50 bg-primary/5 rounded-full px-2 py-0.5 text-xs",children:s.tableName})}),e[2]=s.tableName,e[3]=r):r=e[3];let n;return e[4]!==a||e[5]!==r?(n=l.jsx("article",{children:l.jsx("div",{className:"flex cursor-pointer items-center rounded px-1.5 py-1 transition-all hover:ml-2",children:l.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[a,r]})})}),e[4]=a,e[5]=r,e[6]=n):n=e[6],n}),ca=N.memo(t=>{const e=T.c(10),{indexes:s,expandedIndexSection:a,toggleIndexSection:r}=t;let n;e[0]===Symbol.for("react.memo_cache_sentinel")?(n=l.jsx(xs,{className:"mr-2 h-4 w-4"}),e[0]=n):n=e[0];let i;e[1]!==a||e[2]!==r?(i=l.jsx(rt,{title:"Indexes",expanded:a,icon:n,onToggle:r}),e[1]=a,e[2]=r,e[3]=i):i=e[3];let o;e[4]!==a||e[5]!==s?(o=a&&l.jsx("div",{className:"space-y-0.5 overflow-y-auto pr-1 pl-2",children:s.map(da)}),e[4]=a,e[5]=s,e[6]=o):o=e[6];let c;return e[7]!==i||e[8]!==o?(c=l.jsxs("section",{children:[i,o]}),e[7]=i,e[8]=o,e[9]=c):c=e[9],c});function da(t){return l.jsx(oa,{index:t},t.name)}const ma=N.memo(t=>{const e=T.c(3),{onFilterChange:s}=t;let a;e[0]===Symbol.for("react.memo_cache_sentinel")?(a=l.jsx(bs,{className:"text-primary/40 absolute top-1/2 left-2 h-4 w-4 -translate-y-1/2 transform"}),e[0]=a):a=e[0];let r;return e[1]!==s?(r=l.jsxs("div",{className:"relative",children:[a,l.jsx(je,{placeholder:"Search tables and indexes",className:"border-primary/20 h-8 w-full pl-8 text-sm text-[0.8rem]!",onChange:n=>s(n.target.value),"aria-label":"Search tables and indexes"})]}),e[1]=s,e[2]=r):r=e[2],r}),Oe=()=>{const t=T.c(29),[e,s]=N.useState(""),[a,r]=N.useState(!0),n=be(ua),i=be(fa),o=v(ha),c=v(pa),u=be(xa),d=be(ba),m=be(ga);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{r(ya)},t[0]=f):f=t[0];const p=f;let x;t[1]!==m?(x=L=>{m(Object.keys(L)),r(!0)},t[1]=m,t[2]=x):x=t[2];const b=x;let g;t[3]!==m?(g=()=>{m([]),r(!1)},t[3]=m,t[4]=g):g=t[4];const w=g;let y;e:{if(!e){y=o;break e}let L;if(t[5]!==e||t[6]!==o){L={};for(const[R,$]of Object.entries(o))R.toLowerCase().includes(e.toLowerCase())&&(L[R]=$);t[5]=e,t[6]=o,t[7]=L}else L=t[7];y=L}const S=y;let C;e:{if(!e){C=c;break e}let L;if(t[8]!==e||t[9]!==c){let R;t[11]!==e?(R=$=>$.name.toLowerCase().includes(e.toLowerCase())||$.tableName.toLowerCase().includes(e.toLowerCase()),t[11]=e,t[12]=R):R=t[12],L=c.filter(R),t[8]=e,t[9]=c,t[10]=L}else L=t[10];C=L}const _=C;let k;t[13]===Symbol.for("react.memo_cache_sentinel")?(k=l.jsx("div",{className:"bg-primary/5 border-b p-2",children:l.jsx(ma,{onFilterChange:s})}),t[13]=k):k=t[13];let I;t[14]!==w||t[15]!==b||t[16]!==a||t[17]!==u||t[18]!==S||t[19]!==d?(I=l.jsx(ia,{tablesSchema:S,expandedTableSection:a,toggleTableSection:p,expandAllTables:b,collapseAllTables:w,expandedTables:u,toggleTable:d}),t[14]=w,t[15]=b,t[16]=a,t[17]=u,t[18]=S,t[19]=d,t[20]=I):I=t[20];let j;t[21]!==n||t[22]!==_||t[23]!==c.length||t[24]!==i?(j=c.length>0&&l.jsx(ca,{indexes:_,expandedIndexSection:n,toggleIndexSection:i}),t[21]=n,t[22]=_,t[23]=c.length,t[24]=i,t[25]=j):j=t[25];let E;return t[26]!==I||t[27]!==j?(E=l.jsxs("section",{className:"flex h-full w-full flex-col overflow-hidden",children:[k,l.jsxs("nav",{className:"flex-1 overflow-auto",children:[I,j]})]}),t[26]=I,t[27]=j,t[28]=E):E=t[28],E};function ua(t){return t.expandedIndexSection}function fa(t){return t.toggleExpandedIndexSection}function ha(t){return t.tablesSchema}function pa(t){return t.indexesSchema}function xa(t){return t.expandedTables}function ba(t){return t.toggleTable}function ga(t){return t.setExpandedTables}function ya(t){return!t}const ja=()=>{const t=T.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=l.jsx("div",{className:"h-full overflow-y-auto",children:l.jsx(Oe,{})}),t[0]=e):e=t[0],e};function Le(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx($s,{"data-slot":"resizable-panel-group",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function ue(t){const e=T.c(2);let s;return e[0]!==t?(s=l.jsx(Ls,{"data-slot":"resizable-panel",...t}),e[0]=t,e[1]=s):s=e[1],s}function ke(t){const e=T.c(12);let s,a,r;e[0]!==t?({withHandle:r,className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r):(s=e[1],a=e[2],r=e[3]);let n;e[4]!==s?(n=P("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),e[4]=s,e[5]=n):n=e[5];let i;e[6]!==r?(i=r&&l.jsx("div",{className:"bg-border border-primary/20 z-50 flex h-9 w-4 items-center justify-center rounded-xs border",children:l.jsx(gs,{className:"size-2.5"})}),e[6]=r,e[7]=i):i=e[7];let o;return e[8]!==a||e[9]!==n||e[10]!==i?(o=l.jsx(ks,{"data-slot":"resizable-handle",className:n,...a,children:i}),e[8]=a,e[9]=n,e[10]=i,e[11]=o):o=e[11],o}function wa(t){const e=T.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let a;return e[2]!==s?(a=l.jsx(kt,{"data-slot":"select",...s}),e[2]=s,e[3]=a):a=e[3],a}function Na(t){const e=T.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let a;return e[2]!==s?(a=l.jsx(Lt,{"data-slot":"select-value",...s}),e[2]=s,e[3]=a):a=e[3],a}function va(t){const e=T.c(11);let s,a,r;e[0]!==t?({className:a,children:s,...r}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r):(s=e[1],a=e[2],r=e[3]);let n;e[4]!==a?(n=P("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",a),e[4]=a,e[5]=n):n=e[5];let i;e[6]===Symbol.for("react.memo_cache_sentinel")?(i=l.jsx($t,{asChild:!0,children:l.jsx(Ce,{className:"size-4 opacity-50"})}),e[6]=i):i=e[6];let o;return e[7]!==s||e[8]!==r||e[9]!==n?(o=l.jsxs(It,{"data-slot":"select-trigger",className:n,...r,children:[s,i]}),e[7]=s,e[8]=r,e[9]=n,e[10]=o):o=e[10],o}function Sa(t){const e=T.c(20);let s,a,r,n;e[0]!==t?({className:a,children:s,position:n,...r}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r,e[4]=n):(s=e[1],a=e[2],r=e[3],n=e[4]);const i=n===void 0?"popper":n,o=i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let c;e[5]!==a||e[6]!==o?(c=P("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",o,a),e[5]=a,e[6]=o,e[7]=c):c=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=l.jsx(Ea,{}),e[8]=u):u=e[8];const d=i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let m;e[9]!==d?(m=P("p-1",d),e[9]=d,e[10]=m):m=e[10];let f;e[11]!==s||e[12]!==m?(f=l.jsx(St,{className:m,children:s}),e[11]=s,e[12]=m,e[13]=f):f=e[13];let p;e[14]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(Ta,{}),e[14]=p):p=e[14];let x;return e[15]!==i||e[16]!==r||e[17]!==c||e[18]!==f?(x=l.jsx(wt,{children:l.jsxs(Nt,{"data-slot":"select-content",className:c,position:i,...r,children:[u,f,p]})}),e[15]=i,e[16]=r,e[17]=c,e[18]=f,e[19]=x):x=e[19],x}function Ca(t){const e=T.c(13);let s,a,r;e[0]!==t?({className:a,children:s,...r}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r):(s=e[1],a=e[2],r=e[3]);let n;e[4]!==a?(n=P("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",a),e[4]=a,e[5]=n):n=e[5];let i;e[6]===Symbol.for("react.memo_cache_sentinel")?(i=l.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:l.jsx(Ct,{children:l.jsx(ys,{className:"size-4"})})}),e[6]=i):i=e[6];let o;e[7]!==s?(o=l.jsx(Et,{children:s}),e[7]=s,e[8]=o):o=e[8];let c;return e[9]!==r||e[10]!==n||e[11]!==o?(c=l.jsxs(vt,{"data-slot":"select-item",className:n,...r,children:[i,o]}),e[9]=r,e[10]=n,e[11]=o,e[12]=c):c=e[12],c}const Ea=function(e){const s=T.c(9);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("flex cursor-default items-center justify-center py-1",a),s[3]=a,s[4]=n):n=s[4];let i;s[5]===Symbol.for("react.memo_cache_sentinel")?(i=l.jsx(js,{className:"size-4"}),s[5]=i):i=s[5];let o;return s[6]!==r||s[7]!==n?(o=l.jsx(Tt,{"data-slot":"select-scroll-up-button",className:n,...r,children:i}),s[6]=r,s[7]=n,s[8]=o):o=s[8],o};function Ta(t){const e=T.c(9);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("flex cursor-default items-center justify-center py-1",s),e[3]=s,e[4]=r):r=e[4];let n;e[5]===Symbol.for("react.memo_cache_sentinel")?(n=l.jsx(Ce,{className:"size-4"}),e[5]=n):n=e[5];let i;return e[6]!==a||e[7]!==r?(i=l.jsx(_t,{"data-slot":"select-scroll-down-button",className:r,...a,children:n}),e[6]=a,e[7]=r,e[8]=i):i=e[8],i}function _a(){const t=T.c(7),{handleTableChange:e}=ie(),s=v(ka),r=v(La)??void 0;let n;t[0]===Symbol.for("react.memo_cache_sentinel")?(n=l.jsx(va,{className:"border-primary/20 h-8 w-30 border text-sm sm:w-48",children:l.jsx(Na,{placeholder:"Select Table"})}),t[0]=n):n=t[0];let i;t[1]!==s?(i=l.jsx(Sa,{children:Object.keys(s).map(Ia)}),t[1]=s,t[2]=i):i=t[2];let o;return t[3]!==e||t[4]!==r||t[5]!==i?(o=l.jsxs(wa,{onValueChange:e,value:r,children:[n,i]}),t[3]=e,t[4]=r,t[5]=i,t[6]=o):o=t[6],o}function Ia(t){return l.jsx(Ca,{value:t,children:l.jsx(ae,{className:"text-[0.8rem]! capitalize",children:t})},t)}function La(t){return t.currentTable}function ka(t){return t.tablesSchema}function $a(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx("textarea",{"data-slot":"textarea",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function Ra(){var q,H,ee;const t=T.c(49),{handleEditSubmit:e}=ie(),{selectedRowObject:s,isInserting:a,handleCloseEdit:r}=he(),n=re(Fa),i=re(Ma),o=v(Pa),c=v(Oa),u=v(za);let d,m;t[0]!==u||t[1]!==a||t[2]!==s||t[3]!==i?(d=()=>{a?i((u==null?void 0:u.map(Da))||[]):s&&i(s.data.map(Aa))},m=[a,s,u,i],t[0]=u,t[1]=a,t[2]=s,t[3]=i,t[4]=d,t[5]=m):(d=t[4],m=t[5]),N.useEffect(d,m);let f;t[6]!==i?(f=(Z,Y)=>{const X=re.getState().editValues;i(X.map((Q,V)=>V===Z?Y:Q))},t[6]=i,t[7]=f):f=t[7];const p=f;let x;e:{if(!u||!c||!o[c]){x=null;break e}const Z=(q=o[c])==null?void 0:q.schema;let Y;if(t[8]!==u||t[9]!==n||t[10]!==p||t[11]!==Z){let X;t[13]!==n||t[14]!==p||t[15]!==Z?(X=(Q,V)=>{const B=Z[V],W=(B==null?void 0:B.dflt_value)||"Null",le=(()=>{const h=(B==null?void 0:B.type)??"";return at(h)?"number":tt(h)?"date":"text"})();return l.jsxs("div",{className:"border-primary/10 border shadow-sm",children:[l.jsx("label",{htmlFor:Q,className:"bg-primary/5 border-primary/10 flex items-center gap-1 border-b p-1.5",children:l.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[l.jsxs("div",{className:"flex items-center gap-1.5",children:[l.jsx(ze,{columnSchema:B}),l.jsx(ae,{className:"text-xs font-medium capitalize",children:Q})]}),B.IsNullable&&l.jsx("span",{className:"text-primary/50 bg-primary/5 rounded-full px-2 py-0.5 text-xs",children:"Nullable"})]})}),l.jsx("div",{className:"p-1",children:st((B==null?void 0:B.type)??"")?l.jsx($a,{id:Q,name:Q,className:"border-primary/20 focus:ring-primary/30 focus:border-primary/40 rounded border text-sm text-[0.8rem]! focus:ring-1",value:n[V]||"",onChange:h=>p(V,h.target.value),placeholder:W}):l.jsx(je,{id:Q,name:Q,type:le,className:"border-primary/20 focus:ring-primary/30 focus:border-primary/40 h-9 rounded border text-[0.8rem]! focus:ring-1",value:n[V]||"",onChange:h=>p(V,h.target.value),placeholder:W})})]},Q)},t[13]=n,t[14]=p,t[15]=Z,t[16]=X):X=t[16],Y=u.map(X),t[8]=u,t[9]=n,t[10]=p,t[11]=Z,t[12]=Y}else Y=t[12];x=Y}const b=x;let g,w;t[17]!==e||t[18]!==a?(w=()=>e(a?"insert":"update"),t[17]=e,t[18]=a,t[19]=w):w=t[19];const y=a?"Insert row":"Apply changes",S=((H=o[c])==null?void 0:H.type)==="view";let C;t[20]!==a?(C=a?l.jsxs(l.Fragment,{children:[l.jsx(ve,{className:"mr-2 h-3.5 w-3.5"}),"Insert row"]}):l.jsxs(l.Fragment,{children:[l.jsx(Me,{className:"mr-2 h-3.5 w-3.5"}),"Apply changes"]}),t[20]=a,t[21]=C):C=t[21];let _;t[22]!==w||t[23]!==y||t[24]!==S||t[25]!==C?(_=l.jsx(O,{size:"sm",variant:"outline",className:"w-full py-2 text-xs font-medium",onClick:w,"aria-label":y,disabled:S,children:C}),t[22]=w,t[23]=y,t[24]=S,t[25]=C,t[26]=_):_=t[26];let k;t[27]!==c||t[28]!==e||t[29]!==a||t[30]!==o?(k=!a&&l.jsx(O,{size:"sm",variant:"destructive",className:"hover:bg-destructive/50 rounded text-xs",onClick:()=>e("delete"),"aria-label":"Delete row",disabled:((ee=o[c])==null?void 0:ee.type)==="view",children:l.jsx(ws,{className:"h-3.5 w-3.5"})}),t[27]=c,t[28]=e,t[29]=a,t[30]=o,t[31]=k):k=t[31];let I;t[32]!==k||t[33]!==_?(I=l.jsxs("div",{className:"bg-primary/5 border-primary/10 flex w-full gap-1 border-t p-2 shadow-inner",children:[_,k]}),t[32]=k,t[33]=_,t[34]=I):I=t[34],g=I;const j=g;let E,L;t[35]!==a?(L=l.jsx("div",{className:"flex items-center gap-2",children:a?l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-primary/10 rounded p-1.5",children:l.jsx(ve,{className:"h-4 w-4"})}),l.jsx(ae,{className:"text-sm font-medium whitespace-nowrap",children:"Inserting new row"})]}):l.jsxs(l.Fragment,{children:[l.jsx("div",{className:"bg-primary/10 rounded p-1.5",children:l.jsx(Me,{className:"h-4 w-4"})}),l.jsx(ae,{className:"text-sm font-medium whitespace-nowrap",children:"Updating row"})]})}),t[35]=a,t[36]=L):L=t[36];let R;t[37]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsx(We,{className:"mr-1 h-3 w-3"}),t[37]=R):R=t[37];let $;t[38]!==r?($=l.jsxs(O,{size:"sm",variant:"outline",className:"text-xs",onClick:r,title:"Go back to data","aria-label":"Go back to data",children:[R,"Back"]}),t[38]=r,t[39]=$):$=t[39];let z;t[40]!==L||t[41]!==$?(z=l.jsxs("div",{className:"bg-primary/5 sticky top-0 z-10 flex w-full items-center justify-between gap-1 border-b p-2 shadow-sm",children:[L,$]}),t[40]=L,t[41]=$,t[42]=z):z=t[42],E=z;const F=E;let M;t[43]!==b?(M=l.jsx("div",{className:"flex-1 overflow-auto",children:b}),t[43]=b,t[44]=M):M=t[44];let K;return t[45]!==j||t[46]!==F||t[47]!==M?(K=l.jsxs("section",{className:"flex h-full flex-col",children:[F,M,j]}),t[45]=j,t[46]=F,t[47]=M,t[48]=K):K=t[48],K}function Aa(t){return(t==null?void 0:t.toString())??""}function Da(){return""}function za(t){return t.columns}function Oa(t){return t.currentTable}function Pa(t){return t.tablesSchema}function Ma(t){return t.setEditValues}function Fa(t){return t.editValues}const Ba=function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("w-full caption-bottom text-sm",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:l.jsx("table",{"data-slot":"table",className:n,...r})}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i},Ua=function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("[&_tr]:border-b",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx("thead",{"data-slot":"table-header",id:"tableHeader",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i},Ka=function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("[&_tr:last-child]:border-0",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx("tbody",{"data-slot":"table-body",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i},_e=function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx("tr",{"data-slot":"table-row",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i},Ke=function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("text-muted-foreground min-h-6 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx("th",{"data-slot":"table-head",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i},Qe=function(e){const s=T.c(8);let a,r;s[0]!==e?({className:a,...r}=e,s[0]=e,s[1]=a,s[2]=r):(a=s[1],r=s[2]);let n;s[3]!==a?(n=P("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",a),s[3]=a,s[4]=n):n=s[4];let i;return s[5]!==r||s[6]!==n?(i=l.jsx("td",{"data-slot":"table-cell",id:"tableCell",className:n,...r}),s[5]=r,s[6]=n,s[7]=i):i=s[7],i};function Qa({column:t,value:e,onChange:s,debounceTime:a=300}){const[r,n]=N.useState(e);N.useEffect(()=>{n(e)},[e]);const i=N.useMemo(()=>Ie.debounce((m,f)=>{s(m,f)},a),[a]),o=N.useCallback(d=>{const m=d.target.value;n(m),i(t,m)},[t,i]);N.useEffect(()=>()=>{i.cancel()},[i]);const c=`filter-${t}`,u=`filter-label-${t}`;return l.jsxs("div",{className:"relative",children:[l.jsxs("label",{htmlFor:c,id:u,className:"sr-only",children:["Filter ",t," column"]}),l.jsx(je,{id:c,type:"text",className:"border-primary/20 max-h-6 w-full rounded px-2 py-1 text-[0.8rem]!",value:r,onChange:o,placeholder:"Filter","aria-labelledby":u,"aria-describedby":`${c}-description`,title:`Filter rows by ${t} column values`}),l.jsxs("span",{id:`${c}-description`,className:"sr-only",children:["Type to filter table rows by ",t," column values. Results update automatically as you type."]})]})}function $e(t){const e=T.c(2),{children:s}=t;let a;return e[0]!==s?(a=l.jsx("span",{className:"text-muted-foreground bg-primary/5 rounded px-2 py-0.5 text-xs italic",children:s}),e[0]=s,e[1]=a):a=e[1],a}const Ga=N.memo(t=>{const e=T.c(18),{column:s}=t,a=v(Ha),{handleQuerySorter:r}=ie();if(a!=null&&a[s])if(a[s]==="asc"){let c;e[0]!==s||e[1]!==r?(c=()=>r(s),e[0]=s,e[1]=r,e[2]=c):c=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=l.jsx(Ns,{className:"h-3 w-3"}),e[3]=u):u=e[3];let d;return e[4]!==c?(d=l.jsx("button",{title:"Sort column in descending order",type:"button","aria-label":"Sort descending",className:"cursor-pointer",onClick:c,children:u}),e[4]=c,e[5]=d):d=e[5],d}else{let c;e[6]!==s||e[7]!==r?(c=()=>r(s),e[6]=s,e[7]=r,e[8]=c):c=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=l.jsx(vs,{className:"h-3 w-3"}),e[9]=u):u=e[9];let d;return e[10]!==c?(d=l.jsx("button",{title:"Sort column in ascending order",type:"button","aria-label":"Sort ascending",className:"cursor-pointer",onClick:c,children:u}),e[10]=c,e[11]=d):d=e[11],d}let n;e[12]!==s||e[13]!==r?(n=()=>r(s),e[12]=s,e[13]=r,e[14]=n):n=e[14];let i;e[15]===Symbol.for("react.memo_cache_sentinel")?(i=l.jsx(Ss,{className:"h-3 w-3"}),e[15]=i):i=e[15];let o;return e[16]!==n?(o=l.jsx("button",{title:"Sort column in ascending order",type:"button","aria-label":"Sort column",className:"cursor-pointer",onClick:n,children:i}),e[16]=n,e[17]=o):o=e[17],o});function Ha(t){return t.sorters}function Va(){const t=T.c(33),e=v(el),s=v(Za),a=v(Ja),r=v(Xa),n=v(Ya),i=v(qa),o=v(Wa),{handleQueryFilter:c}=ie(),{handleRowClick:u}=he();let d,m;t[0]!==n||t[1]!==o?(m=l.jsx("div",{className:"flex h-full flex-col items-center justify-center gap-1 px-4",children:n?l.jsxs(l.Fragment,{children:[l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"mb-1 font-medium",children:"No Data To Show"}),l.jsx("p",{className:"text-muted-foreground max-w-md text-sm",children:"The current filters did not return any results"})]}),l.jsxs(O,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>o(null),children:[l.jsx(Ae,{className:"mr-1 h-3 w-3"}),"Clear filters"]})]}):l.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 p-8",children:[l.jsx("div",{className:"bg-primary/10 rounded-full p-4",children:l.jsx(fe,{className:"text-primary/70 h-8 w-8"})}),l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"mb-1 font-medium",children:"No Data To Show"}),l.jsx("p",{className:"text-muted-foreground max-w-md text-sm",children:"This table does not have any data to display"})]})]})}),t[0]=n,t[1]=o,t[2]=m):m=t[2],d=m;const f=d;let p,x;t[3]!==s?(x=s||[],t[3]=s,t[4]=x):x=t[4];let b;if(t[5]!==n||t[6]!==c||t[7]!==x){let I;t[9]!==n||t[10]!==c?(I=j=>l.jsx(Qa,{column:j,value:(n==null?void 0:n[j])??"",onChange:c},j),t[9]=n,t[10]=c,t[11]=I):I=t[11],b=x.map(I),t[5]=n,t[6]=c,t[7]=x,t[8]=b}else b=t[8];p=b;const g=p,w=a?`Data from ${a} table`:"Database table";let y;t[12]!==s||t[13]!==a||t[14]!==g||t[15]!==i||t[16]!==r?(y=s&&a?s.map((I,j)=>l.jsxs(Ke,{className:"p-1 text-xs",role:"columnheader","aria-sort":(i==null?void 0:i[I])==="asc"?"ascending":(i==null?void 0:i[I])==="desc"?"descending":"none",children:[l.jsxs("div",{className:"flex items-center gap-1 py-[1.5px]",children:[l.jsx(Ga,{column:I}),l.jsx(ae,{className:"text-foreground font-medium capitalize",children:I}),l.jsx(ze,{columnSchema:r[a].schema[j]})]}),g==null?void 0:g[j]]},I)):l.jsx(Ke,{role:"columnheader",children:l.jsx("p",{className:"text-xs",children:"No columns found"})}),t[12]=s,t[13]=a,t[14]=g,t[15]=i,t[16]=r,t[17]=y):y=t[17];let S;t[18]!==y?(S=l.jsx(Ua,{children:l.jsx(_e,{className:"bg-primary/5",role:"row",children:y})}),t[18]=y,t[19]=S):S=t[19];let C;t[20]!==s||t[21]!==a||t[22]!==e||t[23]!==f||t[24]!==u||t[25]!==r?(C=e&&e.length>0?e.map((I,j)=>{var z,F;const E=((z=r[a])==null?void 0:z.type)==="view",L=(F=r[a])==null?void 0:F.primaryKey,R=L&&!E?I[0]:null,$=L&&!E?I.slice(1):I;return l.jsx(_e,{onClick:()=>u($,j,R),className:"hover:bg-primary/5 focus:bg-primary/5 focus:ring-ring cursor-pointer text-xs focus:ring-2 focus:ring-offset-1 focus:outline-none",role:"row",tabIndex:0,"aria-label":`Row ${j+1} of ${e.length}, click to edit`,onKeyDown:M=>{(M.key==="Enter"||M.key===" ")&&(M.preventDefault(),u($,j,R))},children:$.map((M,K)=>{var q,H;return l.jsx(Qe,{className:"border-primary/5 border-t p-2",role:"cell","aria-label":`${(s==null?void 0:s[K])||`Column ${K+1}`}: ${M===null?"NULL":((q=r[a].schema[K])==null?void 0:q.type)==="BLOB"?"BLOB data":String(M)}`,children:M===null?l.jsx($e,{"aria-label":"NULL value",children:M===null?"NULL":JSON.stringify(M)}):l.jsx(l.Fragment,{children:((H=r[a].schema[K])==null?void 0:H.type)==="BLOB"?l.jsx($e,{"aria-label":"Binary data",children:"BLOB"}):l.jsx(ae,{className:"text-xs",children:M})})},K)})},j)}):l.jsx(_e,{role:"row",children:l.jsx(Qe,{colSpan:(s==null?void 0:s.length)??1,className:"h-32 text-center",role:"cell","aria-label":"No data available",children:f})}),t[20]=s,t[21]=a,t[22]=e,t[23]=f,t[24]=u,t[25]=r,t[26]=C):C=t[26];let _;t[27]!==C?(_=l.jsx(Ka,{children:C}),t[27]=C,t[28]=_):_=t[28];let k;return t[29]!==w||t[30]!==S||t[31]!==_?(k=l.jsx("div",{role:"region","aria-label":"Database table data","aria-live":"polite",children:l.jsxs(Ba,{role:"table","aria-label":w,children:[S,_]})}),t[29]=w,t[30]=S,t[31]=_,t[32]=k):k=t[32],k}function Wa(t){return t.setFilters}function qa(t){return t.sorters}function Ya(t){return t.filters}function Xa(t){return t.tablesSchema}function Ja(t){return t.currentTable}function Za(t){return t.columns}function el(t){return t.data}function tl(){const t=T.c(61),{handlePageChange:e,handleExport:s}=ie(),{isInserting:a,handleInsert:r}=he(),n=v(nl),i=v(rl),o=v(ll),c=v(al),u=v(sl),d=Math.floor(n/i)+1,m=Math.ceil(o/i);let f;t[0]!==e?(f=()=>e("first"),t[0]=e,t[1]=f):f=t[1];const p=n===0||c||!o,x=`Go to first page (page 1 of ${m})`;let b;t[2]===Symbol.for("react.memo_cache_sentinel")?(b=l.jsx(Cs,{className:"h-4 w-4","aria-hidden":"true"}),t[2]=b):b=t[2];let g;t[3]!==f||t[4]!==p||t[5]!==x?(g=l.jsx(O,{onClick:f,disabled:p,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-l-md rounded-r-none border-r","aria-label":x,children:b}),t[3]=f,t[4]=p,t[5]=x,t[6]=g):g=t[6];let w;t[7]!==e?(w=()=>e("prev"),t[7]=e,t[8]=w):w=t[8];const y=n===0||c||!o,S=`Go to previous page (page ${d-1} of ${m})`;let C;t[9]===Symbol.for("react.memo_cache_sentinel")?(C=l.jsx(We,{className:"h-4 w-4","aria-hidden":"true"}),t[9]=C):C=t[9];let _;t[10]!==w||t[11]!==y||t[12]!==S?(_=l.jsx(O,{onClick:w,disabled:y,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-none border-r","aria-label":S,children:C}),t[10]=w,t[11]=y,t[12]=S,t[13]=_):_=t[13];const k=o?`Showing rows ${n+1} to ${n+i>o?o:n+i} of ${o} total rows, page ${d} of ${m}`:"No data available";let I;t[14]!==i||t[15]!==o||t[16]!==n?(I=o?l.jsxs("span",{"aria-hidden":"true",children:[n+1,l.jsx("span",{className:"text-primary/50 mx-1",children:"-"}),n+i>o?o:n+i,l.jsx("span",{className:"text-primary/50 mx-1",children:"of"}),o]}):l.jsx("span",{children:"No data"}),t[14]=i,t[15]=o,t[16]=n,t[17]=I):I=t[17];let j;t[18]!==k||t[19]!==I?(j=l.jsx("div",{className:"flex items-center justify-center px-3 text-xs font-medium",role:"status","aria-live":"polite","aria-label":k,children:I}),t[18]=k,t[19]=I,t[20]=j):j=t[20];let E;t[21]!==e?(E=()=>e("next"),t[21]=e,t[22]=E):E=t[22];const L=n+i>=o||c||!o,R=`Go to next page (page ${d+1} of ${m})`;let $;t[23]===Symbol.for("react.memo_cache_sentinel")?($=l.jsx(Ve,{className:"h-4 w-4","aria-hidden":"true"}),t[23]=$):$=t[23];let z;t[24]!==E||t[25]!==L||t[26]!==R?(z=l.jsx(O,{onClick:E,disabled:L,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-none border-l","aria-label":R,children:$}),t[24]=E,t[25]=L,t[26]=R,t[27]=z):z=t[27];let F;t[28]!==e?(F=()=>e("last"),t[28]=e,t[29]=F):F=t[29];const M=n+i>=o||c||!o,K=`Go to last page (page ${m} of ${m})`;let q;t[30]===Symbol.for("react.memo_cache_sentinel")?(q=l.jsx(Es,{className:"h-4 w-4","aria-hidden":"true"}),t[30]=q):q=t[30];let H;t[31]!==F||t[32]!==M||t[33]!==K?(H=l.jsx(O,{onClick:F,disabled:M,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-l-none rounded-r-md border-l","aria-label":K,children:q}),t[31]=F,t[32]=M,t[33]=K,t[34]=H):H=t[34];let ee;t[35]!==j||t[36]!==z||t[37]!==H||t[38]!==g||t[39]!==_?(ee=l.jsx("section",{className:"bg-primary/10 flex h-full grow items-center gap-2 p-1",children:l.jsxs("nav",{className:"flex items-center rounded-md border shadow-sm",role:"navigation","aria-label":"Table pagination",children:[g,_,j,z,H]})}),t[35]=j,t[36]=z,t[37]=H,t[38]=g,t[39]=_,t[40]=ee):ee=t[40];const Z=a||u,Y=u?"Cannot insert rows in views":"Insert new row into table",X=u?"insert-disabled-reason":void 0;let Q;t[41]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(ve,{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true"}),t[41]=Q):Q=t[41];let V;t[42]!==r||t[43]!==Z||t[44]!==Y||t[45]!==X?(V=l.jsxs(O,{size:"sm",variant:"outline",className:"h-8 text-xs font-medium shadow-sm",onClick:r,disabled:Z,"aria-label":Y,"aria-describedby":X,children:[Q,"Insert row"]}),t[42]=r,t[43]=Z,t[44]=Y,t[45]=X,t[46]=V):V=t[46];let B;t[47]!==u?(B=u&&l.jsx("span",{id:"insert-disabled-reason",className:"sr-only",children:"Insert is disabled because this is a database view, not a table"}),t[47]=u,t[48]=B):B=t[48];let W;t[49]!==s?(W=()=>s("current"),t[49]=s,t[50]=W):W=t[50];let le;t[51]===Symbol.for("react.memo_cache_sentinel")?(le=l.jsx(ye,{className:"mr-2 h-3.5 w-3.5","aria-hidden":"true"}),t[51]=le):le=t[51];let h;t[52]!==W?(h=l.jsxs(O,{onClick:W,size:"sm",variant:"outline",className:"h-8 text-xs font-medium shadow-sm","aria-label":"Export current table data as CSV file",children:[le,"Export data"]}),t[52]=W,t[53]=h):h=t[53];let A;t[54]!==V||t[55]!==B||t[56]!==h?(A=l.jsxs("section",{className:"bg-primary/10 hidden h-full items-center gap-1 p-2 md:flex",role:"group","aria-label":"Table actions",children:[V,B,h]}),t[54]=V,t[55]=B,t[56]=h,t[57]=A):A=t[57];let D;return t[58]!==ee||t[59]!==A?(D=l.jsxs("footer",{className:"bg-background flex w-full items-center justify-between border-t shadow-sm",id:"paginationControls",role:"contentinfo","aria-label":"Table pagination and actions",children:[ee,A]}),t[58]=ee,t[59]=A,t[60]=D):D=t[60],D}function sl(t){var e;return((e=t.tablesSchema[t.currentTable])==null?void 0:e.type)==="view"}function al(t){return t.isDataLoading}function ll(t){return t.maxSize}function rl(t){return t.limit}function nl(t){return t.offset}function il(t){const e=T.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let a;return e[2]!==s?(a=l.jsx(Dt,{"data-slot":"dropdown-menu",...s}),e[2]=s,e[3]=a):a=e[3],a}function ol(t){const e=T.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let a;return e[2]!==s?(a=l.jsx(Rt,{"data-slot":"dropdown-menu-trigger",...s}),e[2]=s,e[3]=a):a=e[3],a}function cl(t){const e=T.c(10);let s,a,r;e[0]!==t?({className:s,sideOffset:r,...a}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r):(s=e[1],a=e[2],r=e[3]);const n=r===void 0?4:r;let i;e[4]!==s?(i=P("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),e[4]=s,e[5]=i):i=e[5];let o;return e[6]!==a||e[7]!==n||e[8]!==i?(o=l.jsx(zt,{children:l.jsx(Ot,{"data-slot":"dropdown-menu-content",sideOffset:n,className:i,...a})}),e[6]=a,e[7]=n,e[8]=i,e[9]=o):o=e[9],o}function ge(t){const e=T.c(12);let s,a,r,n;e[0]!==t?({className:s,inset:a,variant:n,...r}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r,e[4]=n):(s=e[1],a=e[2],r=e[3],n=e[4]);const i=n===void 0?"default":n;let o;e[5]!==s?(o=P("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),e[5]=s,e[6]=o):o=e[6];let c;return e[7]!==a||e[8]!==r||e[9]!==o||e[10]!==i?(c=l.jsx(At,{"data-slot":"dropdown-menu-item","data-inset":a,"data-variant":i,className:o,...r}),e[7]=a,e[8]=r,e[9]=o,e[10]=i,e[11]=c):c=e[11],c}function dl(t){const e=T.c(33),{setFilters:s,setSorters:a,filters:r,sorters:n,handleExport:i}=t,{isInserting:o,handleInsert:c}=he(),u=v(ml);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsx(ol,{asChild:!0,children:l.jsxs(O,{variant:"outline",size:"sm",className:"h-8 text-xs",children:["Actions ",l.jsx(Ce,{className:"ml-1 h-3 w-3"})]})}),e[0]=d):d=e[0];let m;e[1]!==s?(m=()=>s(null),e[1]=s,e[2]=m):m=e[2];const f=r==null;let p;e[3]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(Ae,{className:"mr-1 h-3 w-3"}),e[3]=p):p=e[3];let x;e[4]!==m||e[5]!==f?(x=l.jsx(ge,{asChild:!0,children:l.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:m,disabled:f,title:"Clear applied filters",children:[p,"Clear filters"]})}),e[4]=m,e[5]=f,e[6]=x):x=e[6];let b;e[7]!==a?(b=()=>a(null),e[7]=a,e[8]=b):b=e[8];const g=n==null;let w;e[9]===Symbol.for("react.memo_cache_sentinel")?(w=l.jsx(qe,{className:"mr-1 h-3 w-3"}),e[9]=w):w=e[9];let y;e[10]!==b||e[11]!==g?(y=l.jsx(ge,{asChild:!0,children:l.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:b,disabled:g,title:"Reset sorting",children:[w,"Reset sorting"]})}),e[10]=b,e[11]=g,e[12]=y):y=e[12];const S=o||u;let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=l.jsx(ve,{className:"mr-1 h-3 w-3"}),e[13]=C):C=e[13];let _;e[14]!==c||e[15]!==S?(_=l.jsx(ge,{asChild:!0,children:l.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:c,disabled:S,title:"Insert a new row",children:[C,"Insert row"]})}),e[14]=c,e[15]=S,e[16]=_):_=e[16];let k;e[17]!==i?(k=()=>i("table"),e[17]=i,e[18]=k):k=e[18];let I;e[19]===Symbol.for("react.memo_cache_sentinel")?(I=l.jsx(ye,{className:"mr-1 h-3 w-3"}),e[19]=I):I=e[19];let j;e[20]!==k?(j=l.jsx(ge,{asChild:!0,children:l.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:k,title:"Export the current table as CSV",children:[I,"Export table"]})}),e[20]=k,e[21]=j):j=e[21];let E;e[22]!==i?(E=()=>i("current"),e[22]=i,e[23]=E):E=e[23];let L;e[24]===Symbol.for("react.memo_cache_sentinel")?(L=l.jsx(ye,{className:"mr-1 h-3 w-3"}),e[24]=L):L=e[24];let R;e[25]!==E?(R=l.jsx(ge,{asChild:!0,children:l.jsxs(O,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:E,title:"Export the current data as CSV",children:[L,"Export data"]})}),e[25]=E,e[26]=R):R=e[26];let $;return e[27]!==_||e[28]!==j||e[29]!==R||e[30]!==x||e[31]!==y?($=l.jsxs(il,{children:[d,l.jsxs(cl,{className:"w-40",children:[x,y,_,j,R]})]}),e[27]=_,e[28]=j,e[29]=R,e[30]=x,e[31]=y,e[32]=$):$=e[32],$}function ml(t){var e;return((e=t.tablesSchema[t.currentTable])==null?void 0:e.type)==="view"}function ul(t){const e=T.c(38),{filters:s,sorters:a}=t,r=v(hl),n=v(fl),{handleExport:i}=ie(),o=s!=null,c=a!=null,u=o?Object.keys(s).length:0,d=c?Object.keys(a).length:0;let m;e[0]!==r?(m=()=>r(null),e[0]=r,e[1]=m):m=e[1];const f=!o,p=o?`Clear ${u} active filter${u!==1?"s":""}`:"No filters to clear";let x;e[2]===Symbol.for("react.memo_cache_sentinel")?(x=l.jsx(Ae,{className:"mr-1 h-3 w-3","aria-hidden":"true"}),e[2]=x):x=e[2];let b;e[3]!==m||e[4]!==f||e[5]!==p?(b=l.jsxs(O,{size:"sm",variant:"outline",className:"h-8 text-xs",onClick:m,disabled:f,"aria-label":p,"aria-describedby":"clear-filters-description",children:[x,"Clear filters"]}),e[3]=m,e[4]=f,e[5]=p,e[6]=b):b=e[6];const g=o?`${u} filter${u!==1?"s":""} currently applied`:"No filters currently applied";let w;e[7]!==g?(w=l.jsx("span",{id:"clear-filters-description",className:"sr-only",children:g}),e[7]=g,e[8]=w):w=e[8];let y;e[9]!==n?(y=()=>n(null),e[9]=n,e[10]=y):y=e[10];const S=!c,C=c?`Reset ${d} active sort${d!==1?"s":""}`:"No sorting to reset";let _;e[11]===Symbol.for("react.memo_cache_sentinel")?(_=l.jsx(qe,{className:"mr-1 h-3 w-3","aria-hidden":"true"}),e[11]=_):_=e[11];let k;e[12]!==C||e[13]!==y||e[14]!==S?(k=l.jsxs(O,{size:"sm",variant:"outline",className:"h-8 text-xs",onClick:y,disabled:S,"aria-label":C,"aria-describedby":"reset-sorting-description",children:[_,"Reset sorting"]}),e[12]=C,e[13]=y,e[14]=S,e[15]=k):k=e[15];const I=c?`${d} column${d!==1?"s":""} currently sorted`:"No sorting currently applied";let j;e[16]!==I?(j=l.jsx("span",{id:"reset-sorting-description",className:"sr-only",children:I}),e[16]=I,e[17]=j):j=e[17];let E;e[18]!==i?(E=()=>i("table"),e[18]=i,e[19]=E):E=e[19];let L;e[20]===Symbol.for("react.memo_cache_sentinel")?(L=l.jsx(ye,{className:"mr-1 h-3 w-3","aria-hidden":"true"}),e[20]=L):L=e[20];let R;e[21]!==E?(R=l.jsxs(O,{size:"sm",variant:"outline",className:"h-8 text-xs",onClick:E,"aria-label":"Export entire table as CSV file",children:[L,"Export table"]}),e[21]=E,e[22]=R):R=e[22];let $;e[23]!==k||e[24]!==j||e[25]!==R||e[26]!==b||e[27]!==w?($=l.jsxs("div",{className:"hidden items-center gap-1 md:flex",role:"group","aria-label":"Table actions",children:[b,w,k,j,R]}),e[23]=k,e[24]=j,e[25]=R,e[26]=b,e[27]=w,e[28]=$):$=e[28];let z;e[29]!==s||e[30]!==i||e[31]!==r||e[32]!==n||e[33]!==a?(z=l.jsx("div",{className:"md:hidden",children:l.jsx(dl,{setFilters:r,setSorters:n,filters:s,sorters:a,handleExport:i})}),e[29]=s,e[30]=i,e[31]=r,e[32]=n,e[33]=a,e[34]=z):z=e[34];let F;return e[35]!==$||e[36]!==z?(F=l.jsxs(l.Fragment,{children:[$,z]}),e[35]=$,e[36]=z,e[37]=F):F=e[37],F}function fl(t){return t.setSorters}function hl(t){return t.setFilters}function pl(){const t=T.c(30),e=v(vl),s=v(Nl),a=v(wl),r=v(jl),n=re(yl),i=re(gl),o=re(bl),c=re(xl),{isEditing:u}=he();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsx(_a,{}),t[0]=d):d=t[0];let m;t[1]!==e||t[2]!==s?(m=l.jsx(ul,{filters:e,sorters:s}),t[1]=e,t[2]=s,t[3]=m):m=t[3];let f;t[4]!==a||t[5]!==r?(f=(a||r)&&l.jsxs("span",{className:"ml-2 flex items-center text-xs text-gray-500",role:"status","aria-live":"polite","aria-label":"Loading table data",children:[l.jsx(Se,{className:"mr-1 h-3 w-3 animate-spin","aria-hidden":"true"}),"Loading data"]}),t[4]=a,t[5]=r,t[6]=f):f=t[6];let p;t[7]!==m||t[8]!==f?(p=l.jsxs("div",{className:"flex items-center gap-1 border-b px-1 py-2",role:"toolbar","aria-label":"Table controls and actions",children:[d,m,f]}),t[7]=m,t[8]=f,t[9]=p):p=t[9];let x;t[10]===Symbol.for("react.memo_cache_sentinel")?(x=l.jsxs("div",{className:"flex h-full flex-col justify-between border-l",id:"dataSection",children:[l.jsx(Va,{}),l.jsx(tl,{})]}),t[10]=x):x=t[10];let b;t[11]!==n||t[12]!==o?(b=l.jsx(ue,{id:"dataPanel",defaultSize:n,onResize:o,children:x}),t[11]=n,t[12]=o,t[13]=b):b=t[13];let g;t[14]===Symbol.for("react.memo_cache_sentinel")?(g=l.jsx(ke,{className:"hidden md:flex",withHandle:!0}),t[14]=g):g=t[14];const w=`static md:relative md:block ${u?"block":"hidden"}`;let y;t[15]===Symbol.for("react.memo_cache_sentinel")?(y=l.jsx("div",{className:"h-full overflow-hidden",children:l.jsx("div",{className:"h-full overflow-y-auto",children:l.jsx(Oe,{})})}),t[15]=y):y=t[15];const S=`bg-background absolute top-0 right-0 z-40 h-full w-full ${u?"block":"hidden"}`;let C;t[16]===Symbol.for("react.memo_cache_sentinel")?(C=l.jsx("section",{className:"bg-primary/5 h-full",children:l.jsx(Ra,{})}),t[16]=C):C=t[16];let _;t[17]!==S?(_=l.jsx("div",{className:S,children:C}),t[17]=S,t[18]=_):_=t[18];let k;t[19]!==i||t[20]!==c||t[21]!==_||t[22]!==w?(k=l.jsxs(ue,{id:"schemaPanel",defaultSize:i,onResize:c,className:w,children:[y,_]}),t[19]=i,t[20]=c,t[21]=_,t[22]=w,t[23]=k):k=t[23];let I;t[24]!==k||t[25]!==b?(I=l.jsx("div",{className:"relative h-full overflow-hidden",children:l.jsxs(Le,{direction:"horizontal",className:"h-full",children:[b,g,k]})}),t[24]=k,t[25]=b,t[26]=I):I=t[26];let j;return t[27]!==I||t[28]!==p?(j=l.jsxs("div",{className:"flex h-full flex-col",children:[p,I]}),t[27]=I,t[28]=p,t[29]=j):j=t[29],j}function xl(t){return t.setSchemaPanelSize}function bl(t){return t.setDataPanelSize}function gl(t){return t.schemaPanelSize}function yl(t){return t.dataPanelSize}function jl(t){return t.isDatabaseLoading}function wl(t){return t.isDataLoading}function Nl(t){return t.sorters}function vl(t){return t.filters}function Sl(){const t=v(c=>c.geminiApiKey),e=v(c=>c.tablesSchema),s=v(c=>c.customQuery),a=v(c=>c.setCustomQuery),r=v(c=>c.setErrorMessage),n=v(c=>c.setIsAiLoading),i=v(c=>c.isAiLoading);return{generateSqlQuery:N.useCallback(async()=>{if(!t){r("Gemini API key not set.");return}if(!(!s||!s.startsWith("/ai "))){n(!0),r(null);try{let d=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`You are an expert SQLite assistant. Your role is to generate a single, valid SQLite query based on the provided database schema and user prompt.
                **Instructions:**
                1. **Analyze the Schema:** Carefully review the following table and index information to understand the database structure.
                2. **Interpret the Prompt:** Understand the user's request and translate it into a precise SQLite query.
                3. **Generate SQL Only:** Your output must be **only** the raw SQL query. Do not include any other text, explanations, or markdown formatting.
                4. **Use SQL Comments for Notes:** If you need to add any notes or clarifications, use SQL comments (e.g., -- your note here).

                **Database Schema:**
                \`\`\`json
                ${JSON.stringify(e,null,2)}
                \`\`\`
                **User Prompt:**
                ${s.substring(4)}`}]}]})})).json()).candidates[0].content.parts[0].text;const m=d.match(/```(?:sql|sqlite)\n([\s\S]*?)\n```/);m&&m[1]?d=m[1].trim():d=d.trim(),a(d)}catch(c){console.error("Error calling Gemini API:",c),r("Error calling Gemini API.")}finally{n(!1)}}},[t,s,e,a,r,n]),isAiLoading:i}}const Cl=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","ANALYZE","AND","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FOR","FOREIGN","FROM","FULL","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LEFT","LIKE","LIMIT","MATCH","NATURAL","NO","NOT","NOTNULL","NULL","OF","OFFSET","ON","OR","ORDER","OUTER","PLAN","PRAGMA","PRIMARY","QUERY","RAISE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RIGHT","ROLLBACK","ROW","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TO","TRANSACTION","TRIGGER","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WITH","WITHOUT"],El=["ABS","ACOS","ASIN","ATAN","CEIL","COS","EXP","FLOOR","HEX","LENGTH","LOG","LOWER","LTRIM","OCT","PI","POW","ROUND","SIGN","SIN","SQRT","TAN","TRIM","UPPER"];function Tl(){const{theme:t}=et(),e=v(d=>d.customQuery),s=v(d=>d.setCustomQuery),a=v(d=>d.tablesSchema),{tableNames:r,columnNames:n}=N.useMemo(()=>{const d=Object.keys(a),m=d.flatMap(f=>a[f].schema.map(p=>p.name));return{tableNames:d,columnNames:m}},[a]),i=N.useMemo(()=>[...Cl.map(d=>({label:d,type:"keyword"})),...El.map(d=>({label:d,type:"function"})),...r.map(d=>({label:d,type:"table"})),...n.map(d=>({label:d,type:"column"}))],[r,n]),o=N.useCallback(d=>{const m=d.matchBefore(/\w*/);return!m||m.from===m.to&&!d.explicit?null:{from:m.from,to:m.to,options:i}},[i]),c=N.useCallback(d=>{d!==e&&s(d)},[e,s]),u=N.useMemo(()=>e&&e.startsWith("/ai ")?[Fe({override:[o]})]:[Ds,zs(),Fe({override:[o]})],[o,e]);return l.jsx(Rs,{value:e,height:"100%",extensions:u,onChange:c,className:"h-full w-full",theme:t==="dark"?As:"light"})}const Re=36,Ge=120;function _l(){const t=T.c(42),e=v($l),s=N.useRef(null),a=N.useRef(null);let r;e:{if(!e){let E;t[0]===Symbol.for("react.memo_cache_sentinel")?(E=[],t[0]=E):E=t[0],r=E;break e}let j;if(t[1]!==e.columns||t[2]!==e.data){let E;t[4]!==e.data?(E=(L,R)=>{const $=Math.max(L.length,...e.data.slice(0,100).map(z=>String(z[R]||"").length));return Math.max(Ge,Math.min($*8+32,300))},t[4]=e.data,t[5]=E):E=t[5],j=e.columns.map(E),t[1]=e.columns,t[2]=e.data,t[3]=j}else j=t[3];r=j}const n=r;let i;t[6]!==n||t[7]!==e?(i=(j,E)=>{if(!e||!n[j])return Ge;const L=n[j];if(E){const R=n.reduce(kl,0);if(R<E){const z=(E-R)/e.columns.length;return L+z}}return L},t[6]=n,t[7]=e,t[8]=i):i=t[8];const o=i,c=Ll;let u;t[9]===Symbol.for("react.memo_cache_sentinel")?(u=j=>{const{scrollLeft:E}=j;s.current&&(s.current.scrollLeft=E)},t[9]=u):u=t[9];const d=u;let m;t[10]!==n||t[11]!==e?(m=j=>{if(!e||!n.length)return j;const E=n.reduce(Il,0);return Math.max(E,j)},t[10]=n,t[11]=e,t[12]=m):m=t[12];const f=m;let p;t[13]===Symbol.for("react.memo_cache_sentinel")?(p=()=>{a.current&&a.current.resetAfterColumnIndex(0)},t[13]=p):p=t[13];let x;t[14]!==e?(x=[e],t[14]=e,t[15]=x):x=t[15],N.useEffect(p,x);const b=N.useRef(0);let g;t[16]===Symbol.for("react.memo_cache_sentinel")?(g=j=>{b.current!==j&&a.current&&(b.current=j,setTimeout(()=>{a.current&&a.current.resetAfterColumnIndex(0)},0))},t[16]=g):g=t[16];const w=g;if(!e){let j;t[17]===Symbol.for("react.memo_cache_sentinel")?(j=l.jsx("div",{className:"bg-primary/10 rounded-full p-4",children:l.jsx(fe,{className:"text-primary/70 h-8 w-8"})}),t[17]=j):j=t[17];let E;return t[18]===Symbol.for("react.memo_cache_sentinel")?(E=l.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 p-8",children:[j,l.jsxs("div",{className:"text-center",children:[l.jsx("h3",{className:"mb-1 font-medium",children:"No Query Results"}),l.jsx("p",{className:"text-muted-foreground max-w-md text-sm",children:"Execute a SQL query to view the results here"})]})]}),t[18]=E):E=t[18],E}if(!e.data||e.data.length===0){let j,E;t[19]===Symbol.for("react.memo_cache_sentinel")?(j=l.jsx(Ne,{className:"text-primary/70 h-4 w-4"}),E=l.jsx("h3",{className:"text-sm font-medium",children:"Query Results"}),t[19]=j,t[20]=E):(j=t[19],E=t[20]);let L;t[21]!==e.columns.length?(L=l.jsx("div",{className:"bg-primary/5 border-b p-3",children:l.jsxs("div",{className:"flex items-center gap-2",children:[j,E,l.jsxs("span",{className:"bg-primary/10 rounded-full px-2 py-0.5 text-xs",children:[e.columns.length," columns"]})]})}),t[21]=e.columns.length,t[22]=L):L=t[22];let R;t[23]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[l.jsx("div",{className:"bg-primary/5 mb-4 rounded-full p-4",children:l.jsx(Ne,{className:"text-primary/50 h-6 w-6"})}),l.jsx("p",{className:"text-md mb-1 font-medium",children:"Query returned no results"}),l.jsx("p",{className:"text-muted-foreground text-sm",children:"Your query executed successfully but returned no data"})]}),t[23]=R):R=t[23];let $;return t[24]!==L?($=l.jsxs("div",{className:"h-full shadow-sm",children:[L,R]}),t[24]=L,t[25]=$):$=t[25],$}let y;t[26]===Symbol.for("react.memo_cache_sentinel")?(y=l.jsxs("div",{className:"flex items-center gap-2",children:[l.jsx(Ne,{className:"text-primary/70 h-4 w-4"}),l.jsx(ae,{className:"mr-2 text-sm font-medium text-nowrap",children:"Query Results"})]}),t[26]=y):y=t[26];let S;t[27]!==e.data.length?(S=l.jsxs(ae,{className:"bg-primary/10 rounded-full px-2 py-0.5 text-xs text-nowrap",children:[e.data.length," rows"]}),t[27]=e.data.length,t[28]=S):S=t[28];let C;t[29]!==e.columns.length?(C=l.jsxs(ae,{className:"bg-primary/10 rounded-full px-2 py-0.5 text-xs text-nowrap",children:[e.columns.length," columns"]}),t[29]=e.columns.length,t[30]=C):C=t[30];let _;t[31]!==S||t[32]!==C?(_=l.jsx("div",{className:"bg-primary/5 flex-shrink-0 border-b p-3",children:l.jsxs("div",{className:"flex items-center justify-between",children:[y,l.jsxs("div",{className:"flex items-center gap-2",children:[S,C]})]})}),t[31]=S,t[32]=C,t[33]=_):_=t[33];let k;t[34]!==e.columns||t[35]!==e.data||t[36]!==o||t[37]!==f?(k=l.jsx("div",{className:"h-0 min-h-0 flex-grow overflow-hidden",children:l.jsx(Ps,{children:j=>{const{height:E,width:L}=j,R=f(L);return w(L),l.jsxs("div",{style:{height:E,width:L},className:"flex flex-col",children:[l.jsx("div",{ref:s,className:"bg-primary/5 scrollbar-hide overflow-x-auto overflow-y-hidden border-b",style:{height:Re,width:L},children:l.jsx("div",{className:"flex",style:{width:R},children:e.columns.map(($,z)=>l.jsx("div",{className:"border-primary/10 flex flex-shrink-0 items-center border-r p-2 text-xs font-medium",style:{width:o(z,L)},children:l.jsx(ae,{className:"text-foreground truncate capitalize",children:$})},`${$}-${z}`))})}),l.jsx(Os,{ref:a,height:E-Re,width:L,columnCount:e.columns.length,rowCount:e.data.length,columnWidth:$=>o($,L),rowHeight:c,onScroll:d,overscanColumnCount:2,overscanRowCount:5,children:$=>{const{columnIndex:z,rowIndex:F,style:M}=$,K=e.data[F][z];return l.jsx("div",{style:M,className:"border-primary/5 hover:bg-primary/5 flex items-center border-t border-r p-2",children:K!==null?l.jsx(ae,{className:"truncate text-xs",children:String(K)}):l.jsx($e,{children:"NULL"})})}},`grid-${e.columns.join("-")}`)]})}})}),t[34]=e.columns,t[35]=e.data,t[36]=o,t[37]=f,t[38]=k):k=t[38];let I;return t[39]!==_||t[40]!==k?(I=l.jsxs("div",{className:"flex h-full w-full flex-col shadow-sm",children:[_,k]}),t[39]=_,t[40]=k,t[41]=I):I=t[41],I}function Il(t,e){return t+e}function Ll(){return Re}function kl(t,e){return t+e}function $l(t){return t.customQueryObject}function Rl(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx(Pt,{"data-slot":"label",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function nt(t){const e=T.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let a;return e[2]!==s?(a=l.jsx(Mt,{"data-slot":"dialog",...s}),e[2]=s,e[3]=a):a=e[3],a}function Al(t){const e=T.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let a;return e[2]!==s?(a=l.jsx(Kt,{"data-slot":"dialog-portal",...s}),e[2]=s,e[3]=a):a=e[3],a}function Dl(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx(Gt,{"data-slot":"dialog-overlay",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function it(t){const e=T.c(12);let s,a,r;e[0]!==t?({className:a,children:s,...r}=t,e[0]=t,e[1]=s,e[2]=a,e[3]=r):(s=e[1],a=e[2],r=e[3]);let n;e[4]===Symbol.for("react.memo_cache_sentinel")?(n=l.jsx(Dl,{}),e[4]=n):n=e[4];let i;e[5]!==a?(i=P("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",a),e[5]=a,e[6]=i):i=e[6];let o;e[7]===Symbol.for("react.memo_cache_sentinel")?(o=l.jsxs(Qt,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[l.jsx(Ye,{}),l.jsx("span",{className:"sr-only",children:"Close"})]}),e[7]=o):o=e[7];let c;return e[8]!==s||e[9]!==r||e[10]!==i?(c=l.jsxs(Al,{"data-slot":"dialog-portal",children:[n,l.jsxs(Ft,{"data-slot":"dialog-content",className:i,...r,children:[s,o]})]}),e[8]=s,e[9]=r,e[10]=i,e[11]=c):c=e[11],c}function ot(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("flex flex-col gap-2 text-center sm:text-left",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx("div",{"data-slot":"dialog-header",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function ct(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx("div",{"data-slot":"dialog-footer",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function dt(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("text-lg leading-none font-semibold",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx(Bt,{"data-slot":"dialog-title",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function mt(t){const e=T.c(8);let s,a;e[0]!==t?({className:s,...a}=t,e[0]=t,e[1]=s,e[2]=a):(s=e[1],a=e[2]);let r;e[3]!==s?(r=P("text-muted-foreground text-sm",s),e[3]=s,e[4]=r):r=e[4];let n;return e[5]!==a||e[6]!==r?(n=l.jsx(Ut,{"data-slot":"dialog-description",className:r,...a}),e[5]=a,e[6]=r,e[7]=n):n=e[7],n}function zl(t){const e=T.c(25),{isOpen:s,onClose:a}=t,r=v(Pl),[n,i]=N.useState(r||""),o=v(Ol);let c,u;e[0]!==r||e[1]!==s?(c=()=>{s&&i(r||"")},u=[s,r],e[0]=r,e[1]=s,e[2]=c,e[3]=u):(c=e[2],u=e[3]),N.useEffect(c,u);let d;e[4]!==n||e[5]!==a||e[6]!==o?(d=()=>{o(n),a()},e[4]=n,e[5]=a,e[6]=o,e[7]=d):d=e[7];const m=d;let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f=l.jsxs(ot,{children:[l.jsx(dt,{children:"Set Gemini API Key"}),l.jsx(mt,{children:"You can get your API key from Google AI Studio."})]}),e[8]=f):f=e[8];let p;e[9]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(Rl,{htmlFor:"api-key",className:"text-right",children:"API Key"}),e[9]=p):p=e[9];let x;e[10]===Symbol.for("react.memo_cache_sentinel")?(x=_=>i(_.target.value),e[10]=x):x=e[10];let b;e[11]!==n?(b=l.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-2",children:[p,l.jsx(je,{id:"api-key",value:n,onChange:x,className:"h-10 text-lg"})]}),e[11]=n,e[12]=b):b=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=l.jsxs("p",{className:"text-muted-foreground text-sm",children:["To use AI, type"," ",l.jsx("code",{className:"bg-muted relative rounded px-2 py-1 font-mono text-sm font-semibold",children:"/ai"})," ","followed by your prompt in the SQL editor."]}),e[13]=g):g=e[13];let w;e[14]!==b?(w=l.jsxs("div",{className:"grid gap-2 py-4",children:[b,g]}),e[14]=b,e[15]=w):w=e[15];let y;e[16]!==m?(y=l.jsx(ct,{children:l.jsx(O,{onClick:m,children:"Save"})}),e[16]=m,e[17]=y):y=e[17];let S;e[18]!==y||e[19]!==w?(S=l.jsxs(it,{children:[f,w,y]}),e[18]=y,e[19]=w,e[20]=S):S=e[20];let C;return e[21]!==s||e[22]!==a||e[23]!==S?(C=l.jsx(nt,{open:s,onOpenChange:a,children:S}),e[21]=s,e[22]=a,e[23]=S,e[24]=C):C=e[24],C}function Ol(t){return t.setGeminiApiKey}function Pl(t){return t.geminiApiKey}function Ml(){const t=T.c(58),e=v(ql),s=v(Wl),a=v(Vl),r=v(Hl),n=re(Gl),i=re(Ql),o=re(Kl),c=re(Ul),[u,d]=N.useState(!1),m=v(Bl),f=v(Fl),{handleQueryExecute:p,handleExport:x}=ie(),{generateSqlQuery:b,isAiLoading:g}=Sl();let w;t[0]!==f||t[1]!==b||t[2]!==p?(w=()=>{f&&f.startsWith("/ai ")?b():p()},t[0]=f,t[1]=b,t[2]=p,t[3]=w):w=t[3];const y=w;let S;t[4]!==s?(S=()=>{s(null)},t[4]=s,t[5]=S):S=t[5];const C=S;let _;t[6]===Symbol.for("react.memo_cache_sentinel")?(_=()=>{d(!0)},t[6]=_):_=t[6];const k=_;let I;t[7]!==g?(I=g?l.jsx(Se,{className:"mr-1 h-3 w-3 animate-spin"}):l.jsx(Ts,{className:"mr-1 h-3 w-3"}),t[7]=g,t[8]=I):I=t[8];let j;t[9]!==y||t[10]!==g||t[11]!==I?(j=l.jsxs(O,{size:"sm",variant:"outline",className:"w-[150px] text-xs",onClick:y,disabled:g,title:"Execute SQL",children:[I,"Execute SQL"]}),t[9]=y,t[10]=g,t[11]=I,t[12]=j):j=t[12];let E;t[13]!==x?(E=()=>x("custom"),t[13]=x,t[14]=E):E=t[14];const L=!(m!=null&&m.data);let R;t[15]===Symbol.for("react.memo_cache_sentinel")?(R=l.jsx(ye,{className:"mr-1 h-3 w-3"}),t[15]=R):R=t[15];let $;t[16]!==E||t[17]!==L?($=l.jsxs(O,{onClick:E,size:"sm",variant:"outline",className:"text-xs",disabled:L,children:[R,"Export data"]}),t[16]=E,t[17]=L,t[18]=$):$=t[18];let z;t[19]===Symbol.for("react.memo_cache_sentinel")?(z=l.jsxs(O,{size:"sm",variant:"outline",className:"text-xs",onClick:k,children:[l.jsx(_s,{className:"mr-1 h-3 w-3"}),"Gemini"]}),t[19]=z):z=t[19];let F;t[20]!==a||t[21]!==r?(F=(a||r)&&l.jsxs("span",{className:"ml-2 flex items-center text-xs text-gray-500",children:[l.jsx(Se,{className:"mr-1 h-3 w-3 animate-spin"}),"Loading data"]}),t[20]=a,t[21]=r,t[22]=F):F=t[22];let M;t[23]!==F||t[24]!==j||t[25]!==$?(M=l.jsxs("div",{className:"flex items-center gap-1 border-b px-1 py-2",children:[j,$,z,F]}),t[23]=F,t[24]=j,t[25]=$,t[26]=M):M=t[26];let K;t[27]!==e||t[28]!==C?(K=e&&l.jsxs("div",{className:"flex items-center justify-between p-2",children:[l.jsx("div",{className:"text-sm text-red-400",children:e}),l.jsx(O,{size:"sm",variant:"outline",className:"text-xs",onClick:C,children:l.jsx(Ye,{className:"h-3 w-3"})})]}),t[27]=e,t[28]=C,t[29]=K):K=t[29];let q;t[30]===Symbol.for("react.memo_cache_sentinel")?(q=l.jsx(Tl,{}),t[30]=q):q=t[30];let H;t[31]!==K?(H=l.jsxs(ue,{defaultSize:25,children:[K,q]}),t[31]=K,t[32]=H):H=t[32];let ee;t[33]===Symbol.for("react.memo_cache_sentinel")?(ee=l.jsx(ke,{withHandle:!0}),t[33]=ee):ee=t[33];let Z;t[34]===Symbol.for("react.memo_cache_sentinel")?(Z=l.jsx(ue,{defaultSize:75,children:l.jsx("div",{className:"flex h-full flex-col justify-between border",children:l.jsx(_l,{})})}),t[34]=Z):Z=t[34];let Y;t[35]!==H?(Y=l.jsxs(Le,{direction:"vertical",children:[H,ee,Z]}),t[35]=H,t[36]=Y):Y=t[36];let X;t[37]!==n||t[38]!==o||t[39]!==Y?(X=l.jsx(ue,{defaultSize:n,onResize:o,children:Y}),t[37]=n,t[38]=o,t[39]=Y,t[40]=X):X=t[40];let Q;t[41]===Symbol.for("react.memo_cache_sentinel")?(Q=l.jsx(ke,{className:"hidden md:flex",withHandle:!0}),t[41]=Q):Q=t[41];let V;t[42]===Symbol.for("react.memo_cache_sentinel")?(V=l.jsx("div",{className:"h-full overflow-hidden",children:l.jsx("div",{className:"h-full overflow-y-auto",children:l.jsx(Oe,{})})}),t[42]=V):V=t[42];let B;t[43]!==i||t[44]!==c?(B=l.jsx(ue,{defaultSize:i,onResize:c,className:"hidden md:block",children:V}),t[43]=i,t[44]=c,t[45]=B):B=t[45];let W;t[46]!==X||t[47]!==B?(W=l.jsxs(Le,{direction:"horizontal",className:"h-full",children:[X,Q,B]}),t[46]=X,t[47]=B,t[48]=W):W=t[48];let le;t[49]===Symbol.for("react.memo_cache_sentinel")?(le=()=>d(!1),t[49]=le):le=t[49];let h;t[50]!==u?(h=l.jsx(zl,{isOpen:u,onClose:le}),t[50]=u,t[51]=h):h=t[51];let A;t[52]!==W||t[53]!==h?(A=l.jsxs("div",{className:"h-full overflow-hidden",children:[W,h]}),t[52]=W,t[53]=h,t[54]=A):A=t[54];let D;return t[55]!==M||t[56]!==A?(D=l.jsxs("div",{className:"flex h-full flex-col",children:[M,A]}),t[55]=M,t[56]=A,t[57]=D):D=t[57],D}function Fl(t){return t.customQuery}function Bl(t){return t.customQueryObject}function Ul(t){return t.setSchemaPanelSize}function Kl(t){return t.setDataPanelSize}function Ql(t){return t.schemaPanelSize}function Gl(t){return t.dataPanelSize}function Hl(t){return t.isDatabaseLoading}function Vl(t){return t.isDataLoading}function Wl(t){return t.setErrorMessage}function ql(t){return t.errorMessage}const Yl=()=>{const{handleFileUpload:t}=ie(),[e,s]=N.useState(!1),a=N.useCallback(i=>{var o;i.preventDefault(),i.stopPropagation(),(o=i.dataTransfer)!=null&&o.types&&(i.dataTransfer.types.includes("Files")||i.dataTransfer.types.includes("application/x-moz-file"))&&s(!0)},[]),r=N.useCallback(i=>{i.preventDefault(),i.stopPropagation(),i.target===document.documentElement&&s(!1)},[]),n=N.useCallback(i=>{var o,c,u,d,m;i.preventDefault(),i.stopPropagation(),s(!1);try{if(!((c=(o=i.dataTransfer)==null?void 0:o.types)!=null&&c.includes("Files"))&&!((d=(u=i.dataTransfer)==null?void 0:u.types)!=null&&d.includes("application/x-moz-file")))return;const f=(m=i.dataTransfer)==null?void 0:m.files;if(!f||f.length===0){G("No file detected","error");return}const p=f[0];t(p)}catch(f){const p=f instanceof Error?f.message:"Failed to process file";G(`Failed to process file: ${p}`,"error")}},[t]);return N.useEffect(()=>(window.addEventListener("dragover",a),window.addEventListener("dragleave",r),window.addEventListener("drop",n),()=>{window.removeEventListener("dragover",a),window.removeEventListener("dragleave",r),window.removeEventListener("drop",n)}),[a,r,n]),{isDragging:e}};function Xl(t){const e=T.c(5),{children:s}=t,{isDragging:a}=Yl();let r;e[0]!==a?(r=a&&l.jsx("section",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-all",children:l.jsxs("div",{className:"border-primary/60 bg-background/95 animate-in fade-in zoom-in-95 flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 shadow-lg transition-transform duration-200",children:[l.jsx("div",{className:"bg-primary/10 mb-6 flex items-center justify-center rounded-full p-5",children:l.jsx(fe,{className:"text-primary h-12 w-12"})}),l.jsx("h3",{className:"mb-2 text-xl font-medium",children:"Drop SQLite Database"}),l.jsx("p",{className:"text-muted-foreground mb-4 text-center text-sm",children:"Release to load your database file"})]})}),e[0]=a,e[1]=r):r=e[1];let n;return e[2]!==s||e[3]!==r?(n=l.jsxs(l.Fragment,{children:[s,r]}),e[2]=s,e[3]=r,e[4]=n):n=e[4],n}function Jl(){const{handleFileUpload:t}=ie(),e=v(p=>p.setIsDatabaseLoading),[s,a]=N.useState(null),[r,n]=N.useState(null),[i,o]=N.useState(!1),c=N.useRef(!1),u=N.useRef(!1),d=N.useCallback(p=>{try{return new URL(p),!0}catch{return!1}},[]),m=N.useCallback(async(p,x=!1)=>{if(u.current)return console.log("Fetch already in progress, ignoring duplicate call"),!1;if(u.current=!0,!d(p)){const b="Invalid URL format";return a(b),G(b,"error"),u.current=!1,!1}try{e(!0);const b=x?`https://corsproxy.io/?url=${encodeURIComponent(p)}`:p,g=await fetch(b,{method:"GET"});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);G(x?"Retrieving database with CORS proxy, please wait":"Retrieving database, please wait","info");const w=await g.blob();if(w.size<100)throw new Error("The downloaded file seems too small to be a valid SQLite database");const y=new File([w],"database.sqlite");return t(y),G("Database loaded successfully","success"),a(null),!0}catch(b){const g=b instanceof Error?b.message:String(b);return a(g),x?G(`Failed to load with CORS proxy: ${g}`,"error"):(n(p),o(!0)),!1}finally{e(!1),u.current=!1}},[t,e]);N.useEffect(()=>{if(c.current)return;c.current=!0;const p=new AbortController;return(async()=>{const g=new URLSearchParams(window.location.search).get("url");if(g){const w=decodeURIComponent(g);try{await m(w)}catch(y){console.error("Initial fetch error:",y)}}})(),()=>{p.abort()}},[m]);const f=N.useCallback(()=>{r&&(m(r,!0),o(!1))},[r,m]);return l.jsx(nt,{open:i,onOpenChange:o,children:l.jsxs(it,{className:"sm:max-w-md",children:[l.jsxs(ot,{children:[l.jsx(dt,{className:"text-xl font-semibold",children:"CORS Error Detected"}),l.jsx(mt,{className:"text-muted-foreground pt-2 text-sm",children:"Something went wrong while loading the database. This might be due to Cross-Origin Resource Sharing (CORS) restrictions."})]}),l.jsxs("div",{className:"mt-4 space-y-4",children:[l.jsxs("p",{className:"text-sm",children:["Would you like to try using a CORS proxy?"," ",l.jsx("span",{className:"font-medium text-yellow-500 dark:text-yellow-400",children:"Note that this will send your database request through a third-party service."})]}),s&&l.jsx("div",{className:"bg-destructive/10 dark:bg-destructive/20 rounded-md p-3 text-red-400",children:l.jsxs("p",{className:"text-xs",children:["Error details: ",s]})})]}),l.jsxs(ct,{className:"mt-6 flex justify-end gap-3",children:[l.jsx(O,{variant:"outline",onClick:()=>{o(!1),a(null)},children:"Cancel"}),l.jsx(O,{variant:"default",onClick:f,children:"Use CORS Proxy"})]})]})})}function we(t){const e=T.c(6),{href:s,children:a,className:r}=t;let n;e[0]!==r?(n=P("sr-only focus:not-sr-only focus:absolute focus:top-2 focus:left-2 focus:z-50","bg-primary text-primary-foreground rounded-md px-4 py-2 font-medium","focus:ring-ring focus:ring-2 focus:ring-offset-2 focus:outline-none","transition-all duration-200",r),e[0]=r,e[1]=n):n=e[1];let i;return e[2]!==a||e[3]!==s||e[4]!==n?(i=l.jsx("a",{href:s,className:n,children:a}),e[2]=a,e[3]=s,e[4]=n,e[5]=i):i=e[5],i}function Zl(){const t=T.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=l.jsxs("div",{className:"sr-only focus-within:not-sr-only",children:[l.jsx(we,{href:"#main-content",children:"Skip to main content"}),l.jsx(we,{href:"#tableHeader",children:"Skip to table header"}),l.jsx(we,{href:"#paginationControls",children:"Skip to pagination"}),l.jsx(we,{href:"#dataSection",children:"Skip to data section"})]}),t[0]=e):e=t[0],e}function er(){const t=T.c(9),[e,s]=N.useState(""),a=v(rr),r=v(lr),n=v(ar),i=v(sr),o=v(tr);let c,u;if(t[0]!==n||t[1]!==i||t[2]!==r||t[3]!==a||t[4]!==o?(c=()=>{if(a)s("Loading database, please wait...");else if(r)s("Loading table data...");else if(n&&i){const m=i.length;s(`Loaded ${m} rows from ${n} table. Total rows: ${o||0}`)}else n&&!(i!=null&&i.length)?s(`${n} table is empty`):s("")},u=[a,r,n,i,o],t[0]=n,t[1]=i,t[2]=r,t[3]=a,t[4]=o,t[5]=c,t[6]=u):(c=t[5],u=t[6]),N.useEffect(c,u),!e)return null;let d;return t[7]!==e?(d=l.jsx("div",{role:"status","aria-live":"polite","aria-atomic":"true",className:"sr-only",id:"live-region",children:e}),t[7]=e,t[8]=d):d=t[8],d}function tr(t){return t.maxSize}function sr(t){return t.data}function ar(t){return t.currentTable}function lr(t){return t.isDataLoading}function rr(t){return t.isDatabaseLoading}function nr(){const t=T.c(32),e=v(ir);let s,a;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=l.jsx(Zl,{}),a=l.jsx(Jl,{}),t[0]=s,t[1]=a):(s=t[0],a=t[1]);let r;t[2]===Symbol.for("react.memo_cache_sentinel")?(r=l.jsx(Js,{}),t[2]=r):r=t[2];const n=e?"loading-status":void 0;let i,o;t[3]===Symbol.for("react.memo_cache_sentinel")?(i=l.jsx(Ne,{className:"hidden h-4 w-4 md:block","aria-hidden":"true"}),o=l.jsx("span",{children:"Browse Data"}),t[3]=i,t[4]=o):(i=t[3],o=t[4]);let c;t[5]!==e||t[6]!==n?(c=l.jsxs(Ee,{id:"data",disabled:e,value:"data",className:"data-[state=active]: data-[state=active]:border-primary h-8 rounded-none text-xs","aria-label":"Browse and filter database table data","aria-describedby":n,children:[i,o]},"data"),t[5]=e,t[6]=n,t[7]=c):c=t[7];const u=e?"loading-status":void 0;let d;t[8]===Symbol.for("react.memo_cache_sentinel")?(d=l.jsx(Is,{className:"hidden h-4 w-4 md:block","aria-hidden":"true"}),t[8]=d):d=t[8];let m;t[9]!==e||t[10]!==u?(m=l.jsxs(Ee,{disabled:e,id:"execute",value:"execute",className:"data-[state=active]: data-[state=active]:border-primary h-8 rounded-none text-xs","aria-label":"Execute custom SQL queries","aria-describedby":u,children:[d,"Execute SQL"]},"execute"),t[9]=e,t[10]=u,t[11]=m):m=t[11];const f=e?"loading-status":void 0;let p;t[12]===Symbol.for("react.memo_cache_sentinel")?(p=l.jsx(fe,{className:"hidden h-4 w-4 md:block","aria-hidden":"true"}),t[12]=p):p=t[12];let x;t[13]!==e||t[14]!==f?(x=l.jsxs(Ee,{id:"structure",disabled:e,value:"structure",className:"data-[state=active]: data-[state=active]:border-primary h-8 rounded-none text-xs","aria-label":"View database schema and table structure","aria-describedby":f,children:[p,"Database Structure"]},"structure"),t[13]=e,t[14]=f,t[15]=x):x=t[15];let b;t[16]!==x||t[17]!==c||t[18]!==m?(b=l.jsxs(Ws,{className:"bg-primary/5 h-9 w-full justify-start rounded-none border-b",role:"tablist","aria-label":"Database interface navigation",children:[c,m,x]}),t[16]=x,t[17]=c,t[18]=m,t[19]=b):b=t[19];let g;t[20]!==e?(g=l.jsx(Te,{value:"data",className:"m-0 h-full border-none p-0",role:"tabpanel","aria-labelledby":"data",children:e?l.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",role:"status","aria-live":"polite",children:[l.jsx("div",{className:"bg-primary/10 rounded-full p-4",children:l.jsx(Se,{className:"text-primary h-8 w-8 animate-spin","aria-hidden":"true"})}),l.jsxs("div",{className:"flex flex-col items-center",id:"loading-status",children:[l.jsx("span",{className:"text-xl font-medium",children:"Loading Database"}),l.jsx("span",{className:"text-muted-foreground text-sm",children:"Please wait while the database is initializing"})]})]}):l.jsx(pl,{})}),t[20]=e,t[21]=g):g=t[21];let w;t[22]===Symbol.for("react.memo_cache_sentinel")?(w=l.jsx(Te,{value:"structure",className:"m-0 h-full border-none p-0",role:"tabpanel","aria-labelledby":"structure",children:l.jsx(ja,{})}),t[22]=w):w=t[22];let y;t[23]===Symbol.for("react.memo_cache_sentinel")?(y=l.jsx(Te,{value:"execute",className:"m-0 h-full border border-none p-0",role:"tabpanel","aria-labelledby":"execute",children:l.jsx(Ml,{})}),t[23]=y):y=t[23];let S;t[24]!==g?(S=l.jsxs("section",{className:"max-h-custom-dvh flex-1 overflow-hidden",children:[g,w,y]}),t[24]=g,t[25]=S):S=t[25];let C;t[26]!==b||t[27]!==S?(C=l.jsxs("main",{className:"bg-primary/5 flex h-screen flex-col overflow-hidden",role:"main",id:"main-content",children:[r,l.jsxs(Vs,{defaultValue:"data",className:"flex flex-1 flex-col",children:[b,S]})]}),t[26]=b,t[27]=S,t[28]=C):C=t[28];let _;t[29]===Symbol.for("react.memo_cache_sentinel")?(_=l.jsx(er,{}),t[29]=_):_=t[29];let k;return t[30]!==C?(k=l.jsxs(l.Fragment,{children:[s,a,l.jsxs(Xl,{children:[C,_]})]}),t[30]=C,t[31]=k):k=t[31],k}function ir(t){return t.isDatabaseLoading}const or=async()=>{try{const{initializeApiKey:t}=v.getState();await t()}catch(t){console.error("App: Failed to initialize API key:",t)}};or();ht.createRoot(document.getElementById("root")).render(l.jsx(N.StrictMode,{children:l.jsx(Us,{children:l.jsxs(Qs,{defaultTheme:"dark",storageKey:"ui-theme",children:[l.jsx(Hs,{children:l.jsx(Gs,{children:l.jsx(nr,{})})}),l.jsx(Ms,{})]})})}));
