import{b as mt,a as ft,c as j}from"./@babel-BTbEZfjA.js";import{m as $}from"./memoize-one-CcMeOnPo.js";import{r as N}from"./react-B2RL9x2s.js";var ht=typeof performance=="object"&&typeof performance.now=="function",Z=ht?function(){return performance.now()}:function(){return Date.now()};function J(l){cancelAnimationFrame(l.id)}function vt(l,e){var o=Z();function r(){Z()-o>=e?l.call(null):i.id=requestAnimationFrame(r)}var i={id:requestAnimationFrame(r)};return i}var B=-1;function pt(l){if(l===void 0&&(l=!1),B===-1||l){var e=document.createElement("div"),o=e.style;o.width="50px",o.height="50px",o.overflow="scroll",document.body.appendChild(e),B=e.offsetWidth-e.clientWidth,document.body.removeChild(e)}return B}var W=null;function Q(l){if(l===void 0&&(l=!1),W===null||l){var e=document.createElement("div"),o=e.style;o.width="50px",o.height="50px",o.overflow="scroll",o.direction="rtl";var r=document.createElement("div"),i=r.style;return i.width="100px",i.height="100px",e.appendChild(r),document.body.appendChild(e),e.scrollLeft>0?W="positive-descending":(e.scrollLeft=1,e.scrollLeft===0?W="negative":W="positive-ascending"),document.body.removeChild(e),W}return W}var gt=150,It=function(e){var o=e.columnIndex;e.data;var r=e.rowIndex;return r+":"+o};function wt(l){var e,o=l.getColumnOffset,r=l.getColumnStartIndexForOffset,i=l.getColumnStopIndexForStartIndex,c=l.getColumnWidth,n=l.getEstimatedTotalHeight,u=l.getEstimatedTotalWidth,f=l.getOffsetForColumnAndAlignment,I=l.getOffsetForRowAndAlignment,h=l.getRowHeight,R=l.getRowOffset,T=l.getRowStartIndexForOffset,nt=l.getRowStopIndexForStartIndex,at=l.initInstanceProps,U=l.shouldResetStyleCacheOnItemSizeChange,it=l.validateProps;return e=function(K){mt(D,K);function D(O){var t;return t=K.call(this,O)||this,t._instanceProps=at(t.props,j(t)),t._resetIsScrollingTimeoutId=null,t._outerRef=void 0,t.state={instance:j(t),isScrolling:!1,horizontalScrollDirection:"forward",scrollLeft:typeof t.props.initialScrollLeft=="number"?t.props.initialScrollLeft:0,scrollTop:typeof t.props.initialScrollTop=="number"?t.props.initialScrollTop:0,scrollUpdateWasRequested:!1,verticalScrollDirection:"forward"},t._callOnItemsRendered=void 0,t._callOnItemsRendered=$(function(s,a,m,v,d,p,w,M){return t.props.onItemsRendered({overscanColumnStartIndex:s,overscanColumnStopIndex:a,overscanRowStartIndex:m,overscanRowStopIndex:v,visibleColumnStartIndex:d,visibleColumnStopIndex:p,visibleRowStartIndex:w,visibleRowStopIndex:M})}),t._callOnScroll=void 0,t._callOnScroll=$(function(s,a,m,v,d){return t.props.onScroll({horizontalScrollDirection:m,scrollLeft:s,scrollTop:a,verticalScrollDirection:v,scrollUpdateWasRequested:d})}),t._getItemStyle=void 0,t._getItemStyle=function(s,a){var m=t.props,v=m.columnWidth,d=m.direction,p=m.rowHeight,w=t._getItemStyleCache(U&&v,U&&d,U&&p),M=s+":"+a,S;if(w.hasOwnProperty(M))S=w[M];else{var C=o(t.props,a,t._instanceProps),g=d==="rtl";w[M]=S={position:"absolute",left:g?void 0:C,right:g?C:void 0,top:R(t.props,s,t._instanceProps),height:h(t.props,s,t._instanceProps),width:c(t.props,a,t._instanceProps)}}return S},t._getItemStyleCache=void 0,t._getItemStyleCache=$(function(s,a,m){return{}}),t._onScroll=function(s){var a=s.currentTarget,m=a.clientHeight,v=a.clientWidth,d=a.scrollLeft,p=a.scrollTop,w=a.scrollHeight,M=a.scrollWidth;t.setState(function(S){if(S.scrollLeft===d&&S.scrollTop===p)return null;var C=t.props.direction,g=d;if(C==="rtl")switch(Q()){case"negative":g=-d;break;case"positive-descending":g=M-v-d;break}g=Math.max(0,Math.min(g,M-v));var x=Math.max(0,Math.min(p,w-m));return{isScrolling:!0,horizontalScrollDirection:S.scrollLeft<d?"forward":"backward",scrollLeft:g,scrollTop:x,verticalScrollDirection:S.scrollTop<p?"forward":"backward",scrollUpdateWasRequested:!1}},t._resetIsScrollingDebounced)},t._outerRefSetter=function(s){var a=t.props.outerRef;t._outerRef=s,typeof a=="function"?a(s):a!=null&&typeof a=="object"&&a.hasOwnProperty("current")&&(a.current=s)},t._resetIsScrollingDebounced=function(){t._resetIsScrollingTimeoutId!==null&&J(t._resetIsScrollingTimeoutId),t._resetIsScrollingTimeoutId=vt(t._resetIsScrolling,gt)},t._resetIsScrolling=function(){t._resetIsScrollingTimeoutId=null,t.setState({isScrolling:!1},function(){t._getItemStyleCache(-1)})},t}D.getDerivedStateFromProps=function(t,s){return St(t,s),it(t),null};var _=D.prototype;return _.scrollTo=function(t){var s=t.scrollLeft,a=t.scrollTop;s!==void 0&&(s=Math.max(0,s)),a!==void 0&&(a=Math.max(0,a)),this.setState(function(m){return s===void 0&&(s=m.scrollLeft),a===void 0&&(a=m.scrollTop),m.scrollLeft===s&&m.scrollTop===a?null:{horizontalScrollDirection:m.scrollLeft<s?"forward":"backward",scrollLeft:s,scrollTop:a,scrollUpdateWasRequested:!0,verticalScrollDirection:m.scrollTop<a?"forward":"backward"}},this._resetIsScrollingDebounced)},_.scrollToItem=function(t){var s=t.align,a=s===void 0?"auto":s,m=t.columnIndex,v=t.rowIndex,d=this.props,p=d.columnCount,w=d.height,M=d.rowCount,S=d.width,C=this.state,g=C.scrollLeft,x=C.scrollTop,y=pt();m!==void 0&&(m=Math.max(0,Math.min(m,p-1))),v!==void 0&&(v=Math.max(0,Math.min(v,M-1)));var L=n(this.props,this._instanceProps),b=u(this.props,this._instanceProps),F=b>S?y:0,A=L>w?y:0;this.scrollTo({scrollLeft:m!==void 0?f(this.props,m,a,g,this._instanceProps,A):g,scrollTop:v!==void 0?I(this.props,v,a,x,this._instanceProps,F):x})},_.componentDidMount=function(){var t=this.props,s=t.initialScrollLeft,a=t.initialScrollTop;if(this._outerRef!=null){var m=this._outerRef;typeof s=="number"&&(m.scrollLeft=s),typeof a=="number"&&(m.scrollTop=a)}this._callPropsCallbacks()},_.componentDidUpdate=function(){var t=this.props.direction,s=this.state,a=s.scrollLeft,m=s.scrollTop,v=s.scrollUpdateWasRequested;if(v&&this._outerRef!=null){var d=this._outerRef;if(t==="rtl")switch(Q()){case"negative":d.scrollLeft=-a;break;case"positive-ascending":d.scrollLeft=a;break;default:var p=d.clientWidth,w=d.scrollWidth;d.scrollLeft=w-p-a;break}else d.scrollLeft=Math.max(0,a);d.scrollTop=Math.max(0,m)}this._callPropsCallbacks()},_.componentWillUnmount=function(){this._resetIsScrollingTimeoutId!==null&&J(this._resetIsScrollingTimeoutId)},_.render=function(){var t=this.props,s=t.children,a=t.className,m=t.columnCount,v=t.direction,d=t.height,p=t.innerRef,w=t.innerElementType,M=t.innerTagName,S=t.itemData,C=t.itemKey,g=C===void 0?It:C,x=t.outerElementType,y=t.outerTagName,L=t.rowCount,b=t.style,F=t.useIsScrolling,A=t.width,k=this.state.isScrolling,P=this._getHorizontalRangeToRender(),q=P[0],lt=P[1],V=this._getVerticalRangeToRender(),st=V[0],ct=V[1],G=[];if(m>0&&L)for(var E=st;E<=ct;E++)for(var H=q;H<=lt;H++)G.push(N.createElement(s,{columnIndex:H,data:S,isScrolling:F?k:void 0,key:g({columnIndex:H,data:S,rowIndex:E}),rowIndex:E,style:this._getItemStyle(E,H)}));var ut=n(this.props,this._instanceProps),dt=u(this.props,this._instanceProps);return N.createElement(x||y||"div",{className:a,onScroll:this._onScroll,ref:this._outerRefSetter,style:ft({position:"relative",height:d,width:A,overflow:"auto",WebkitOverflowScrolling:"touch",willChange:"transform",direction:v},b)},N.createElement(w||M||"div",{children:G,ref:p,style:{height:ut,pointerEvents:k?"none":void 0,width:dt}}))},_._callPropsCallbacks=function(){var t=this.props,s=t.columnCount,a=t.onItemsRendered,m=t.onScroll,v=t.rowCount;if(typeof a=="function"&&s>0&&v>0){var d=this._getHorizontalRangeToRender(),p=d[0],w=d[1],M=d[2],S=d[3],C=this._getVerticalRangeToRender(),g=C[0],x=C[1],y=C[2],L=C[3];this._callOnItemsRendered(p,w,g,x,M,S,y,L)}if(typeof m=="function"){var b=this.state,F=b.horizontalScrollDirection,A=b.scrollLeft,k=b.scrollTop,P=b.scrollUpdateWasRequested,q=b.verticalScrollDirection;this._callOnScroll(A,k,F,q,P)}},_._getHorizontalRangeToRender=function(){var t=this.props,s=t.columnCount,a=t.overscanColumnCount,m=t.overscanColumnsCount,v=t.overscanCount,d=t.rowCount,p=this.state,w=p.horizontalScrollDirection,M=p.isScrolling,S=p.scrollLeft,C=a||m||v||1;if(s===0||d===0)return[0,0,0,0];var g=r(this.props,S,this._instanceProps),x=i(this.props,g,S,this._instanceProps),y=!M||w==="backward"?Math.max(1,C):1,L=!M||w==="forward"?Math.max(1,C):1;return[Math.max(0,g-y),Math.max(0,Math.min(s-1,x+L)),g,x]},_._getVerticalRangeToRender=function(){var t=this.props,s=t.columnCount,a=t.overscanCount,m=t.overscanRowCount,v=t.overscanRowsCount,d=t.rowCount,p=this.state,w=p.isScrolling,M=p.verticalScrollDirection,S=p.scrollTop,C=m||v||a||1;if(s===0||d===0)return[0,0,0,0];var g=T(this.props,S,this._instanceProps),x=nt(this.props,g,S,this._instanceProps),y=!w||M==="backward"?Math.max(1,C):1,L=!w||M==="forward"?Math.max(1,C):1;return[Math.max(0,g-y),Math.max(0,Math.min(d-1,x+L)),g,x]},D}(N.PureComponent),e.defaultProps={direction:"ltr",itemData:void 0,useIsScrolling:!1},e}var St=function(e,o){e.children,e.direction,e.height,e.innerTagName,e.outerTagName,e.overscanColumnsCount,e.overscanCount,e.overscanRowsCount,e.width,o.instance},X=50,et=function(e,o){var r=e.rowCount,i=o.rowMetadataMap,c=o.estimatedRowHeight,n=o.lastMeasuredRowIndex,u=0;if(n>=r&&(n=r-1),n>=0){var f=i[n];u=f.offset+f.size}var I=r-n-1,h=I*c;return u+h},ot=function(e,o){var r=e.columnCount,i=o.columnMetadataMap,c=o.estimatedColumnWidth,n=o.lastMeasuredColumnIndex,u=0;if(n>=r&&(n=r-1),n>=0){var f=i[n];u=f.offset+f.size}var I=r-n-1,h=I*c;return u+h},z=function(e,o,r,i){var c,n,u;if(e==="column"?(c=i.columnMetadataMap,n=o.columnWidth,u=i.lastMeasuredColumnIndex):(c=i.rowMetadataMap,n=o.rowHeight,u=i.lastMeasuredRowIndex),r>u){var f=0;if(u>=0){var I=c[u];f=I.offset+I.size}for(var h=u+1;h<=r;h++){var R=n(h);c[h]={offset:f,size:R},f+=R}e==="column"?i.lastMeasuredColumnIndex=r:i.lastMeasuredRowIndex=r}return c[r]},Y=function(e,o,r,i){var c,n;e==="column"?(c=r.columnMetadataMap,n=r.lastMeasuredColumnIndex):(c=r.rowMetadataMap,n=r.lastMeasuredRowIndex);var u=n>0?c[n].offset:0;return u>=i?rt(e,o,r,n,0,i):Ct(e,o,r,Math.max(0,n),i)},rt=function(e,o,r,i,c,n){for(;c<=i;){var u=c+Math.floor((i-c)/2),f=z(e,o,u,r).offset;if(f===n)return u;f<n?c=u+1:f>n&&(i=u-1)}return c>0?c-1:0},Ct=function(e,o,r,i,c){for(var n=e==="column"?o.columnCount:o.rowCount,u=1;i<n&&z(e,o,i,r).offset<c;)i+=u,u*=2;return rt(e,o,r,Math.min(i,n-1),Math.floor(i/2),c)},tt=function(e,o,r,i,c,n,u){var f=e==="column"?o.width:o.height,I=z(e,o,r,n),h=e==="column"?ot(o,n):et(o,n),R=Math.max(0,Math.min(h-f,I.offset)),T=Math.max(0,I.offset-f+u+I.size);switch(i==="smart"&&(c>=T-f&&c<=R+f?i="auto":i="center"),i){case"start":return R;case"end":return T;case"center":return Math.round(T+(R-T)/2);case"auto":default:return c>=T&&c<=R?c:T>R||c<T?T:R}},Tt=wt({getColumnOffset:function(e,o,r){return z("column",e,o,r).offset},getColumnStartIndexForOffset:function(e,o,r){return Y("column",e,r,o)},getColumnStopIndexForStartIndex:function(e,o,r,i){for(var c=e.columnCount,n=e.width,u=z("column",e,o,i),f=r+n,I=u.offset+u.size,h=o;h<c-1&&I<f;)h++,I+=z("column",e,h,i).size;return h},getColumnWidth:function(e,o,r){return r.columnMetadataMap[o].size},getEstimatedTotalHeight:et,getEstimatedTotalWidth:ot,getOffsetForColumnAndAlignment:function(e,o,r,i,c,n){return tt("column",e,o,r,i,c,n)},getOffsetForRowAndAlignment:function(e,o,r,i,c,n){return tt("row",e,o,r,i,c,n)},getRowOffset:function(e,o,r){return z("row",e,o,r).offset},getRowHeight:function(e,o,r){return r.rowMetadataMap[o].size},getRowStartIndexForOffset:function(e,o,r){return Y("row",e,r,o)},getRowStopIndexForStartIndex:function(e,o,r,i){for(var c=e.rowCount,n=e.height,u=z("row",e,o,i),f=r+n,I=u.offset+u.size,h=o;h<c-1&&I<f;)h++,I+=z("row",e,h,i).size;return h},initInstanceProps:function(e,o){var r=e,i=r.estimatedColumnWidth,c=r.estimatedRowHeight,n={columnMetadataMap:{},estimatedColumnWidth:i||X,estimatedRowHeight:c||X,lastMeasuredColumnIndex:-1,lastMeasuredRowIndex:-1,rowMetadataMap:{}};return o.resetAfterColumnIndex=function(u,f){f===void 0&&(f=!0),o.resetAfterIndices({columnIndex:u,shouldForceUpdate:f})},o.resetAfterRowIndex=function(u,f){f===void 0&&(f=!0),o.resetAfterIndices({rowIndex:u,shouldForceUpdate:f})},o.resetAfterIndices=function(u){var f=u.columnIndex,I=u.rowIndex,h=u.shouldForceUpdate,R=h===void 0?!0:h;typeof f=="number"&&(n.lastMeasuredColumnIndex=Math.min(n.lastMeasuredColumnIndex,f-1)),typeof I=="number"&&(n.lastMeasuredRowIndex=Math.min(n.lastMeasuredRowIndex,I-1)),o._getItemStyleCache(-1),R&&o.forceUpdate()},n},shouldResetStyleCacheOnItemSizeChange:!1,validateProps:function(e){e.columnWidth,e.rowHeight}});export{Tt as V};
