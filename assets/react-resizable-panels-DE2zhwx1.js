import{r as p,a as zn}from"./react-egwdCabL.js";const we=p.createContext(null);we.displayName="PanelGroupContext";const $={group:"data-panel-group",groupDirection:"data-panel-group-direction",groupId:"data-panel-group-id",panel:"data-panel",panelCollapsible:"data-panel-collapsible",panelId:"data-panel-id",panelSize:"data-panel-size",resizeHandle:"data-resize-handle",resizeHandleActive:"data-resize-handle-active",resizeHandleEnabled:"data-panel-resize-handle-enabled",resizeHandleId:"data-panel-resize-handle-id",resizeHandleState:"data-resize-handle-state"},Ne=10,te=p.useLayoutEffect,Fe=zn.useId,yn=typeof Fe=="function"?Fe:()=>null;let xn=0;function _e(e=null){const n=yn(),t=p.useRef(e||n||null);return t.current===null&&(t.current=""+xn++),e??t.current}function Je({children:e,className:n="",collapsedSize:t,collapsible:r,defaultSize:i,forwardedRef:o,id:l,maxSize:a,minSize:s,onCollapse:d,onExpand:w,onResize:g,order:c,style:x,tagName:m="div",...I}){const C=p.useContext(we);if(C===null)throw Error("Panel components must be rendered within a PanelGroup container");const{collapsePanel:P,expandPanel:A,getPanelSize:D,getPanelStyle:H,groupId:O,isPanelCollapsed:R,reevaluatePanelConstraints:b,registerPanel:F,resizePanel:q,unregisterPanel:W}=C,G=_e(l),M=p.useRef({callbacks:{onCollapse:d,onExpand:w,onResize:g},constraints:{collapsedSize:t,collapsible:r,defaultSize:i,maxSize:a,minSize:s},id:G,idIsFromProps:l!==void 0,order:c});p.useRef({didLogMissingDefaultSizeWarning:!1}).current.didLogMissingDefaultSizeWarning,te(()=>{const{callbacks:N,constraints:_}=M.current,B={..._};M.current.id=G,M.current.idIsFromProps=l!==void 0,M.current.order=c,N.onCollapse=d,N.onExpand=w,N.onResize=g,_.collapsedSize=t,_.collapsible=r,_.defaultSize=i,_.maxSize=a,_.minSize=s,(B.collapsedSize!==_.collapsedSize||B.collapsible!==_.collapsible||B.maxSize!==_.maxSize||B.minSize!==_.minSize)&&b(M.current,B)}),te(()=>{const N=M.current;return F(N),()=>{W(N)}},[c,G,F,W]),p.useImperativeHandle(o,()=>({collapse:()=>{P(M.current)},expand:N=>{A(M.current,N)},getId(){return G},getSize(){return D(M.current)},isCollapsed(){return R(M.current)},isExpanded(){return!R(M.current)},resize:N=>{q(M.current,N)}}),[P,A,D,R,G,q]);const Y=H(M.current,i);return p.createElement(m,{...I,children:e,className:n,id:G,style:{...Y,...x},[$.groupId]:O,[$.panel]:"",[$.panelCollapsible]:r||void 0,[$.panelId]:G,[$.panelSize]:parseFloat(""+Y.flexGrow).toFixed(1)})}const vn=p.forwardRef((e,n)=>p.createElement(Je,{...e,forwardedRef:n}));Je.displayName="Panel";vn.displayName="forwardRef(Panel)";let He=null,Se=-1,Z=null;function Sn(e,n){if(n){const t=(n&nn)!==0,r=(n&tn)!==0,i=(n&rn)!==0,o=(n&on)!==0;if(t)return i?"se-resize":o?"ne-resize":"e-resize";if(r)return i?"sw-resize":o?"nw-resize":"w-resize";if(i)return"s-resize";if(o)return"n-resize"}switch(e){case"horizontal":return"ew-resize";case"intersection":return"move";case"vertical":return"ns-resize"}}function bn(){Z!==null&&(document.head.removeChild(Z),He=null,Z=null,Se=-1)}function Ae(e,n){var t,r;const i=Sn(e,n);if(He!==i){if(He=i,Z===null&&(Z=document.createElement("style"),document.head.appendChild(Z)),Se>=0){var o;(o=Z.sheet)===null||o===void 0||o.removeRule(Se)}Se=(t=(r=Z.sheet)===null||r===void 0?void 0:r.insertRule(`*{cursor: ${i} !important;}`))!==null&&t!==void 0?t:-1}}function Ye(e){return e.type==="keydown"}function Ze(e){return e.type.startsWith("pointer")}function Qe(e){return e.type.startsWith("mouse")}function Ce(e){if(Ze(e)){if(e.isPrimary)return{x:e.clientX,y:e.clientY}}else if(Qe(e))return{x:e.clientX,y:e.clientY};return{x:1/0,y:1/0}}function Pn(){if(typeof matchMedia=="function")return matchMedia("(pointer:coarse)").matches?"coarse":"fine"}function wn(e,n,t){return e.x<n.x+n.width&&e.x+e.width>n.x&&e.y<n.y+n.height&&e.y+e.height>n.y}function Cn(e,n){if(e===n)throw new Error("Cannot compare node with itself");const t={a:Oe(e),b:Oe(n)};let r;for(;t.a.at(-1)===t.b.at(-1);)e=t.a.pop(),n=t.b.pop(),r=e;S(r,"Stacking order can only be calculated for elements with a common ancestor");const i={a:Ue(Ke(t.a)),b:Ue(Ke(t.b))};if(i.a===i.b){const o=r.childNodes,l={a:t.a.at(-1),b:t.b.at(-1)};let a=o.length;for(;a--;){const s=o[a];if(s===l.a)return 1;if(s===l.b)return-1}}return Math.sign(i.a-i.b)}const In=/\b(?:position|zIndex|opacity|transform|webkitTransform|mixBlendMode|filter|webkitFilter|isolation)\b/;function En(e){var n;const t=getComputedStyle((n=en(e))!==null&&n!==void 0?n:e).display;return t==="flex"||t==="inline-flex"}function Rn(e){const n=getComputedStyle(e);return!!(n.position==="fixed"||n.zIndex!=="auto"&&(n.position!=="static"||En(e))||+n.opacity<1||"transform"in n&&n.transform!=="none"||"webkitTransform"in n&&n.webkitTransform!=="none"||"mixBlendMode"in n&&n.mixBlendMode!=="normal"||"filter"in n&&n.filter!=="none"||"webkitFilter"in n&&n.webkitFilter!=="none"||"isolation"in n&&n.isolation==="isolate"||In.test(n.willChange)||n.webkitOverflowScrolling==="touch")}function Ke(e){let n=e.length;for(;n--;){const t=e[n];if(S(t,"Missing node"),Rn(t))return t}return null}function Ue(e){return e&&Number(getComputedStyle(e).zIndex)||0}function Oe(e){const n=[];for(;e;)n.push(e),e=en(e);return n}function en(e){const{parentNode:n}=e;return n&&n instanceof ShadowRoot?n.host:n}const nn=1,tn=2,rn=4,on=8,An=Pn()==="coarse";let U=[],ae=!1,ne=new Map,Ie=new Map;const me=new Set;function Ln(e,n,t,r,i){var o;const{ownerDocument:l}=n,a={direction:t,element:n,hitAreaMargins:r,setResizeHandlerState:i},s=(o=ne.get(l))!==null&&o!==void 0?o:0;return ne.set(l,s+1),me.add(a),be(),function(){var w;Ie.delete(e),me.delete(a);const g=(w=ne.get(l))!==null&&w!==void 0?w:1;if(ne.set(l,g-1),be(),g===1&&ne.delete(l),U.includes(a)){const c=U.indexOf(a);c>=0&&U.splice(c,1),Ge(),i("up",!0,null)}}}function kn(e){const{target:n}=e,{x:t,y:r}=Ce(e);ae=!0,We({target:n,x:t,y:r}),be(),U.length>0&&(Pe("down",e),e.preventDefault(),ln(n)||e.stopImmediatePropagation())}function Le(e){const{x:n,y:t}=Ce(e);if(ae&&e.buttons===0&&(ae=!1,Pe("up",e)),!ae){const{target:r}=e;We({target:r,x:n,y:t})}Pe("move",e),Ge(),U.length>0&&e.preventDefault()}function ke(e){const{target:n}=e,{x:t,y:r}=Ce(e);Ie.clear(),ae=!1,U.length>0&&(e.preventDefault(),ln(n)||e.stopImmediatePropagation()),Pe("up",e),We({target:n,x:t,y:r}),Ge(),be()}function ln(e){let n=e;for(;n;){if(n.hasAttribute($.resizeHandle))return!0;n=n.parentElement}return!1}function We({target:e,x:n,y:t}){U.splice(0);let r=null;(e instanceof HTMLElement||e instanceof SVGElement)&&(r=e),me.forEach(i=>{const{element:o,hitAreaMargins:l}=i,a=o.getBoundingClientRect(),{bottom:s,left:d,right:w,top:g}=a,c=An?l.coarse:l.fine;if(n>=d-c&&n<=w+c&&t>=g-c&&t<=s+c){if(r!==null&&document.contains(r)&&o!==r&&!o.contains(r)&&!r.contains(o)&&Cn(r,o)>0){let m=r,I=!1;for(;m&&!m.contains(o);){if(wn(m.getBoundingClientRect(),a)){I=!0;break}m=m.parentElement}if(I)return}U.push(i)}})}function $e(e,n){Ie.set(e,n)}function Ge(){let e=!1,n=!1;U.forEach(r=>{const{direction:i}=r;i==="horizontal"?e=!0:n=!0});let t=0;Ie.forEach(r=>{t|=r}),e&&n?Ae("intersection",t):e?Ae("horizontal",t):n?Ae("vertical",t):bn()}let Me=new AbortController;function be(){Me.abort(),Me=new AbortController;const e={capture:!0,signal:Me.signal};me.size&&(ae?(U.length>0&&ne.forEach((n,t)=>{const{body:r}=t;n>0&&(r.addEventListener("contextmenu",ke,e),r.addEventListener("pointerleave",Le,e),r.addEventListener("pointermove",Le,e))}),window.addEventListener("pointerup",ke,e),window.addEventListener("pointercancel",ke,e)):ne.forEach((n,t)=>{const{body:r}=t;n>0&&(r.addEventListener("pointerdown",kn,e),r.addEventListener("pointermove",Le,e))}))}function Pe(e,n){me.forEach(t=>{const{setResizeHandlerState:r}=t,i=U.includes(t);r(e,i,n)})}function $n(){const[e,n]=p.useState(0);return p.useCallback(()=>n(t=>t+1),[])}function S(e,n){if(!e)throw console.error(n),Error(n)}function re(e,n,t=Ne){return e.toFixed(t)===n.toFixed(t)?0:e>n?1:-1}function J(e,n,t=Ne){return re(e,n,t)===0}function V(e,n,t){return re(e,n,t)===0}function Mn(e,n,t){if(e.length!==n.length)return!1;for(let r=0;r<e.length;r++){const i=e[r],o=n[r];if(!V(i,o,t))return!1}return!0}function le({panelConstraints:e,panelIndex:n,size:t}){const r=e[n];S(r!=null,`Panel constraints not found for index ${n}`);let{collapsedSize:i=0,collapsible:o,maxSize:l=100,minSize:a=0}=r;if(re(t,a)<0)if(o){const s=(i+a)/2;re(t,s)<0?t=i:t=a}else t=a;return t=Math.min(l,t),t=parseFloat(t.toFixed(Ne)),t}function ge({delta:e,initialLayout:n,panelConstraints:t,pivotIndices:r,prevLayout:i,trigger:o}){if(V(e,0))return n;const l=[...n],[a,s]=r;S(a!=null,"Invalid first pivot index"),S(s!=null,"Invalid second pivot index");let d=0;if(o==="keyboard"){{const g=e<0?s:a,c=t[g];S(c,`Panel constraints not found for index ${g}`);const{collapsedSize:x=0,collapsible:m,minSize:I=0}=c;if(m){const C=n[g];if(S(C!=null,`Previous layout not found for panel index ${g}`),V(C,x)){const P=I-C;re(P,Math.abs(e))>0&&(e=e<0?0-P:P)}}}{const g=e<0?a:s,c=t[g];S(c,`No panel constraints found for index ${g}`);const{collapsedSize:x=0,collapsible:m,minSize:I=0}=c;if(m){const C=n[g];if(S(C!=null,`Previous layout not found for panel index ${g}`),V(C,I)){const P=C-x;re(P,Math.abs(e))>0&&(e=e<0?0-P:P)}}}}{const g=e<0?1:-1;let c=e<0?s:a,x=0;for(;;){const I=n[c];S(I!=null,`Previous layout not found for panel index ${c}`);const P=le({panelConstraints:t,panelIndex:c,size:100})-I;if(x+=P,c+=g,c<0||c>=t.length)break}const m=Math.min(Math.abs(e),Math.abs(x));e=e<0?0-m:m}{let c=e<0?a:s;for(;c>=0&&c<t.length;){const x=Math.abs(e)-Math.abs(d),m=n[c];S(m!=null,`Previous layout not found for panel index ${c}`);const I=m-x,C=le({panelConstraints:t,panelIndex:c,size:I});if(!V(m,C)&&(d+=m-C,l[c]=C,d.toPrecision(3).localeCompare(Math.abs(e).toPrecision(3),void 0,{numeric:!0})>=0))break;e<0?c--:c++}}if(Mn(i,l))return i;{const g=e<0?s:a,c=n[g];S(c!=null,`Previous layout not found for panel index ${g}`);const x=c+d,m=le({panelConstraints:t,panelIndex:g,size:x});if(l[g]=m,!V(m,x)){let I=x-m,P=e<0?s:a;for(;P>=0&&P<t.length;){const A=l[P];S(A!=null,`Previous layout not found for panel index ${P}`);const D=A+I,H=le({panelConstraints:t,panelIndex:P,size:D});if(V(A,H)||(I-=H-A,l[P]=H),V(I,0))break;e>0?P--:P++}}}const w=l.reduce((g,c)=>c+g,0);return V(w,100)?l:i}function Dn({layout:e,panelsArray:n,pivotIndices:t}){let r=0,i=100,o=0,l=0;const a=t[0];S(a!=null,"No pivot index found"),n.forEach((g,c)=>{const{constraints:x}=g,{maxSize:m=100,minSize:I=0}=x;c===a?(r=I,i=m):(o+=I,l+=m)});const s=Math.min(i,100-o),d=Math.max(r,100-l),w=e[a];return{valueMax:s,valueMin:d,valueNow:w}}function ze(e,n=document){return Array.from(n.querySelectorAll(`[${$.resizeHandleId}][data-panel-group-id="${e}"]`))}function an(e,n,t=document){const i=ze(e,t).findIndex(o=>o.getAttribute($.resizeHandleId)===n);return i??null}function sn(e,n,t){const r=an(e,n,t);return r!=null?[r,r+1]:[-1,-1]}function un(e,n=document){var t;if(n instanceof HTMLElement&&(n==null||(t=n.dataset)===null||t===void 0?void 0:t.panelGroupId)==e)return n;const r=n.querySelector(`[data-panel-group][data-panel-group-id="${e}"]`);return r||null}function Ee(e,n=document){const t=n.querySelector(`[${$.resizeHandleId}="${e}"]`);return t||null}function Hn(e,n,t,r=document){var i,o,l,a;const s=Ee(n,r),d=ze(e,r),w=s?d.indexOf(s):-1,g=(i=(o=t[w])===null||o===void 0?void 0:o.id)!==null&&i!==void 0?i:null,c=(l=(a=t[w+1])===null||a===void 0?void 0:a.id)!==null&&l!==void 0?l:null;return[g,c]}function Nn({committedValuesRef:e,eagerValuesRef:n,groupId:t,layout:r,panelDataArray:i,panelGroupElement:o,setLayout:l}){const a=p.useRef({didWarnAboutMissingResizeHandle:!1});te(()=>{if(!o)return;const s=ze(t,o);for(let d=0;d<i.length-1;d++){const{valueMax:w,valueMin:g,valueNow:c}=Dn({layout:r,panelsArray:i,pivotIndices:[d,d+1]}),x=s[d];if(x==null){const{didWarnAboutMissingResizeHandle:m}=a.current;m||(a.current.didWarnAboutMissingResizeHandle=!0,console.warn(`WARNING: Missing resize handle for PanelGroup "${t}"`))}else{const m=i[d];S(m,`No panel data found for index "${d}"`),x.setAttribute("aria-controls",m.id),x.setAttribute("aria-valuemax",""+Math.round(w)),x.setAttribute("aria-valuemin",""+Math.round(g)),x.setAttribute("aria-valuenow",c!=null?""+Math.round(c):"")}}return()=>{s.forEach((d,w)=>{d.removeAttribute("aria-controls"),d.removeAttribute("aria-valuemax"),d.removeAttribute("aria-valuemin"),d.removeAttribute("aria-valuenow")})}},[t,r,i,o]),p.useEffect(()=>{if(!o)return;const s=n.current;S(s,"Eager values not found");const{panelDataArray:d}=s,w=un(t,o);S(w!=null,`No group found for id "${t}"`);const g=ze(t,o);S(g,`No resize handles found for group id "${t}"`);const c=g.map(x=>{const m=x.getAttribute($.resizeHandleId);S(m,"Resize handle element has no handle id attribute");const[I,C]=Hn(t,m,d,o);if(I==null||C==null)return()=>{};const P=A=>{if(!A.defaultPrevented)switch(A.key){case"Enter":{A.preventDefault();const D=d.findIndex(H=>H.id===I);if(D>=0){const H=d[D];S(H,`No panel data found for index ${D}`);const O=r[D],{collapsedSize:R=0,collapsible:b,minSize:F=0}=H.constraints;if(O!=null&&b){const q=ge({delta:V(O,R)?F-R:R-O,initialLayout:r,panelConstraints:d.map(W=>W.constraints),pivotIndices:sn(t,m,o),prevLayout:r,trigger:"keyboard"});r!==q&&l(q)}}break}}};return x.addEventListener("keydown",P),()=>{x.removeEventListener("keydown",P)}});return()=>{c.forEach(x=>x())}},[o,e,n,t,r,i,l])}function De(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!==n[t])return!1;return!0}function cn(e,n){const t=e==="horizontal",{x:r,y:i}=Ce(n);return t?r:i}function _n(e,n,t,r,i){const o=t==="horizontal",l=Ee(n,i);S(l,`No resize handle element found for id "${n}"`);const a=l.getAttribute($.groupId);S(a,"Resize handle element has no group id attribute");let{initialCursorPosition:s}=r;const d=cn(t,e),w=un(a,i);S(w,`No group element found for id "${a}"`);const g=w.getBoundingClientRect(),c=o?g.width:g.height;return(d-s)/c*100}function Wn(e,n,t,r,i,o){if(Ye(e)){const l=t==="horizontal";let a=0;e.shiftKey?a=100:i!=null?a=i:a=10;let s=0;switch(e.key){case"ArrowDown":s=l?0:a;break;case"ArrowLeft":s=l?-a:0;break;case"ArrowRight":s=l?a:0;break;case"ArrowUp":s=l?0:-a;break;case"End":s=100;break;case"Home":s=-100;break}return s}else return r==null?0:_n(e,n,t,r,o)}function Gn({panelDataArray:e}){const n=Array(e.length),t=e.map(o=>o.constraints);let r=0,i=100;for(let o=0;o<e.length;o++){const l=t[o];S(l,`Panel constraints not found for index ${o}`);const{defaultSize:a}=l;a!=null&&(r++,n[o]=a,i-=a)}for(let o=0;o<e.length;o++){const l=t[o];S(l,`Panel constraints not found for index ${o}`);const{defaultSize:a}=l;if(a!=null)continue;const s=e.length-r,d=i/s;r++,n[o]=d,i-=d}return n}function oe(e,n,t){n.forEach((r,i)=>{const o=e[i];S(o,`Panel data not found for index ${i}`);const{callbacks:l,constraints:a,id:s}=o,{collapsedSize:d=0,collapsible:w}=a,g=t[s];if(g==null||r!==g){t[s]=r;const{onCollapse:c,onExpand:x,onResize:m}=l;m&&m(r,g),w&&(c||x)&&(x&&(g==null||J(g,d))&&!J(r,d)&&x(),c&&(g==null||!J(g,d))&&J(r,d)&&c())}})}function ve(e,n){if(e.length!==n.length)return!1;for(let t=0;t<e.length;t++)if(e[t]!=n[t])return!1;return!0}function Bn({defaultSize:e,dragState:n,layout:t,panelData:r,panelIndex:i,precision:o=3}){const l=t[i];let a;return l==null?a=e!=null?e.toPrecision(o):"1":r.length===1?a="1":a=l.toPrecision(o),{flexBasis:0,flexGrow:a,flexShrink:1,overflow:"hidden",pointerEvents:n!==null?"none":void 0}}function Tn(e,n=10){let t=null;return(...i)=>{t!==null&&clearTimeout(t),t=setTimeout(()=>{e(...i)},n)}}function qe(e){try{if(typeof localStorage<"u")e.getItem=n=>localStorage.getItem(n),e.setItem=(n,t)=>{localStorage.setItem(n,t)};else throw new Error("localStorage not supported in this environment")}catch(n){console.error(n),e.getItem=()=>null,e.setItem=()=>{}}}function dn(e){return`react-resizable-panels:${e}`}function fn(e){return e.map(n=>{const{constraints:t,id:r,idIsFromProps:i,order:o}=n;return i?r:o?`${o}:${JSON.stringify(t)}`:JSON.stringify(t)}).sort((n,t)=>n.localeCompare(t)).join(",")}function pn(e,n){try{const t=dn(e),r=n.getItem(t);if(r){const i=JSON.parse(r);if(typeof i=="object"&&i!=null)return i}}catch{}return null}function Vn(e,n,t){var r,i;const o=(r=pn(e,t))!==null&&r!==void 0?r:{},l=fn(n);return(i=o[l])!==null&&i!==void 0?i:null}function Fn(e,n,t,r,i){var o;const l=dn(e),a=fn(n),s=(o=pn(e,i))!==null&&o!==void 0?o:{};s[a]={expandToSizes:Object.fromEntries(t.entries()),layout:r};try{i.setItem(l,JSON.stringify(s))}catch(d){console.error(d)}}function Kn({panelConstraints:e,panelId:n,panelIndex:t}){{const r=[],i=e[t];S(i,`No panel constraints found for index ${t}`);const{collapsedSize:o=0,collapsible:l=!1,defaultSize:a,maxSize:s=100,minSize:d=0}=i;if(d>s&&r.push(`min size (${d}%) should not be greater than max size (${s}%)`),a!=null&&(a<0?r.push("default size should not be less than 0"):a<d&&(!l||a!==o)&&r.push("default size should not be less than min size"),a>100?r.push("default size should not be greater than 100"):a>s&&r.push("default size should not be greater than max size")),o>d&&r.push("collapsed size should not be greater than min size"),r.length>0){const w=n!=null?`Panel "${n}"`:"Panel";return console.warn(`${w} has an invalid configuration:

${r.join(`
`)}`),!1}}return!0}function Xe({layout:e,panelConstraints:n}){const t=[...e],r=t.reduce((o,l)=>o+l,0);if(t.length!==n.length)throw Error(`Invalid ${n.length} panel layout: ${t.map(o=>`${o}%`).join(", ")}`);if(!V(r,100)&&t.length>0){console.warn(`WARNING: Invalid layout total size: ${t.map(o=>`${o}%`).join(", ")}. Layout normalization will be applied.`);for(let o=0;o<n.length;o++){const l=t[o];S(l!=null,`No layout data found for index ${o}`);const a=100/r*l;t[o]=a}}let i=0;for(let o=0;o<n.length;o++){const l=t[o];S(l!=null,`No layout data found for index ${o}`);const a=le({panelConstraints:n,panelIndex:o,size:l});l!=a&&(i+=l-a,t[o]=a)}if(!V(i,0))for(let o=0;o<n.length;o++){const l=t[o];S(l!=null,`No layout data found for index ${o}`);const a=l+i,s=le({panelConstraints:n,panelIndex:o,size:a});if(l!==s&&(i-=s-l,t[o]=s,V(i,0)))break}return t}const Un=100,he={getItem:e=>(qe(he),he.getItem(e)),setItem:(e,n)=>{qe(he),he.setItem(e,n)}},je={};function gn({autoSaveId:e=null,children:n,className:t="",direction:r,forwardedRef:i,id:o=null,onLayout:l=null,keyboardResizeBy:a=null,storage:s=he,style:d,tagName:w="div",...g}){const c=_e(o),x=p.useRef(null),[m,I]=p.useState(null),[C,P]=p.useState([]),A=$n(),D=p.useRef({}),H=p.useRef(new Map),O=p.useRef(0),R=p.useRef({autoSaveId:e,direction:r,dragState:m,id:c,keyboardResizeBy:a,onLayout:l,storage:s}),b=p.useRef({layout:C,panelDataArray:[],panelDataArrayChanged:!1}),F=p.useRef({didLogIdAndOrderWarning:!1,didLogPanelConstraintsWarning:!1,prevPanelIds:[]});p.useImperativeHandle(i,()=>({getId:()=>R.current.id,getLayout:()=>{const{layout:u}=b.current;return u},setLayout:u=>{const{onLayout:z}=R.current,{layout:v,panelDataArray:h}=b.current,f=Xe({layout:u,panelConstraints:h.map(y=>y.constraints)});De(v,f)||(P(f),b.current.layout=f,z&&z(f),oe(h,f,D.current))}}),[]),te(()=>{R.current.autoSaveId=e,R.current.direction=r,R.current.dragState=m,R.current.id=c,R.current.onLayout=l,R.current.storage=s}),Nn({committedValuesRef:R,eagerValuesRef:b,groupId:c,layout:C,panelDataArray:b.current.panelDataArray,setLayout:P,panelGroupElement:x.current}),p.useEffect(()=>{const{panelDataArray:u}=b.current;if(e){if(C.length===0||C.length!==u.length)return;let z=je[e];z==null&&(z=Tn(Fn,Un),je[e]=z);const v=[...u],h=new Map(H.current);z(e,v,h,C,s)}},[e,C,s]),p.useEffect(()=>{{const{panelDataArray:u}=b.current,{didLogIdAndOrderWarning:z,didLogPanelConstraintsWarning:v,prevPanelIds:h}=F.current;if(!z){const f=u.map(({id:E})=>E);F.current.prevPanelIds=f,h.length>0&&!De(h,f)&&u.find(({idIsFromProps:E,order:L})=>!E||L==null)&&(F.current.didLogIdAndOrderWarning=!0,console.warn("WARNING: Panel id and order props recommended when panels are dynamically rendered"))}if(!v){const f=u.map(y=>y.constraints);for(let y=0;y<f.length;y++){const E=u[y];if(S(E,`Panel data not found for index ${y}`),!Kn({panelConstraints:f,panelId:E.id,panelIndex:y})){F.current.didLogPanelConstraintsWarning=!0;break}}}}});const q=p.useCallback(u=>{const{onLayout:z}=R.current,{layout:v,panelDataArray:h}=b.current;if(u.constraints.collapsible){const f=h.map(X=>X.constraints),{collapsedSize:y=0,panelSize:E,pivotIndices:L}=ee(h,u,v);if(S(E!=null,`Panel size not found for panel "${u.id}"`),!J(E,y)){H.current.set(u.id,E);const j=ie(h,u)===h.length-1?E-y:y-E,k=ge({delta:j,initialLayout:v,panelConstraints:f,pivotIndices:L,prevLayout:v,trigger:"imperative-api"});ve(v,k)||(P(k),b.current.layout=k,z&&z(k),oe(h,k,D.current))}}},[]),W=p.useCallback((u,z)=>{const{onLayout:v}=R.current,{layout:h,panelDataArray:f}=b.current;if(u.constraints.collapsible){const y=f.map(K=>K.constraints),{collapsedSize:E=0,panelSize:L=0,minSize:X=0,pivotIndices:j}=ee(f,u,h),k=z??X;if(J(L,E)){const K=H.current.get(u.id),fe=K!=null&&K>=k?K:k,Re=ie(f,u)===f.length-1?L-fe:fe-L,T=ge({delta:Re,initialLayout:h,panelConstraints:y,pivotIndices:j,prevLayout:h,trigger:"imperative-api"});ve(h,T)||(P(T),b.current.layout=T,v&&v(T),oe(f,T,D.current))}}},[]),G=p.useCallback(u=>{const{layout:z,panelDataArray:v}=b.current,{panelSize:h}=ee(v,u,z);return S(h!=null,`Panel size not found for panel "${u.id}"`),h},[]),M=p.useCallback((u,z)=>{const{panelDataArray:v}=b.current,h=ie(v,u);return Bn({defaultSize:z,dragState:m,layout:C,panelData:v,panelIndex:h})},[m,C]),se=p.useCallback(u=>{const{layout:z,panelDataArray:v}=b.current,{collapsedSize:h=0,collapsible:f,panelSize:y}=ee(v,u,z);return S(y!=null,`Panel size not found for panel "${u.id}"`),f===!0&&J(y,h)},[]),Y=p.useCallback(u=>{const{layout:z,panelDataArray:v}=b.current,{collapsedSize:h=0,collapsible:f,panelSize:y}=ee(v,u,z);return S(y!=null,`Panel size not found for panel "${u.id}"`),!f||re(y,h)>0},[]),N=p.useCallback(u=>{const{panelDataArray:z}=b.current;z.push(u),z.sort((v,h)=>{const f=v.order,y=h.order;return f==null&&y==null?0:f==null?-1:y==null?1:f-y}),b.current.panelDataArrayChanged=!0,A()},[A]);te(()=>{if(b.current.panelDataArrayChanged){b.current.panelDataArrayChanged=!1;const{autoSaveId:u,onLayout:z,storage:v}=R.current,{layout:h,panelDataArray:f}=b.current;let y=null;if(u){const L=Vn(u,f,v);L&&(H.current=new Map(Object.entries(L.expandToSizes)),y=L.layout)}y==null&&(y=Gn({panelDataArray:f}));const E=Xe({layout:y,panelConstraints:f.map(L=>L.constraints)});De(h,E)||(P(E),b.current.layout=E,z&&z(E),oe(f,E,D.current))}}),te(()=>{const u=b.current;return()=>{u.layout=[]}},[]);const _=p.useCallback(u=>{let z=!1;const v=x.current;return v&&window.getComputedStyle(v,null).getPropertyValue("direction")==="rtl"&&(z=!0),function(f){f.preventDefault();const y=x.current;if(!y)return()=>null;const{direction:E,dragState:L,id:X,keyboardResizeBy:j,onLayout:k}=R.current,{layout:K,panelDataArray:fe}=b.current,{initialLayout:xe}=L??{},Re=sn(X,u,y);let T=Wn(f,u,E,L,j,y);const Te=E==="horizontal";Te&&z&&(T=-T);const hn=fe.map(mn=>mn.constraints),pe=ge({delta:T,initialLayout:xe??K,panelConstraints:hn,pivotIndices:Re,prevLayout:K,trigger:Ye(f)?"keyboard":"mouse-or-touch"}),Ve=!ve(K,pe);(Ze(f)||Qe(f))&&O.current!=T&&(O.current=T,!Ve&&T!==0?Te?$e(u,T<0?nn:tn):$e(u,T<0?rn:on):$e(u,0)),Ve&&(P(pe),b.current.layout=pe,k&&k(pe),oe(fe,pe,D.current))}},[]),B=p.useCallback((u,z)=>{const{onLayout:v}=R.current,{layout:h,panelDataArray:f}=b.current,y=f.map(K=>K.constraints),{panelSize:E,pivotIndices:L}=ee(f,u,h);S(E!=null,`Panel size not found for panel "${u.id}"`);const j=ie(f,u)===f.length-1?E-z:z-E,k=ge({delta:j,initialLayout:h,panelConstraints:y,pivotIndices:L,prevLayout:h,trigger:"imperative-api"});ve(h,k)||(P(k),b.current.layout=k,v&&v(k),oe(f,k,D.current))},[]),ue=p.useCallback((u,z)=>{const{layout:v,panelDataArray:h}=b.current,{collapsedSize:f=0,collapsible:y}=z,{collapsedSize:E=0,collapsible:L,maxSize:X=100,minSize:j=0}=u.constraints,{panelSize:k}=ee(h,u,v);k!=null&&(y&&L&&J(k,f)?J(f,E)||B(u,E):k<j?B(u,j):k>X&&B(u,X))},[B]),ce=p.useCallback((u,z)=>{const{direction:v}=R.current,{layout:h}=b.current;if(!x.current)return;const f=Ee(u,x.current);S(f,`Drag handle element not found for id "${u}"`);const y=cn(v,z);I({dragHandleId:u,dragHandleRect:f.getBoundingClientRect(),initialCursorPosition:y,initialLayout:h})},[]),ye=p.useCallback(()=>{I(null)},[]),Q=p.useCallback(u=>{const{panelDataArray:z}=b.current,v=ie(z,u);v>=0&&(z.splice(v,1),delete D.current[u.id],b.current.panelDataArrayChanged=!0,A())},[A]),de=p.useMemo(()=>({collapsePanel:q,direction:r,dragState:m,expandPanel:W,getPanelSize:G,getPanelStyle:M,groupId:c,isPanelCollapsed:se,isPanelExpanded:Y,reevaluatePanelConstraints:ue,registerPanel:N,registerResizeHandle:_,resizePanel:B,startDragging:ce,stopDragging:ye,unregisterPanel:Q,panelGroupElement:x.current}),[q,m,r,W,G,M,c,se,Y,ue,N,_,B,ce,ye,Q]),Be={display:"flex",flexDirection:r==="horizontal"?"row":"column",height:"100%",overflow:"hidden",width:"100%"};return p.createElement(we.Provider,{value:de},p.createElement(w,{...g,children:n,className:t,id:o,ref:x,style:{...Be,...d},[$.group]:"",[$.groupDirection]:r,[$.groupId]:c}))}const On=p.forwardRef((e,n)=>p.createElement(gn,{...e,forwardedRef:n}));gn.displayName="PanelGroup";On.displayName="forwardRef(PanelGroup)";function ie(e,n){return e.findIndex(t=>t===n||t.id===n.id)}function ee(e,n,t){const r=ie(e,n),o=r===e.length-1?[r-1,r]:[r,r+1],l=t[r];return{...n.constraints,panelSize:l,pivotIndices:o}}function qn({disabled:e,handleId:n,resizeHandler:t,panelGroupElement:r}){p.useEffect(()=>{if(e||t==null||r==null)return;const i=Ee(n,r);if(i==null)return;const o=l=>{if(!l.defaultPrevented)switch(l.key){case"ArrowDown":case"ArrowLeft":case"ArrowRight":case"ArrowUp":case"End":case"Home":{l.preventDefault(),t(l);break}case"F6":{l.preventDefault();const a=i.getAttribute($.groupId);S(a,`No group element found for id "${a}"`);const s=ze(a,r),d=an(a,n,r);S(d!==null,`No resize element found for id "${n}"`);const w=l.shiftKey?d>0?d-1:s.length-1:d+1<s.length?d+1:0;s[w].focus();break}}};return i.addEventListener("keydown",o),()=>{i.removeEventListener("keydown",o)}},[r,e,n,t])}function Xn({children:e=null,className:n="",disabled:t=!1,hitAreaMargins:r,id:i,onBlur:o,onClick:l,onDragging:a,onFocus:s,onPointerDown:d,onPointerUp:w,style:g={},tabIndex:c=0,tagName:x="div",...m}){var I,C;const P=p.useRef(null),A=p.useRef({onClick:l,onDragging:a,onPointerDown:d,onPointerUp:w});p.useEffect(()=>{A.current.onClick=l,A.current.onDragging=a,A.current.onPointerDown=d,A.current.onPointerUp=w});const D=p.useContext(we);if(D===null)throw Error("PanelResizeHandle components must be rendered within a PanelGroup container");const{direction:H,groupId:O,registerResizeHandle:R,startDragging:b,stopDragging:F,panelGroupElement:q}=D,W=_e(i),[G,M]=p.useState("inactive"),[se,Y]=p.useState(!1),[N,_]=p.useState(null),B=p.useRef({state:G});te(()=>{B.current.state=G}),p.useEffect(()=>{if(t)_(null);else{const Q=R(W);_(()=>Q)}},[t,W,R]);const ue=(I=r==null?void 0:r.coarse)!==null&&I!==void 0?I:15,ce=(C=r==null?void 0:r.fine)!==null&&C!==void 0?C:5;p.useEffect(()=>{if(t||N==null)return;const Q=P.current;S(Q,"Element ref not attached");let de=!1;return Ln(W,Q,H,{coarse:ue,fine:ce},(u,z,v)=>{if(!z){M("inactive");return}switch(u){case"down":{M("drag"),de=!1,S(v,'Expected event to be defined for "down" action'),b(W,v);const{onDragging:h,onPointerDown:f}=A.current;h==null||h(!0),f==null||f();break}case"move":{const{state:h}=B.current;de=!0,h!=="drag"&&M("hover"),S(v,'Expected event to be defined for "move" action'),N(v);break}case"up":{M("hover"),F();const{onClick:h,onDragging:f,onPointerUp:y}=A.current;f==null||f(!1),y==null||y(),de||h==null||h();break}}})},[ue,H,t,ce,R,W,N,b,F]),qn({disabled:t,handleId:W,resizeHandler:N,panelGroupElement:q});const ye={touchAction:"none",userSelect:"none"};return p.createElement(x,{...m,children:e,className:n,id:i,onBlur:()=>{Y(!1),o==null||o()},onFocus:()=>{Y(!0),s==null||s()},ref:P,role:"separator",style:{...ye,...g},tabIndex:c,[$.groupDirection]:H,[$.groupId]:O,[$.resizeHandle]:"",[$.resizeHandleActive]:G==="drag"?"pointer":se?"keyboard":void 0,[$.resizeHandleEnabled]:!t,[$.resizeHandleId]:W,[$.resizeHandleState]:G})}Xn.displayName="PanelResizeHandle";export{vn as P,Xn as a,On as b};
