import{_ as q,a as U}from"./@babel-BTbEZfjA.js";import{r as f,j as J}from"./react-B2RL9x2s.js";import{c as P,d as Q,s as X,h as Y,f as Z,a as $,l as ee,b as te,e as ae,g as re,i as ie,j as se,k as ne,m as oe,E as z,n as le,o as _,p as ce,q as fe,r as ue,t as he,u as de,v as ge,w as me,x as pe,y as w,z as be,A as m,B as ye,C as Se,D as ve,F as ke,S as Ce,H as xe}from"./@codemirror-Bbikk1gI.js";import{a as u}from"./@lezer-E7PapBHi.js";var j=function(e){e===void 0&&(e={});var{crosshairCursor:t=!1}=e,i=[];e.closeBracketsKeymap!==!1&&(i=i.concat(P)),e.defaultKeymap!==!1&&(i=i.concat(Q)),e.searchKeymap!==!1&&(i=i.concat(X)),e.historyKeymap!==!1&&(i=i.concat(Y)),e.foldKeymap!==!1&&(i=i.concat(Z)),e.completionKeymap!==!1&&(i=i.concat($)),e.lintKeymap!==!1&&(i=i.concat(ee));var a=[];return e.lineNumbers!==!1&&a.push(te()),e.highlightActiveLineGutter!==!1&&a.push(ae()),e.highlightSpecialChars!==!1&&a.push(re()),e.history!==!1&&a.push(ie()),e.foldGutter!==!1&&a.push(se()),e.drawSelection!==!1&&a.push(ne()),e.dropCursor!==!1&&a.push(oe()),e.allowMultipleSelections!==!1&&a.push(z.allowMultipleSelections.of(!0)),e.indentOnInput!==!1&&a.push(le()),e.syntaxHighlighting!==!1&&a.push(_(be,{fallback:!0})),e.bracketMatching!==!1&&a.push(ce()),e.closeBrackets!==!1&&a.push(fe()),e.autocompletion!==!1&&a.push(ue()),e.rectangularSelection!==!1&&a.push(he()),t!==!1&&a.push(de()),e.highlightActiveLine!==!1&&a.push(ge()),e.highlightSelectionMatches!==!1&&a.push(me()),e.tabSize&&typeof e.tabSize=="number"&&a.push(pe.of(" ".repeat(e.tabSize))),a.concat([w.of(i.flat())]).filter(Boolean)},Ee=m.theme({"&":{backgroundColor:"#fff"}},{dark:!1}),Be=function(e){e===void 0&&(e={});var{indentWithTab:t=!0,editable:i=!0,readOnly:a=!1,theme:l="light",placeholder:c="",basicSetup:h=!0}=e,n=[];switch(t&&n.unshift(w.of([ye])),h&&(typeof h=="boolean"?n.unshift(j()):n.unshift(j(h))),c&&n.unshift(Se(c)),l){case"light":n.push(Ee);break;case"dark":n.push(ve);break;case"none":break;default:n.push(l);break}return i===!1&&n.push(m.editable.of(!1)),a&&n.push(z.readOnly.of(!0)),[...n]},Fe=r=>({line:r.state.doc.lineAt(r.state.selection.main.from),lineCount:r.state.doc.lines,lineBreak:r.state.lineBreak,length:r.state.doc.length,readOnly:r.state.readOnly,tabSize:r.state.tabSize,selection:r.state.selection,selectionAsSingle:r.state.selection.asSingle().main,ranges:r.state.selection.ranges,selectionCode:r.state.sliceDoc(r.state.selection.main.from,r.state.selection.main.to),selections:r.state.selection.ranges.map(e=>r.state.sliceDoc(e.from,e.to)),selectedText:r.state.selection.ranges.some(e=>!e.empty)}),G=ke.define(),He=[];function Le(r){var{value:e,selection:t,onChange:i,onStatistics:a,onCreateEditor:l,onUpdate:c,extensions:h=He,autoFocus:n,theme:p="light",height:x=null,minHeight:b=null,maxHeight:E=null,width:B=null,minWidth:F=null,maxWidth:H=null,placeholder:L="",editable:W=!0,readOnly:A=!1,indentWithTab:K=!0,basicSetup:M=!0,root:D,initialState:k}=r,[y,N]=f.useState(),[s,d]=f.useState(),[S,v]=f.useState(),I=m.theme({"&":{height:x,minHeight:b,maxHeight:E,width:B,minWidth:F,maxWidth:H},"& .cm-scroller":{height:"100% !important"}}),O=m.updateListener.of(o=>{if(o.docChanged&&typeof i=="function"&&!o.transactions.some(V=>V.annotation(G))){var C=o.state.doc,T=C.toString();i(T,o)}a&&a(Fe(o))}),R=Be({theme:p,editable:W,readOnly:A,placeholder:L,indentWithTab:K,basicSetup:M}),g=[O,I,...R];return c&&typeof c=="function"&&g.push(m.updateListener.of(c)),g=g.concat(h),f.useLayoutEffect(()=>{if(y&&!S){var o={doc:e,selection:t,extensions:g},C=k?z.fromJSON(k.json,o,k.fields):z.create(o);if(v(C),!s){var T=new m({state:C,parent:y,root:D});d(T),l&&l(T,C)}}return()=>{s&&(v(void 0),d(void 0))}},[y,S]),f.useEffect(()=>{r.container&&N(r.container)},[r.container]),f.useEffect(()=>()=>{s&&(s.destroy(),d(void 0))},[s]),f.useEffect(()=>{n&&s&&s.focus()},[n,s]),f.useEffect(()=>{s&&s.dispatch({effects:Ce.reconfigure.of(g)})},[p,h,x,b,E,B,F,H,L,W,A,K,M,i,c]),f.useEffect(()=>{if(e!==void 0){var o=s?s.state.doc.toString():"";s&&e!==o&&s.dispatch({changes:{from:0,to:o.length,insert:e||""},annotations:[G.of(!0)]})}},[e,s]),{state:S,setState:v,view:s,setView:d,container:y,setContainer:N}}var We=["className","value","selection","extensions","onChange","onStatistics","onCreateEditor","onUpdate","autoFocus","theme","height","minHeight","maxHeight","width","minWidth","maxWidth","basicSetup","placeholder","indentWithTab","editable","readOnly","root","initialState"],Ae=f.forwardRef((r,e)=>{var{className:t,value:i="",selection:a,extensions:l=[],onChange:c,onStatistics:h,onCreateEditor:n,onUpdate:p,autoFocus:x,theme:b="light",height:E,minHeight:B,maxHeight:F,width:H,minWidth:L,maxWidth:W,basicSetup:A,placeholder:K,indentWithTab:M,editable:D,readOnly:k,root:y,initialState:N}=r,s=q(r,We),d=f.useRef(null),{state:S,view:v,container:I,setContainer:O}=Le({root:y,value:i,autoFocus:x,theme:b,height:E,minHeight:B,maxHeight:F,width:H,minWidth:L,maxWidth:W,basicSetup:A,placeholder:K,indentWithTab:M,editable:D,readOnly:k,selection:a,onChange:c,onStatistics:h,onCreateEditor:n,onUpdate:p,extensions:l,initialState:N});f.useImperativeHandle(e,()=>({editor:d.current,state:S,view:v}),[d,I,S,v]);var R=f.useCallback(o=>{d.current=o,O(o)},[O]);if(typeof i!="string")throw new Error("value must be typeof string but got "+typeof i);var g=typeof b=="string"?"cm-theme-"+b:"cm-theme";return J.jsx("div",U({ref:R,className:""+g+(t?" "+t:"")},s))});Ae.displayName="CodeMirror";var Ke=r=>{var{theme:e,settings:t={},styles:i=[]}=r,a={".cm-gutters":{}},l={};t.background&&(l.backgroundColor=t.background),t.backgroundImage&&(l.backgroundImage=t.backgroundImage),t.foreground&&(l.color=t.foreground),t.fontSize&&(l.fontSize=t.fontSize),(t.background||t.foreground)&&(a["&"]=l),t.fontFamily&&(a["&.cm-editor .cm-scroller"]={fontFamily:t.fontFamily}),t.gutterBackground&&(a[".cm-gutters"].backgroundColor=t.gutterBackground),t.gutterForeground&&(a[".cm-gutters"].color=t.gutterForeground),t.gutterBorder&&(a[".cm-gutters"].borderRightColor=t.gutterBorder),t.caret&&(a[".cm-content"]={caretColor:t.caret},a[".cm-cursor, .cm-dropCursor"]={borderLeftColor:t.caret});var c={};t.gutterActiveForeground&&(c.color=t.gutterActiveForeground),t.lineHighlight&&(a[".cm-activeLine"]={backgroundColor:t.lineHighlight},c.backgroundColor=t.lineHighlight),a[".cm-activeLineGutter"]=c,t.selection&&(a["&.cm-focused .cm-selectionBackground, & .cm-line::selection, & .cm-selectionLayer .cm-selectionBackground, .cm-content ::selection"]={background:t.selection+" !important"}),t.selectionMatch&&(a["& .cm-selectionMatch"]={backgroundColor:t.selectionMatch});var h=m.theme(a,{dark:e==="dark"}),n=xe.define(i),p=[h,_(n)];return p},Me={background:"#2B2B2B",foreground:"#f8f8f2",caret:"#FFFFFF",selection:"rgba(255, 255, 255, 0.1)",selectionMatch:"rgba(255, 255, 255, 0.2)",gutterBackground:"rgba(255, 255, 255, 0.1)",gutterForeground:"#999",gutterBorder:"transparent",lineHighlight:"rgba(255, 255, 255, 0.1)"},Ne=[{tag:[u.atom,u.number],color:"#bd93f9"},{tag:[u.comment],color:"#61A151"},{tag:[u.string],color:"#6A8759"},{tag:[u.variableName,u.operator],color:"#A9B7C6"},{tag:[u.meta,u.className],color:"#A9B7C6"},{tag:[u.propertyName],color:"#FFC66D"},{tag:[u.keyword],color:"#CC7832"},{tag:[u.tagName],color:"#ff79c6"},{tag:[u.typeName],color:"#ffb86c"}],Oe=r=>{var{theme:e="dark",settings:t={},styles:i=[]}={};return Ke({theme:e,settings:U({},Me,t),styles:[...Ne,...i]})},Re=Oe();export{Ae as R,Re as d};
