var An=Object.defineProperty;var xn=(ce,J,oe)=>J in ce?An(ce,J,{enumerable:!0,configurable:!0,writable:!0,value:oe}):ce[J]=oe;var j=(ce,J,oe)=>xn(ce,typeof J!="symbol"?J+"":J,oe);(function(){"use strict";function ce(E){return E&&E.__esModule&&Object.prototype.hasOwnProperty.call(E,"default")?E.default:E}function J(E){if(Object.prototype.hasOwnProperty.call(E,"__esModule"))return E;var c=E.default;if(typeof c=="function"){var h=function f(){return this instanceof f?Reflect.construct(c,arguments,this.constructor):c.apply(this,arguments)};h.prototype=c.prototype}else h={};return Object.defineProperty(h,"__esModule",{value:!0}),Object.keys(E).forEach(function(f){var d=Object.getOwnPropertyDescriptor(E,f);Object.defineProperty(h,f,d.get?d:{enumerable:!0,get:function(){return E[f]}})}),h}var oe={exports:{}},wr=new Proxy({},{get(E,c){throw new Error(`Module "fs" has been externalized for browser compatibility. Cannot access "fs.${c}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),_r=Object.freeze({__proto__:null,default:wr}),vr=J(_r);new Proxy({},{get(E,c){throw new Error(`Module "path" has been externalized for browser compatibility. Cannot access "path.${c}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}});var gr=new Proxy({},{get(E,c){throw new Error(`Module "crypto" has been externalized for browser compatibility. Cannot access "crypto.${c}" in client code.  See https://vite.dev/guide/troubleshooting.html#module-externalized-for-browser-compatibility for more details.`)}}),Er=Object.freeze({__proto__:null,default:gr}),Sr=J(Er),xt;function Tr(){return xt||(xt=1,function(E,c){var h=void 0,f=function(d){return h||(h=new Promise(function(b,S){var _=typeof d<"u"?d:{},A=_.onAbort;_.onAbort=function(e){S(new Error(e)),A&&A(e)},_.postRun=_.postRun||[],_.postRun.push(function(){b(_)}),E=void 0;var o;o||(o=typeof _<"u"?_:{});var R=typeof window=="object",U=typeof WorkerGlobalScope<"u",C=typeof process=="object"&&typeof process.versions=="object"&&typeof process.versions.node=="string"&&process.type!="renderer";o.onRuntimeInitialized=function(){function e(a,l){switch(typeof l){case"boolean":qn(a,l?1:0);break;case"number":En(a,l);break;case"string":Sn(a,l,-1,-1);break;case"object":if(l===null)dr(a);else if(l.length!=null){var p=Je(l,Xe);Tn(a,p,l.length,-1),Ze(p)}else et(a,"Wrong API use : tried to return a value of an unknown type ("+l+").",-1);break;default:dr(a)}}function t(a,l){for(var p=[],v=0;v<a;v+=1){var g=re(l+4*v,"i32"),k=yn(g);if(k===1||k===2)g=gn(g);else if(k===3)g=_n(g);else if(k===4){k=g,g=wn(k),k=vn(k);for(var Y=new Uint8Array(g),G=0;G<g;G+=1)Y[G]=z[k+G];g=Y}else g=null;p.push(g)}return p}function r(a,l){this.Qa=a,this.db=l,this.Oa=1,this.lb=[]}function n(a,l){if(this.db=l,l=Ce(a)+1,this.eb=qt(l),this.eb===null)throw Error("Unable to allocate memory for the SQL string");ne(a,M,this.eb,l),this.kb=this.eb,this.Za=this.pb=null}function i(a){if(this.filename="dbfile_"+(4294967295*Math.random()>>>0),a!=null){var l=this.filename,p="/",v=l;if(p&&(p=typeof p=="string"?p:mt(p),v=l?ct(p+"/"+l):p),l=jt(!0,!0),v=Kr(v,l),a){if(typeof a=="string"){p=Array(a.length);for(var g=0,k=a.length;g<k;++g)p[g]=a.charCodeAt(g);a=p}He(v,l|146),p=Te(v,577),ir(p,a,0,a.length,0),_t(p),He(v,l)}}this.handleError(y(this.filename,s)),this.db=re(s,"i32"),br(this.db),this.fb={},this.Sa={}}var s=le(4),u=o.cwrap,y=u("sqlite3_open","number",["string","number"]),N=u("sqlite3_close_v2","number",["number"]),q=u("sqlite3_exec","number",["number","string","number","number","number"]),$=u("sqlite3_changes","number",["number"]),B=u("sqlite3_prepare_v2","number",["number","string","number","number","number"]),lr=u("sqlite3_sql","string",["number"]),Zr=u("sqlite3_normalized_sql","string",["number"]),cr=u("sqlite3_prepare_v2","number",["number","number","number","number","number"]),en=u("sqlite3_bind_text","number",["number","number","number","number","number"]),fr=u("sqlite3_bind_blob","number",["number","number","number","number","number"]),tn=u("sqlite3_bind_double","number",["number","number","number"]),rn=u("sqlite3_bind_int","number",["number","number","number"]),nn=u("sqlite3_bind_parameter_index","number",["number","string"]),on=u("sqlite3_step","number",["number"]),an=u("sqlite3_errmsg","string",["number"]),sn=u("sqlite3_column_count","number",["number"]),un=u("sqlite3_data_count","number",["number"]),ln=u("sqlite3_column_double","number",["number","number"]),hr=u("sqlite3_column_text","string",["number","number"]),cn=u("sqlite3_column_blob","number",["number","number"]),fn=u("sqlite3_column_bytes","number",["number","number"]),hn=u("sqlite3_column_type","number",["number","number"]),mn=u("sqlite3_column_name","string",["number","number"]),dn=u("sqlite3_reset","number",["number"]),pn=u("sqlite3_clear_bindings","number",["number"]),bn=u("sqlite3_finalize","number",["number"]),mr=u("sqlite3_create_function_v2","number","number string number number number number number number number".split(" ")),yn=u("sqlite3_value_type","number",["number"]),wn=u("sqlite3_value_bytes","number",["number"]),_n=u("sqlite3_value_text","string",["number"]),vn=u("sqlite3_value_blob","number",["number"]),gn=u("sqlite3_value_double","number",["number"]),En=u("sqlite3_result_double","",["number","number"]),dr=u("sqlite3_result_null","",["number"]),Sn=u("sqlite3_result_text","",["number","string","number","number"]),Tn=u("sqlite3_result_blob","",["number","number","number","number"]),qn=u("sqlite3_result_int","",["number","number"]),et=u("sqlite3_result_error","",["number","string","number"]),pr=u("sqlite3_aggregate_context","number",["number","number"]),br=u("RegisterExtensionFunctions","number",["number"]),yr=u("sqlite3_update_hook","number",["number","number","number"]);r.prototype.bind=function(a){if(!this.Qa)throw"Statement closed";return this.reset(),Array.isArray(a)?this.Cb(a):a!=null&&typeof a=="object"?this.Db(a):!0},r.prototype.step=function(){if(!this.Qa)throw"Statement closed";this.Oa=1;var a=on(this.Qa);switch(a){case 100:return!0;case 101:return!1;default:throw this.db.handleError(a)}},r.prototype.wb=function(a){return a==null&&(a=this.Oa,this.Oa+=1),ln(this.Qa,a)},r.prototype.Gb=function(a){if(a==null&&(a=this.Oa,this.Oa+=1),a=hr(this.Qa,a),typeof BigInt!="function")throw Error("BigInt is not supported");return BigInt(a)},r.prototype.Hb=function(a){return a==null&&(a=this.Oa,this.Oa+=1),hr(this.Qa,a)},r.prototype.getBlob=function(a){a==null&&(a=this.Oa,this.Oa+=1);var l=fn(this.Qa,a);a=cn(this.Qa,a);for(var p=new Uint8Array(l),v=0;v<l;v+=1)p[v]=z[a+v];return p},r.prototype.get=function(a,l){l=l||{},a!=null&&this.bind(a)&&this.step(),a=[];for(var p=un(this.Qa),v=0;v<p;v+=1)switch(hn(this.Qa,v)){case 1:var g=l.useBigInt?this.Gb(v):this.wb(v);a.push(g);break;case 2:a.push(this.wb(v));break;case 3:a.push(this.Hb(v));break;case 4:a.push(this.getBlob(v));break;default:a.push(null)}return a},r.prototype.getColumnNames=function(){for(var a=[],l=sn(this.Qa),p=0;p<l;p+=1)a.push(mn(this.Qa,p));return a},r.prototype.getAsObject=function(a,l){a=this.get(a,l),l=this.getColumnNames();for(var p={},v=0;v<l.length;v+=1)p[l[v]]=a[v];return p},r.prototype.getSQL=function(){return lr(this.Qa)},r.prototype.getNormalizedSQL=function(){return Zr(this.Qa)},r.prototype.run=function(a){return a!=null&&this.bind(a),this.step(),this.reset()},r.prototype.sb=function(a,l){l==null&&(l=this.Oa,this.Oa+=1),a=Ut(a);var p=Je(a,Xe);this.lb.push(p),this.db.handleError(en(this.Qa,l,p,a.length-1,0))},r.prototype.Bb=function(a,l){l==null&&(l=this.Oa,this.Oa+=1);var p=Je(a,Xe);this.lb.push(p),this.db.handleError(fr(this.Qa,l,p,a.length,0))},r.prototype.rb=function(a,l){l==null&&(l=this.Oa,this.Oa+=1),this.db.handleError((a===(a|0)?rn:tn)(this.Qa,l,a))},r.prototype.Eb=function(a){a==null&&(a=this.Oa,this.Oa+=1),fr(this.Qa,a,0,0,0)},r.prototype.tb=function(a,l){switch(l==null&&(l=this.Oa,this.Oa+=1),typeof a){case"string":this.sb(a,l);return;case"number":this.rb(a,l);return;case"bigint":this.sb(a.toString(),l);return;case"boolean":this.rb(a+0,l);return;case"object":if(a===null){this.Eb(l);return}if(a.length!=null){this.Bb(a,l);return}}throw"Wrong API use : tried to bind a value of an unknown type ("+a+")."},r.prototype.Db=function(a){var l=this;return Object.keys(a).forEach(function(p){var v=nn(l.Qa,p);v!==0&&l.tb(a[p],v)}),!0},r.prototype.Cb=function(a){for(var l=0;l<a.length;l+=1)this.tb(a[l],l+1);return!0},r.prototype.reset=function(){return this.freemem(),pn(this.Qa)===0&&dn(this.Qa)===0},r.prototype.freemem=function(){for(var a;(a=this.lb.pop())!==void 0;)Ze(a)},r.prototype.free=function(){this.freemem();var a=bn(this.Qa)===0;return delete this.db.fb[this.Qa],this.Qa=0,a},n.prototype.next=function(){if(this.eb===null)return{done:!0};if(this.Za!==null&&(this.Za.free(),this.Za=null),!this.db.db)throw this.mb(),Error("Database closed");var a=$e(),l=le(4);ke(s),ke(l);try{this.db.handleError(cr(this.db.db,this.kb,-1,s,l)),this.kb=re(l,"i32");var p=re(s,"i32");return p===0?(this.mb(),{done:!0}):(this.Za=new r(p,this.db),this.db.fb[p]=this.Za,{value:this.Za,done:!1})}catch(v){throw this.pb=lt(this.kb),this.mb(),v}finally{Pe(a)}},n.prototype.mb=function(){Ze(this.eb),this.eb=null},n.prototype.getRemainingSQL=function(){return this.pb!==null?this.pb:lt(this.kb)},typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"&&(n.prototype[Symbol.iterator]=function(){return this}),i.prototype.run=function(a,l){if(!this.db)throw"Database closed";if(l){a=this.prepare(a,l);try{a.step()}finally{a.free()}}else this.handleError(q(this.db,a,0,0,s));return this},i.prototype.exec=function(a,l,p){if(!this.db)throw"Database closed";var v=$e(),g=null;try{var k=St(a),Y=le(4);for(a=[];re(k,"i8")!==0;){ke(s),ke(Y),this.handleError(cr(this.db,k,-1,s,Y));var G=re(s,"i32");if(k=re(Y,"i32"),G!==0){var K=null;for(g=new r(G,this),l!=null&&g.bind(l);g.step();)K===null&&(K={columns:g.getColumnNames(),values:[]},a.push(K)),K.values.push(g.get(null,p));g.free()}}return a}catch(X){throw g&&g.free(),X}finally{Pe(v)}},i.prototype.each=function(a,l,p,v,g){typeof l=="function"&&(v=p,p=l,l=void 0),a=this.prepare(a,l);try{for(;a.step();)p(a.getAsObject(null,g))}finally{a.free()}if(typeof v=="function")return v()},i.prototype.prepare=function(a,l){if(ke(s),this.handleError(B(this.db,a,-1,s,0)),a=re(s,"i32"),a===0)throw"Nothing to prepare";var p=new r(a,this);return l!=null&&p.bind(l),this.fb[a]=p},i.prototype.iterateStatements=function(a){return new n(a,this)},i.prototype.export=function(){Object.values(this.fb).forEach(function(l){l.free()}),Object.values(this.Sa).forEach(ue),this.Sa={},this.handleError(N(this.db));var a=Hr(this.filename);return this.handleError(y(this.filename,s)),this.db=re(s,"i32"),br(this.db),a},i.prototype.close=function(){this.db!==null&&(Object.values(this.fb).forEach(function(a){a.free()}),Object.values(this.Sa).forEach(ue),this.Sa={},this.Ya&&(ue(this.Ya),this.Ya=void 0),this.handleError(N(this.db)),Zt("/"+this.filename),this.db=null)},i.prototype.handleError=function(a){if(a===0)return null;throw a=an(this.db),Error(a)},i.prototype.getRowsModified=function(){return $(this.db)},i.prototype.create_function=function(a,l){Object.prototype.hasOwnProperty.call(this.Sa,a)&&(ue(this.Sa[a]),delete this.Sa[a]);var p=Re(function(v,g,k){g=t(g,k);try{var Y=l.apply(null,g)}catch(G){et(v,G,-1);return}e(v,Y)},"viii");return this.Sa[a]=p,this.handleError(mr(this.db,a,l.length,1,0,p,0,0,0)),this},i.prototype.create_aggregate=function(a,l){var p=l.init||function(){return null},v=l.finalize||function(K){return K},g=l.step;if(!g)throw"An aggregate function must have a step function in "+a;var k={};Object.hasOwnProperty.call(this.Sa,a)&&(ue(this.Sa[a]),delete this.Sa[a]),l=a+"__finalize",Object.hasOwnProperty.call(this.Sa,l)&&(ue(this.Sa[l]),delete this.Sa[l]);var Y=Re(function(K,X,At){var we=pr(K,1);Object.hasOwnProperty.call(k,we)||(k[we]=p()),X=t(X,At),X=[k[we]].concat(X);try{k[we]=g.apply(null,X)}catch(Nn){delete k[we],et(K,Nn,-1)}},"viii"),G=Re(function(K){var X=pr(K,1);try{var At=v(k[X])}catch(we){delete k[X],et(K,we,-1);return}e(K,At),delete k[X]},"vi");return this.Sa[a]=Y,this.Sa[l]=G,this.handleError(mr(this.db,a,g.length-1,1,0,0,Y,G,0)),this},i.prototype.updateHook=function(a){this.Ya&&(yr(this.db,0,0),ue(this.Ya),this.Ya=void 0),a&&(this.Ya=Re(function(l,p,v,g,k){switch(p){case 18:l="insert";break;case 23:l="update";break;case 9:l="delete";break;default:throw"unknown operationCode in updateHook callback: "+p}if(v=v?P(M,v):"",g=g?P(M,g):"",k>Number.MAX_SAFE_INTEGER)throw"rowId too big to fit inside a Number";a(l,v,g,Number(k))},"viiiij"),yr(this.db,this.Ya,0))},o.Database=i};var I={...o},fe="./this.program",he=(e,t)=>{throw t},W="",Ne,me;if(C){var te=vr;W=__dirname+"/",me=e=>(e=Fe(e)?new URL(e):e,te.readFileSync(e)),Ne=async e=>(e=Fe(e)?new URL(e):e,te.readFileSync(e,void 0)),!o.thisProgram&&1<process.argv.length&&(fe=process.argv[1].replace(/\\/g,"/")),process.argv.slice(2),E.exports=o,he=(e,t)=>{throw process.exitCode=e,t}}else(R||U)&&(U?W=self.location.href:typeof document<"u"&&document.currentScript&&(W=document.currentScript.src),W=W.startsWith("blob:")?"":W.slice(0,W.replace(/[?#].*/,"").lastIndexOf("/")+1),U&&(me=e=>{var t=new XMLHttpRequest;return t.open("GET",e,!1),t.responseType="arraybuffer",t.send(null),new Uint8Array(t.response)}),Ne=async e=>{if(Fe(e))return new Promise((r,n)=>{var i=new XMLHttpRequest;i.open("GET",e,!0),i.responseType="arraybuffer",i.onload=()=>{i.status==200||i.status==0&&i.response?r(i.response):n(i.status)},i.onerror=n,i.send(null)});var t=await fetch(e,{credentials:"same-origin"});if(t.ok)return t.arrayBuffer();throw Error(t.status+" : "+t.url)});var Ae=o.print||console.log.bind(console),ve=o.printErr||console.error.bind(console);Object.assign(o,I),I=null,o.thisProgram&&(fe=o.thisProgram);var ze=o.wasmBinary,Ie,je=!1,nt,z,M,xe,O,D,it,V,ot,Fe=e=>e.startsWith("file://");function kt(){var e=Ie.buffer;o.HEAP8=z=new Int8Array(e),o.HEAP16=xe=new Int16Array(e),o.HEAPU8=M=new Uint8Array(e),o.HEAPU16=new Uint16Array(e),o.HEAP32=O=new Int32Array(e),o.HEAPU32=D=new Uint32Array(e),o.HEAPF32=it=new Float32Array(e),o.HEAPF64=ot=new Float64Array(e),o.HEAP64=V=new BigInt64Array(e),o.HEAPU64=new BigUint64Array(e)}var de=0,Me=null;function ge(e){var t;throw(t=o.onAbort)==null||t.call(o,e),e="Aborted("+e+")",ve(e),je=!0,new WebAssembly.RuntimeError(e+". Build with -sASSERTIONS for more info.")}var at;async function Or(e){if(!ze)try{var t=await Ne(e);return new Uint8Array(t)}catch{}if(e==at&&ze)e=new Uint8Array(ze);else if(me)e=me(e);else throw"both async and sync fetching of the wasm failed";return e}async function Lr(e,t){try{var r=await Or(e);return await WebAssembly.instantiate(r,t)}catch(n){ve(`failed to asynchronously prepare wasm: ${n}`),ge(n)}}async function Rr(e){var t=at;if(!ze&&typeof WebAssembly.instantiateStreaming=="function"&&!Fe(t)&&!C)try{var r=fetch(t,{credentials:"same-origin"});return await WebAssembly.instantiateStreaming(r,e)}catch(n){ve(`wasm streaming compile failed: ${n}`),ve("falling back to ArrayBuffer instantiation")}return Lr(t,e)}class st{constructor(t){j(this,"name","ExitStatus");this.message=`Program terminated with exit(${t})`,this.status=t}}var Ct=e=>{for(;0<e.length;)e.shift()(o)},Ot=[],Lt=[],Pr=()=>{var e=o.preRun.shift();Lt.unshift(e)};function re(e,t="i8"){switch(t.endsWith("*")&&(t="*"),t){case"i1":return z[e];case"i8":return z[e];case"i16":return xe[e>>1];case"i32":return O[e>>2];case"i64":return V[e>>3];case"float":return it[e>>2];case"double":return ot[e>>3];case"*":return D[e>>2];default:ge(`invalid type for getValue: ${t}`)}}var ut=o.noExitRuntime||!0;function ke(e){var t="i32";switch(t.endsWith("*")&&(t="*"),t){case"i1":z[e]=0;break;case"i8":z[e]=0;break;case"i16":xe[e>>1]=0;break;case"i32":O[e>>2]=0;break;case"i64":V[e>>3]=BigInt(0);break;case"float":it[e>>2]=0;break;case"double":ot[e>>3]=0;break;case"*":D[e>>2]=0;break;default:ge(`invalid type for setValue: ${t}`)}}var Rt=typeof TextDecoder<"u"?new TextDecoder:void 0,P=(e,t=0,r=NaN)=>{var n=t+r;for(r=t;e[r]&&!(r>=n);)++r;if(16<r-t&&e.buffer&&Rt)return Rt.decode(e.subarray(t,r));for(n="";t<r;){var i=e[t++];if(i&128){var s=e[t++]&63;if((i&224)==192)n+=String.fromCharCode((i&31)<<6|s);else{var u=e[t++]&63;i=(i&240)==224?(i&15)<<12|s<<6|u:(i&7)<<18|s<<12|u<<6|e[t++]&63,65536>i?n+=String.fromCharCode(i):(i-=65536,n+=String.fromCharCode(55296|i>>10,56320|i&1023))}}else n+=String.fromCharCode(i)}return n},lt=(e,t)=>e?P(M,e,t):"",Pt=(e,t)=>{for(var r=0,n=e.length-1;0<=n;n--){var i=e[n];i==="."?e.splice(n,1):i===".."?(e.splice(n,1),r++):r&&(e.splice(n,1),r--)}if(t)for(;r;r--)e.unshift("..");return e},ct=e=>{var t=e.charAt(0)==="/",r=e.slice(-1)==="/";return(e=Pt(e.split("/").filter(n=>!!n),!t).join("/"))||t||(e="."),e&&r&&(e+="/"),(t?"/":"")+e},$t=e=>{var t=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(e).slice(1);return e=t[0],t=t[1],!e&&!t?".":(t&&(t=t.slice(0,-1)),e+t)},We=e=>e&&e.match(/([^\/]+|\/)\/*$/)[1],$r=()=>{if(C){var e=Sr;return t=>e.randomFillSync(t)}return t=>crypto.getRandomValues(t)},Dt=e=>{(Dt=$r())(e)},Dr=(...e)=>{for(var t="",r=!1,n=e.length-1;-1<=n&&!r;n--){if(r=0<=n?e[n]:"/",typeof r!="string")throw new TypeError("Arguments to path.resolve must be strings");if(!r)return"";t=r+"/"+t,r=r.charAt(0)==="/"}return t=Pt(t.split("/").filter(i=>!!i),!r).join("/"),(r?"/":"")+t||"."},ft=[],Ce=e=>{for(var t=0,r=0;r<e.length;++r){var n=e.charCodeAt(r);127>=n?t++:2047>=n?t+=2:55296<=n&&57343>=n?(t+=4,++r):t+=3}return t},ne=(e,t,r,n)=>{if(!(0<n))return 0;var i=r;n=r+n-1;for(var s=0;s<e.length;++s){var u=e.charCodeAt(s);if(55296<=u&&57343>=u){var y=e.charCodeAt(++s);u=65536+((u&1023)<<10)|y&1023}if(127>=u){if(r>=n)break;t[r++]=u}else{if(2047>=u){if(r+1>=n)break;t[r++]=192|u>>6}else{if(65535>=u){if(r+2>=n)break;t[r++]=224|u>>12}else{if(r+3>=n)break;t[r++]=240|u>>18,t[r++]=128|u>>12&63}t[r++]=128|u>>6&63}t[r++]=128|u&63}}return t[r]=0,r-i},Ut=(e,t)=>{var r=Array(Ce(e)+1);return e=ne(e,r,0,r.length),t&&(r.length=e),r},zt=[];function It(e,t){zt[e]={input:[],output:[],cb:t},yt(e,Ur)}var Ur={open(e){var t=zt[e.node.rdev];if(!t)throw new m(43);e.tty=t,e.seekable=!1},close(e){e.tty.cb.fsync(e.tty)},fsync(e){e.tty.cb.fsync(e.tty)},read(e,t,r,n){if(!e.tty||!e.tty.cb.xb)throw new m(60);for(var i=0,s=0;s<n;s++){try{var u=e.tty.cb.xb(e.tty)}catch{throw new m(29)}if(u===void 0&&i===0)throw new m(6);if(u==null)break;i++,t[r+s]=u}return i&&(e.node.atime=Date.now()),i},write(e,t,r,n){if(!e.tty||!e.tty.cb.qb)throw new m(60);try{for(var i=0;i<n;i++)e.tty.cb.qb(e.tty,t[r+i])}catch{throw new m(29)}return n&&(e.node.mtime=e.node.ctime=Date.now()),i}},zr={xb(){e:{if(!ft.length){var e=null;if(C){var t=Buffer.alloc(256),r=0,n=process.stdin.fd;try{r=te.readSync(n,t,0,256)}catch(i){if(i.toString().includes("EOF"))r=0;else throw i}0<r&&(e=t.slice(0,r).toString("utf-8"))}else typeof window<"u"&&typeof window.prompt=="function"&&(e=window.prompt("Input: "),e!==null&&(e+=`
`));if(!e){e=null;break e}ft=Ut(e,!0)}e=ft.shift()}return e},qb(e,t){t===null||t===10?(Ae(P(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(Ae(P(e.output)),e.output=[])},Tb(){return{Ob:25856,Qb:5,Nb:191,Pb:35387,Mb:[3,28,127,21,4,0,1,0,17,19,26,0,18,15,23,22,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0]}},Ub(){return 0},Vb(){return[24,80]}},Ir={qb(e,t){t===null||t===10?(ve(P(e.output)),e.output=[]):t!=0&&e.output.push(t)},fsync(e){var t;0<((t=e.output)==null?void 0:t.length)&&(ve(P(e.output)),e.output=[])}},T={Wa:null,Xa(){return T.createNode(null,"/",16895,0)},createNode(e,t,r,n){if((r&61440)===24576||(r&61440)===4096)throw new m(63);return T.Wa||(T.Wa={dir:{node:{Ta:T.La.Ta,Ua:T.La.Ua,lookup:T.La.lookup,hb:T.La.hb,rename:T.La.rename,unlink:T.La.unlink,rmdir:T.La.rmdir,readdir:T.La.readdir,symlink:T.La.symlink},stream:{Va:T.Ma.Va}},file:{node:{Ta:T.La.Ta,Ua:T.La.Ua},stream:{Va:T.Ma.Va,read:T.Ma.read,write:T.Ma.write,ib:T.Ma.ib,jb:T.Ma.jb}},link:{node:{Ta:T.La.Ta,Ua:T.La.Ua,readlink:T.La.readlink},stream:{}},ub:{node:{Ta:T.La.Ta,Ua:T.La.Ua},stream:Br}}),r=Kt(e,t,r,n),Q(r.mode)?(r.La=T.Wa.dir.node,r.Ma=T.Wa.dir.stream,r.Na={}):(r.mode&61440)===32768?(r.La=T.Wa.file.node,r.Ma=T.Wa.file.stream,r.Ra=0,r.Na=null):(r.mode&61440)===40960?(r.La=T.Wa.link.node,r.Ma=T.Wa.link.stream):(r.mode&61440)===8192&&(r.La=T.Wa.ub.node,r.Ma=T.Wa.ub.stream),r.atime=r.mtime=r.ctime=Date.now(),e&&(e.Na[t]=r,e.atime=e.mtime=e.ctime=r.atime),r},Sb(e){return e.Na?e.Na.subarray?e.Na.subarray(0,e.Ra):new Uint8Array(e.Na):new Uint8Array(0)},La:{Ta(e){var t={};return t.dev=(e.mode&61440)===8192?e.id:1,t.ino=e.id,t.mode=e.mode,t.nlink=1,t.uid=0,t.gid=0,t.rdev=e.rdev,Q(e.mode)?t.size=4096:(e.mode&61440)===32768?t.size=e.Ra:(e.mode&61440)===40960?t.size=e.link.length:t.size=0,t.atime=new Date(e.atime),t.mtime=new Date(e.mtime),t.ctime=new Date(e.ctime),t.blksize=4096,t.blocks=Math.ceil(t.size/t.blksize),t},Ua(e,t){for(var r of["mode","atime","mtime","ctime"])t[r]!=null&&(e[r]=t[r]);t.size!==void 0&&(t=t.size,e.Ra!=t&&(t==0?(e.Na=null,e.Ra=0):(r=e.Na,e.Na=new Uint8Array(t),r&&e.Na.set(r.subarray(0,Math.min(t,e.Ra))),e.Ra=t)))},lookup(){throw T.vb},hb(e,t,r,n){return T.createNode(e,t,r,n)},rename(e,t,r){try{var n=pe(t,r)}catch{}if(n){if(Q(e.mode))for(var i in n.Na)throw new m(55);pt(n)}delete e.parent.Na[e.name],t.Na[r]=e,e.name=r,t.ctime=t.mtime=e.parent.ctime=e.parent.mtime=Date.now()},unlink(e,t){delete e.Na[t],e.ctime=e.mtime=Date.now()},rmdir(e,t){var r=pe(e,t),n;for(n in r.Na)throw new m(55);delete e.Na[t],e.ctime=e.mtime=Date.now()},readdir(e){return[".","..",...Object.keys(e.Na)]},symlink(e,t,r){return e=T.createNode(e,t,41471,0),e.link=r,e},readlink(e){if((e.mode&61440)!==40960)throw new m(28);return e.link}},Ma:{read(e,t,r,n,i){var s=e.node.Na;if(i>=e.node.Ra)return 0;if(e=Math.min(e.node.Ra-i,n),8<e&&s.subarray)t.set(s.subarray(i,i+e),r);else for(n=0;n<e;n++)t[r+n]=s[i+n];return e},write(e,t,r,n,i,s){if(t.buffer===z.buffer&&(s=!1),!n)return 0;if(e=e.node,e.mtime=e.ctime=Date.now(),t.subarray&&(!e.Na||e.Na.subarray)){if(s)return e.Na=t.subarray(r,r+n),e.Ra=n;if(e.Ra===0&&i===0)return e.Na=t.slice(r,r+n),e.Ra=n;if(i+n<=e.Ra)return e.Na.set(t.subarray(r,r+n),i),n}s=i+n;var u=e.Na?e.Na.length:0;if(u>=s||(s=Math.max(s,u*(1048576>u?2:1.125)>>>0),u!=0&&(s=Math.max(s,256)),u=e.Na,e.Na=new Uint8Array(s),0<e.Ra&&e.Na.set(u.subarray(0,e.Ra),0)),e.Na.subarray&&t.subarray)e.Na.set(t.subarray(r,r+n),i);else for(s=0;s<n;s++)e.Na[i+s]=t[r+s];return e.Ra=Math.max(e.Ra,i+n),n},Va(e,t,r){if(r===1?t+=e.position:r===2&&(e.node.mode&61440)===32768&&(t+=e.node.Ra),0>t)throw new m(28);return t},ib(e,t,r,n,i){if((e.node.mode&61440)!==32768)throw new m(43);if(e=e.node.Na,i&2||!e||e.buffer!==z.buffer){i=!0,n=65536*Math.ceil(t/65536);var s=sr(65536,n);if(s&&M.fill(0,s,s+n),n=s,!n)throw new m(48);e&&((0<r||r+t<e.length)&&(e.subarray?e=e.subarray(r,r+t):e=Array.prototype.slice.call(e,r,r+t)),z.set(e,n))}else i=!1,n=e.byteOffset;return{Kb:n,Ab:i}},jb(e,t,r,n){return T.Ma.write(e,t,0,n,r,!1),0}}},jt=(e,t)=>{var r=0;return e&&(r|=365),t&&(r|=146),r},ht=null,Ft={},Ee=[],jr=1,ae=null,Wt=!1,Qt=!0,Bt={},m=class{constructor(e){j(this,"name","ErrnoError");this.Pa=e}},Fr=class{constructor(){j(this,"gb",{});j(this,"node",null)}get flags(){return this.gb.flags}set flags(e){this.gb.flags=e}get position(){return this.gb.position}set position(e){this.gb.position=e}},Wr=class{constructor(e,t,r,n){j(this,"La",{});j(this,"Ma",{});j(this,"ab",null);e||(e=this),this.parent=e,this.Xa=e.Xa,this.id=jr++,this.name=t,this.mode=r,this.rdev=n,this.atime=this.mtime=this.ctime=Date.now()}get read(){return(this.mode&365)===365}set read(e){e?this.mode|=365:this.mode&=-366}get write(){return(this.mode&146)===146}set write(e){e?this.mode|=146:this.mode&=-147}};function H(e,t={}){if(!e)throw new m(44);t.nb??(t.nb=!0),e.charAt(0)==="/"||(e="//"+e);var r=0;e:for(;40>r;r++){e=e.split("/").filter(y=>!!y);for(var n=ht,i="/",s=0;s<e.length;s++){var u=s===e.length-1;if(u&&t.parent)break;if(e[s]!==".")if(e[s]==="..")i=$t(i),n=n.parent;else{i=ct(i+"/"+e[s]);try{n=pe(n,e[s])}catch(y){if((y==null?void 0:y.Pa)===44&&u&&t.Jb)return{path:i};throw y}if(!n.ab||u&&!t.nb||(n=n.ab.root),(n.mode&61440)===40960&&(!u||t.$a)){if(!n.La.readlink)throw new m(52);n=n.La.readlink(n),n.charAt(0)==="/"||(n=$t(i)+"/"+n),e=n+"/"+e.slice(s+1).join("/");continue e}}}return{path:i,node:n}}throw new m(32)}function mt(e){for(var t;;){if(e===e.parent)return e=e.Xa.zb,t?e[e.length-1]!=="/"?`${e}/${t}`:e+t:e;t=t?`${e.name}/${t}`:e.name,e=e.parent}}function dt(e,t){for(var r=0,n=0;n<t.length;n++)r=(r<<5)-r+t.charCodeAt(n)|0;return(e+r>>>0)%ae.length}function pt(e){var t=dt(e.parent.id,e.name);if(ae[t]===e)ae[t]=e.bb;else for(t=ae[t];t;){if(t.bb===e){t.bb=e.bb;break}t=t.bb}}function pe(e,t){var r=Q(e.mode)?(r=Se(e,"x"))?r:e.La.lookup?0:2:54;if(r)throw new m(r);for(r=ae[dt(e.id,t)];r;r=r.bb){var n=r.name;if(r.parent.id===e.id&&n===t)return r}return e.La.lookup(e,t)}function Kt(e,t,r,n){return e=new Wr(e,t,r,n),t=dt(e.parent.id,e.name),e.bb=ae[t],ae[t]=e}function Q(e){return(e&61440)===16384}function Ht(e){var t=["r","w","rw"][e&3];return e&512&&(t+="w"),t}function Se(e,t){if(Qt)return 0;if(!t.includes("r")||e.mode&292){if(t.includes("w")&&!(e.mode&146)||t.includes("x")&&!(e.mode&73))return 2}else return 2;return 0}function Gt(e,t){if(!Q(e.mode))return 54;try{return pe(e,t),20}catch{}return Se(e,"wx")}function Vt(e,t,r){try{var n=pe(e,t)}catch(i){return i.Pa}if(e=Se(e,"wx"))return e;if(r){if(!Q(n.mode))return 54;if(n===n.parent||mt(n)==="/")return 10}else if(Q(n.mode))return 31;return 0}function Qe(e){if(!e)throw new m(63);return e}function F(e){if(e=Ee[e],!e)throw new m(8);return e}function Yt(e,t=-1){if(e=Object.assign(new Fr,e),t==-1)e:{for(t=0;4096>=t;t++)if(!Ee[t])break e;throw new m(33)}return e.fd=t,Ee[t]=e}function Qr(e,t=-1){var r,n;return e=Yt(e,t),(n=(r=e.Ma)==null?void 0:r.Rb)==null||n.call(r,e),e}function bt(e,t,r){var n=e==null?void 0:e.Ma.Ua;e=n?e:t,n??(n=t.La.Ua),Qe(n),n(e,r)}var Br={open(e){var t,r;e.Ma=Ft[e.node.rdev].Ma,(r=(t=e.Ma).open)==null||r.call(t,e)},Va(){throw new m(70)}};function yt(e,t){Ft[e]={Ma:t}}function Xt(e,t){var r=t==="/";if(r&&ht)throw new m(10);if(!r&&t){var n=H(t,{nb:!1});if(t=n.path,n=n.node,n.ab)throw new m(10);if(!Q(n.mode))throw new m(54)}t={type:e,Wb:{},zb:t,Ib:[]},e=e.Xa(t),e.Xa=t,t.root=e,r?ht=e:n&&(n.ab=t,n.Xa&&n.Xa.Ib.push(t))}function Be(e,t,r){var n=H(e,{parent:!0}).node;if(e=We(e),!e)throw new m(28);if(e==="."||e==="..")throw new m(20);var i=Gt(n,e);if(i)throw new m(i);if(!n.La.hb)throw new m(63);return n.La.hb(n,e,t,r)}function Kr(e,t=438){return Be(e,t&4095|32768,0)}function Z(e,t=511){return Be(e,t&1023|16384,0)}function Ke(e,t,r){typeof r>"u"&&(r=t,t=438),Be(e,t|8192,r)}function wt(e,t){if(!Dr(e))throw new m(44);var r=H(t,{parent:!0}).node;if(!r)throw new m(44);t=We(t);var n=Gt(r,t);if(n)throw new m(n);if(!r.La.symlink)throw new m(63);r.La.symlink(r,t,e)}function Jt(e){var t=H(e,{parent:!0}).node;e=We(e);var r=pe(t,e),n=Vt(t,e,!0);if(n)throw new m(n);if(!t.La.rmdir)throw new m(63);if(r.ab)throw new m(10);t.La.rmdir(t,e),pt(r)}function Zt(e){var t=H(e,{parent:!0}).node;if(!t)throw new m(44);e=We(e);var r=pe(t,e),n=Vt(t,e,!1);if(n)throw new m(n);if(!t.La.unlink)throw new m(63);if(r.ab)throw new m(10);t.La.unlink(t,e),pt(r)}function Oe(e,t){return e=H(e,{$a:!t}).node,Qe(e.La.Ta)(e)}function er(e,t,r,n){bt(e,t,{mode:r&4095|t.mode&-4096,ctime:Date.now(),Fb:n})}function He(e,t){e=typeof e=="string"?H(e,{$a:!0}).node:e,er(null,e,t)}function tr(e,t,r){if(Q(t.mode))throw new m(31);if((t.mode&61440)!==32768)throw new m(28);var n=Se(t,"w");if(n)throw new m(n);bt(e,t,{size:r,timestamp:Date.now()})}function Te(e,t,r=438){if(e==="")throw new m(44);if(typeof t=="string"){var n={r:0,"r+":2,w:577,"w+":578,a:1089,"a+":1090}[t];if(typeof n>"u")throw Error(`Unknown file open mode: ${t}`);t=n}if(r=t&64?r&4095|32768:0,typeof e=="object")n=e;else{var i=e.endsWith("/");e=H(e,{$a:!(t&131072),Jb:!0}),n=e.node,e=e.path}var s=!1;if(t&64)if(n){if(t&128)throw new m(20)}else{if(i)throw new m(31);n=Be(e,r|511,0),s=!0}if(!n)throw new m(44);if((n.mode&61440)===8192&&(t&=-513),t&65536&&!Q(n.mode))throw new m(54);if(!s&&(i=n?(n.mode&61440)===40960?32:Q(n.mode)&&(Ht(t)!=="r"||t&576)?31:Se(n,Ht(t)):44))throw new m(i);return t&512&&!s&&(i=n,i=typeof i=="string"?H(i,{$a:!0}).node:i,tr(null,i,0)),t&=-131713,i=Yt({node:n,path:mt(n),flags:t,seekable:!0,position:0,Ma:n.Ma,Lb:[],error:!1}),i.Ma.open&&i.Ma.open(i),s&&He(n,r&511),!o.logReadFiles||t&1||e in Bt||(Bt[e]=1),i}function _t(e){if(e.fd===null)throw new m(8);e.ob&&(e.ob=null);try{e.Ma.close&&e.Ma.close(e)}catch(t){throw t}finally{Ee[e.fd]=null}e.fd=null}function rr(e,t,r){if(e.fd===null)throw new m(8);if(!e.seekable||!e.Ma.Va)throw new m(70);if(r!=0&&r!=1&&r!=2)throw new m(28);e.position=e.Ma.Va(e,t,r),e.Lb=[]}function nr(e,t,r,n,i){if(0>n||0>i)throw new m(28);if(e.fd===null)throw new m(8);if((e.flags&2097155)===1)throw new m(8);if(Q(e.node.mode))throw new m(31);if(!e.Ma.read)throw new m(28);var s=typeof i<"u";if(!s)i=e.position;else if(!e.seekable)throw new m(70);return t=e.Ma.read(e,t,r,n,i),s||(e.position+=t),t}function ir(e,t,r,n,i){if(0>n||0>i)throw new m(28);if(e.fd===null)throw new m(8);if((e.flags&2097155)===0)throw new m(8);if(Q(e.node.mode))throw new m(31);if(!e.Ma.write)throw new m(28);e.seekable&&e.flags&1024&&rr(e,0,2);var s=typeof i<"u";if(!s)i=e.position;else if(!e.seekable)throw new m(70);return t=e.Ma.write(e,t,r,n,i,void 0),s||(e.position+=t),t}function Hr(e){var t,r=Te(e,r||0);e=Oe(e).size;var n=new Uint8Array(e);return nr(r,n,0,e,0),t=n,_t(r),t}function se(e,t,r){e=ct("/dev/"+e);var n=jt(!!t,!!r);se.yb??(se.yb=64);var i=se.yb++<<8|0;yt(i,{open(s){s.seekable=!1},close(){var s;(s=r==null?void 0:r.buffer)!=null&&s.length&&r(10)},read(s,u,y,N){for(var q=0,$=0;$<N;$++){try{var B=t()}catch{throw new m(29)}if(B===void 0&&q===0)throw new m(6);if(B==null)break;q++,u[y+$]=B}return q&&(s.node.atime=Date.now()),q},write(s,u,y,N){for(var q=0;q<N;q++)try{r(u[y+q])}catch{throw new m(29)}return N&&(s.node.mtime=s.node.ctime=Date.now()),q}}),Ke(e,n,i)}var L={};function be(e,t,r){if(t.charAt(0)==="/")return t;if(e=e===-100?"/":F(e).path,t.length==0){if(!r)throw new m(44);return e}return e+"/"+t}function Ge(e,t){O[e>>2]=t.dev,O[e+4>>2]=t.mode,D[e+8>>2]=t.nlink,O[e+12>>2]=t.uid,O[e+16>>2]=t.gid,O[e+20>>2]=t.rdev,V[e+24>>3]=BigInt(t.size),O[e+32>>2]=4096,O[e+36>>2]=t.blocks;var r=t.atime.getTime(),n=t.mtime.getTime(),i=t.ctime.getTime();return V[e+40>>3]=BigInt(Math.floor(r/1e3)),D[e+48>>2]=r%1e3*1e6,V[e+56>>3]=BigInt(Math.floor(n/1e3)),D[e+64>>2]=n%1e3*1e6,V[e+72>>3]=BigInt(Math.floor(i/1e3)),D[e+80>>2]=i%1e3*1e6,V[e+88>>3]=BigInt(t.ino),0}var Ve=void 0,Ye=()=>{var e=O[+Ve>>2];return Ve+=4,e},vt=0,Gr=[0,31,60,91,121,152,182,213,244,274,305,335],Vr=[0,31,59,90,120,151,181,212,243,273,304,334],Le={},or=e=>{var t;nt=e,ut||0<vt||((t=o.onExit)==null||t.call(o,e),je=!0),he(e,new st(e))},Yr=e=>{if(!je)try{if(e(),!(ut||0<vt))try{nt=e=nt,or(e)}catch(t){t instanceof st||t=="unwind"||he(1,t)}}catch(t){t instanceof st||t=="unwind"||he(1,t)}},gt={},ar=()=>{if(!Et){var e={USER:"web_user",LOGNAME:"web_user",PATH:"/",PWD:"/",HOME:"/home/web_user",LANG:(typeof navigator=="object"&&navigator.languages&&navigator.languages[0]||"C").replace("-","_")+".UTF-8",_:fe||"./this.program"},t;for(t in gt)gt[t]===void 0?delete e[t]:e[t]=gt[t];var r=[];for(t in e)r.push(`${t}=${e[t]}`);Et=r}return Et},Et,St=e=>{var t=Ce(e)+1,r=le(t);return ne(e,M,r,t),r},Xr=(e,t,r,n)=>{var i={string:q=>{var $=0;return q!=null&&q!==0&&($=St(q)),$},array:q=>{var $=le(q.length);return z.set(q,$),$}};e=o["_"+e];var s=[],u=0;if(n)for(var y=0;y<n.length;y++){var N=i[r[y]];N?(u===0&&(u=$e()),s[y]=N(n[y])):s[y]=n[y]}return r=e(...s),r=function(q){return u!==0&&Pe(u),t==="string"?q?P(M,q):"":t==="boolean"?!!q:q}(r)},Xe=0,Je=(e,t)=>(t=t==1?le(e.length):qt(e.length),e.subarray||e.slice||(e=new Uint8Array(e)),M.set(e,t),t),ye,Tt=[],ie,ue=e=>{ye.delete(ie.get(e)),ie.set(e,null),Tt.push(e)},Re=(e,t)=>{if(!ye){ye=new WeakMap;var r=ie.length;if(ye)for(var n=0;n<0+r;n++){var i=ie.get(n);i&&ye.set(i,n)}}if(r=ye.get(e)||0)return r;if(Tt.length)r=Tt.pop();else{try{ie.grow(1)}catch(N){throw N instanceof RangeError?"Unable to grow wasm table. Set ALLOW_TABLE_GROWTH.":N}r=ie.length-1}try{ie.set(r,e)}catch(N){if(!(N instanceof TypeError))throw N;if(typeof WebAssembly.Function=="function"){var s=WebAssembly.Function;n={i:"i32",j:"i64",f:"f32",d:"f64",e:"externref",p:"i32"},i={parameters:[],results:t[0]=="v"?[]:[n[t[0]]]};for(var u=1;u<t.length;++u)i.parameters.push(n[t[u]]);t=new s(i,e)}else{n=[1],i=t.slice(0,1),t=t.slice(1),u={i:127,p:127,j:126,f:125,d:124,e:111},n.push(96);var y=t.length;128>y?n.push(y):n.push(y%128|128,y>>7);for(s of t)n.push(u[s]);i=="v"?n.push(0):n.push(1,u[i]),t=[0,97,115,109,1,0,0,0,1],s=n.length,128>s?t.push(s):t.push(s%128|128,s>>7),t.push(...n),t.push(2,7,1,1,101,1,102,0,0,7,5,1,1,102,0,0),t=new WebAssembly.Module(new Uint8Array(t)),t=new WebAssembly.Instance(t,{e:{f:e}}).exports.f}ie.set(r,t)}return ye.set(e,r),r};ae=Array(4096),Xt(T,"/"),Z("/tmp"),Z("/home"),Z("/home/web_user"),function(){Z("/dev"),yt(259,{read:()=>0,write:(n,i,s,u)=>u,Va:()=>0}),Ke("/dev/null",259),It(1280,zr),It(1536,Ir),Ke("/dev/tty",1280),Ke("/dev/tty1",1536);var e=new Uint8Array(1024),t=0,r=()=>(t===0&&(Dt(e),t=e.byteLength),e[--t]);se("random",r),se("urandom",r),Z("/dev/shm"),Z("/dev/shm/tmp")}(),function(){Z("/proc");var e=Z("/proc/self");Z("/proc/self/fd"),Xt({Xa(){var t=Kt(e,"fd",16895,73);return t.Ma={Va:T.Ma.Va},t.La={lookup(r,n){r=+n;var i=F(r);return r={parent:null,Xa:{zb:"fake"},La:{readlink:()=>i.path},id:r+1},r.parent=r},readdir(){return Array.from(Ee.entries()).filter(([,r])=>r).map(([r])=>r.toString())}},t}},"/proc/self/fd")}(),T.vb=new m(44),T.vb.stack="<generic error, no stack>";var Jr={a:(e,t,r,n)=>ge(`Assertion failed: ${e?P(M,e):""}, at: `+[t?t?P(M,t):"":"unknown filename",r,n?n?P(M,n):"":"unknown function"]),i:function(e,t){try{return e=e?P(M,e):"",He(e,t),0}catch(r){if(typeof L>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},L:function(e,t,r){try{if(t=t?P(M,t):"",t=be(e,t),r&-8)return-28;var n=H(t,{$a:!0}).node;return n?(e="",r&4&&(e+="r"),r&2&&(e+="w"),r&1&&(e+="x"),e&&Se(n,e)?-2:0):-44}catch(i){if(typeof L>"u"||i.name!=="ErrnoError")throw i;return-i.Pa}},j:function(e,t){try{var r=F(e);return er(r,r.node,t,!1),0}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},h:function(e){try{var t=F(e);return bt(t,t.node,{timestamp:Date.now(),Fb:!1}),0}catch(r){if(typeof L>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},b:function(e,t,r){Ve=r;try{var n=F(e);switch(t){case 0:var i=Ye();if(0>i)break;for(;Ee[i];)i++;return Qr(n,i).fd;case 1:case 2:return 0;case 3:return n.flags;case 4:return i=Ye(),n.flags|=i,0;case 12:return i=Ye(),xe[i+0>>1]=2,0;case 13:case 14:return 0}return-28}catch(s){if(typeof L>"u"||s.name!=="ErrnoError")throw s;return-s.Pa}},g:function(e,t){try{var r=F(e),n=r.node,i=r.Ma.Ta;e=i?r:n,i??(i=n.La.Ta),Qe(i);var s=i(e);return Ge(t,s)}catch(u){if(typeof L>"u"||u.name!=="ErrnoError")throw u;return-u.Pa}},H:function(e,t){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var r=F(e);if(0>t||(r.flags&2097155)===0)throw new m(28);return tr(r,r.node,t),0}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},G:function(e,t){try{if(t===0)return-28;var r=Ce("/")+1;return t<r?-68:(ne("/",M,e,t),r)}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},K:function(e,t){try{return e=e?P(M,e):"",Ge(t,Oe(e,!0))}catch(r){if(typeof L>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},C:function(e,t,r){try{return t=t?P(M,t):"",t=be(e,t),Z(t,r),0}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},J:function(e,t,r,n){try{t=t?P(M,t):"";var i=n&256;return t=be(e,t,n&4096),Ge(r,i?Oe(t,!0):Oe(t))}catch(s){if(typeof L>"u"||s.name!=="ErrnoError")throw s;return-s.Pa}},x:function(e,t,r,n){Ve=n;try{t=t?P(M,t):"",t=be(e,t);var i=n?Ye():0;return Te(t,r,i).fd}catch(s){if(typeof L>"u"||s.name!=="ErrnoError")throw s;return-s.Pa}},v:function(e,t,r,n){try{if(t=t?P(M,t):"",t=be(e,t),0>=n)return-28;var i=H(t).node;if(!i)throw new m(44);if(!i.La.readlink)throw new m(28);var s=i.La.readlink(i),u=Math.min(n,Ce(s)),y=z[r+u];return ne(s,M,r,n+1),z[r+u]=y,u}catch(N){if(typeof L>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},u:function(e){try{return e=e?P(M,e):"",Jt(e),0}catch(t){if(typeof L>"u"||t.name!=="ErrnoError")throw t;return-t.Pa}},f:function(e,t){try{return e=e?P(M,e):"",Ge(t,Oe(e))}catch(r){if(typeof L>"u"||r.name!=="ErrnoError")throw r;return-r.Pa}},r:function(e,t,r){try{return t=t?P(M,t):"",t=be(e,t),r===0?Zt(t):r===512?Jt(t):ge("Invalid flags passed to unlinkat"),0}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return-n.Pa}},q:function(e,t,r){try{t=t?P(M,t):"",t=be(e,t,!0);var n=Date.now(),i,s;if(r){var u=D[r>>2]+4294967296*O[r+4>>2],y=O[r+8>>2];y==1073741823?i=n:y==1073741822?i=null:i=1e3*u+y/1e6,r+=16,u=D[r>>2]+4294967296*O[r+4>>2],y=O[r+8>>2],y==1073741823?s=n:y==1073741822?s=null:s=1e3*u+y/1e6}else s=i=n;if((s??i)!==null){e=i;var N=H(t,{$a:!0}).node;Qe(N.La.Ua)(N,{atime:e,mtime:s})}return 0}catch(q){if(typeof L>"u"||q.name!=="ErrnoError")throw q;return-q.Pa}},m:()=>ge(""),l:()=>{ut=!1,vt=0},A:function(e,t){e=-9007199254740992>e||9007199254740992<e?NaN:Number(e),e=new Date(1e3*e),O[t>>2]=e.getSeconds(),O[t+4>>2]=e.getMinutes(),O[t+8>>2]=e.getHours(),O[t+12>>2]=e.getDate(),O[t+16>>2]=e.getMonth(),O[t+20>>2]=e.getFullYear()-1900,O[t+24>>2]=e.getDay();var r=e.getFullYear();O[t+28>>2]=(r%4!==0||r%100===0&&r%400!==0?Vr:Gr)[e.getMonth()]+e.getDate()-1|0,O[t+36>>2]=-(60*e.getTimezoneOffset()),r=new Date(e.getFullYear(),6,1).getTimezoneOffset();var n=new Date(e.getFullYear(),0,1).getTimezoneOffset();O[t+32>>2]=(r!=n&&e.getTimezoneOffset()==Math.min(n,r))|0},y:function(e,t,r,n,i,s,u){i=-9007199254740992>i||9007199254740992<i?NaN:Number(i);try{if(isNaN(i))return 61;var y=F(n);if((t&2)!==0&&(r&2)===0&&(y.flags&2097155)!==2)throw new m(2);if((y.flags&2097155)===1)throw new m(2);if(!y.Ma.ib)throw new m(43);if(!e)throw new m(28);var N=y.Ma.ib(y,e,i,t,r),q=N.Kb;return O[s>>2]=N.Ab,D[u>>2]=q,0}catch($){if(typeof L>"u"||$.name!=="ErrnoError")throw $;return-$.Pa}},z:function(e,t,r,n,i,s){s=-9007199254740992>s||9007199254740992<s?NaN:Number(s);try{var u=F(i);if(r&2){if(r=s,(u.node.mode&61440)!==32768)throw new m(43);if(!(n&2)){var y=M.slice(e,e+t);u.Ma.jb&&u.Ma.jb(u,y,r,t,n)}}}catch(N){if(typeof L>"u"||N.name!=="ErrnoError")throw N;return-N.Pa}},n:(e,t)=>{if(Le[e]&&(clearTimeout(Le[e].id),delete Le[e]),!t)return 0;var r=setTimeout(()=>{delete Le[e],Yr(()=>ur(e,performance.now()))},t);return Le[e]={id:r,Xb:t},0},B:(e,t,r,n)=>{var i=new Date().getFullYear(),s=new Date(i,0,1).getTimezoneOffset();i=new Date(i,6,1).getTimezoneOffset(),D[e>>2]=60*Math.max(s,i),O[t>>2]=+(s!=i),t=u=>{var y=Math.abs(u);return`UTC${0<=u?"-":"+"}${String(Math.floor(y/60)).padStart(2,"0")}${String(y%60).padStart(2,"0")}`},e=t(s),t=t(i),i<s?(ne(e,M,r,17),ne(t,M,n,17)):(ne(e,M,n,17),ne(t,M,r,17))},d:()=>Date.now(),s:()=>2147483648,c:()=>performance.now(),o:e=>{var t=M.length;if(e>>>=0,2147483648<e)return!1;for(var r=1;4>=r;r*=2){var n=t*(1+.2/r);n=Math.min(n,e+100663296);e:{n=(Math.min(2147483648,65536*Math.ceil(Math.max(e,n)/65536))-Ie.buffer.byteLength+65535)/65536|0;try{Ie.grow(n),kt();var i=1;break e}catch{}i=void 0}if(i)return!0}return!1},E:(e,t)=>{var r=0;return ar().forEach((n,i)=>{var s=t+r;for(i=D[e+4*i>>2]=s,s=0;s<n.length;++s)z[i++]=n.charCodeAt(s);z[i]=0,r+=n.length+1}),0},F:(e,t)=>{var r=ar();D[e>>2]=r.length;var n=0;return r.forEach(i=>n+=i.length+1),D[t>>2]=n,0},e:function(e){try{var t=F(e);return _t(t),0}catch(r){if(typeof L>"u"||r.name!=="ErrnoError")throw r;return r.Pa}},p:function(e,t){try{var r=F(e);return z[t]=r.tty?2:Q(r.mode)?3:(r.mode&61440)===40960?7:4,xe[t+2>>1]=0,V[t+8>>3]=BigInt(0),V[t+16>>3]=BigInt(0),0}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},w:function(e,t,r,n){try{e:{var i=F(e);e=t;for(var s,u=t=0;u<r;u++){var y=D[e>>2],N=D[e+4>>2];e+=8;var q=nr(i,z,y,N,s);if(0>q){var $=-1;break e}if(t+=q,q<N)break;typeof s<"u"&&(s+=q)}$=t}return D[n>>2]=$,0}catch(B){if(typeof L>"u"||B.name!=="ErrnoError")throw B;return B.Pa}},D:function(e,t,r,n){t=-9007199254740992>t||9007199254740992<t?NaN:Number(t);try{if(isNaN(t))return 61;var i=F(e);return rr(i,t,r),V[n>>3]=BigInt(i.position),i.ob&&t===0&&r===0&&(i.ob=null),0}catch(s){if(typeof L>"u"||s.name!=="ErrnoError")throw s;return s.Pa}},I:function(e){var r;try{var t=F(e);return(r=t.Ma)!=null&&r.fsync?t.Ma.fsync(t):0}catch(n){if(typeof L>"u"||n.name!=="ErrnoError")throw n;return n.Pa}},t:function(e,t,r,n){try{e:{var i=F(e);e=t;for(var s,u=t=0;u<r;u++){var y=D[e>>2],N=D[e+4>>2];e+=8;var q=ir(i,z,y,N,s);if(0>q){var $=-1;break e}if(t+=q,q<N)break;typeof s<"u"&&(s+=q)}$=t}return D[n>>2]=$,0}catch(B){if(typeof L>"u"||B.name!=="ErrnoError")throw B;return B.Pa}},k:or},w;(async function(){var r;function e(n){var i;return w=n.exports,Ie=w.M,kt(),ie=w.O,de--,(i=o.monitorRunDependencies)==null||i.call(o,de),de==0&&Me&&(n=Me,Me=null,n()),w}de++,(r=o.monitorRunDependencies)==null||r.call(o,de);var t={a:Jr};return o.instantiateWasm?new Promise(n=>{o.instantiateWasm(t,(i,s)=>{e(i),n(i.exports)})}):(at??(at=o.locateFile?o.locateFile("sql-wasm.wasm",W):W+"sql-wasm.wasm"),e((await Rr(t)).instance))})(),o._sqlite3_free=e=>(o._sqlite3_free=w.P)(e),o._sqlite3_value_text=e=>(o._sqlite3_value_text=w.Q)(e),o._sqlite3_prepare_v2=(e,t,r,n,i)=>(o._sqlite3_prepare_v2=w.R)(e,t,r,n,i),o._sqlite3_step=e=>(o._sqlite3_step=w.S)(e),o._sqlite3_reset=e=>(o._sqlite3_reset=w.T)(e),o._sqlite3_exec=(e,t,r,n,i)=>(o._sqlite3_exec=w.U)(e,t,r,n,i),o._sqlite3_finalize=e=>(o._sqlite3_finalize=w.V)(e),o._sqlite3_column_name=(e,t)=>(o._sqlite3_column_name=w.W)(e,t),o._sqlite3_column_text=(e,t)=>(o._sqlite3_column_text=w.X)(e,t),o._sqlite3_column_type=(e,t)=>(o._sqlite3_column_type=w.Y)(e,t),o._sqlite3_errmsg=e=>(o._sqlite3_errmsg=w.Z)(e),o._sqlite3_clear_bindings=e=>(o._sqlite3_clear_bindings=w._)(e),o._sqlite3_value_blob=e=>(o._sqlite3_value_blob=w.$)(e),o._sqlite3_value_bytes=e=>(o._sqlite3_value_bytes=w.aa)(e),o._sqlite3_value_double=e=>(o._sqlite3_value_double=w.ba)(e),o._sqlite3_value_int=e=>(o._sqlite3_value_int=w.ca)(e),o._sqlite3_value_type=e=>(o._sqlite3_value_type=w.da)(e),o._sqlite3_result_blob=(e,t,r,n)=>(o._sqlite3_result_blob=w.ea)(e,t,r,n),o._sqlite3_result_double=(e,t)=>(o._sqlite3_result_double=w.fa)(e,t),o._sqlite3_result_error=(e,t,r)=>(o._sqlite3_result_error=w.ga)(e,t,r),o._sqlite3_result_int=(e,t)=>(o._sqlite3_result_int=w.ha)(e,t),o._sqlite3_result_int64=(e,t)=>(o._sqlite3_result_int64=w.ia)(e,t),o._sqlite3_result_null=e=>(o._sqlite3_result_null=w.ja)(e),o._sqlite3_result_text=(e,t,r,n)=>(o._sqlite3_result_text=w.ka)(e,t,r,n),o._sqlite3_aggregate_context=(e,t)=>(o._sqlite3_aggregate_context=w.la)(e,t),o._sqlite3_column_count=e=>(o._sqlite3_column_count=w.ma)(e),o._sqlite3_data_count=e=>(o._sqlite3_data_count=w.na)(e),o._sqlite3_column_blob=(e,t)=>(o._sqlite3_column_blob=w.oa)(e,t),o._sqlite3_column_bytes=(e,t)=>(o._sqlite3_column_bytes=w.pa)(e,t),o._sqlite3_column_double=(e,t)=>(o._sqlite3_column_double=w.qa)(e,t),o._sqlite3_bind_blob=(e,t,r,n,i)=>(o._sqlite3_bind_blob=w.ra)(e,t,r,n,i),o._sqlite3_bind_double=(e,t,r)=>(o._sqlite3_bind_double=w.sa)(e,t,r),o._sqlite3_bind_int=(e,t,r)=>(o._sqlite3_bind_int=w.ta)(e,t,r),o._sqlite3_bind_text=(e,t,r,n,i)=>(o._sqlite3_bind_text=w.ua)(e,t,r,n,i),o._sqlite3_bind_parameter_index=(e,t)=>(o._sqlite3_bind_parameter_index=w.va)(e,t),o._sqlite3_sql=e=>(o._sqlite3_sql=w.wa)(e),o._sqlite3_normalized_sql=e=>(o._sqlite3_normalized_sql=w.xa)(e),o._sqlite3_changes=e=>(o._sqlite3_changes=w.ya)(e),o._sqlite3_close_v2=e=>(o._sqlite3_close_v2=w.za)(e),o._sqlite3_create_function_v2=(e,t,r,n,i,s,u,y,N)=>(o._sqlite3_create_function_v2=w.Aa)(e,t,r,n,i,s,u,y,N),o._sqlite3_update_hook=(e,t,r)=>(o._sqlite3_update_hook=w.Ba)(e,t,r),o._sqlite3_open=(e,t)=>(o._sqlite3_open=w.Ca)(e,t);var qt=o._malloc=e=>(qt=o._malloc=w.Da)(e),Ze=o._free=e=>(Ze=o._free=w.Ea)(e);o._RegisterExtensionFunctions=e=>(o._RegisterExtensionFunctions=w.Fa)(e);var sr=(e,t)=>(sr=w.Ga)(e,t),ur=(e,t)=>(ur=w.Ha)(e,t),Pe=e=>(Pe=w.Ia)(e),le=e=>(le=w.Ja)(e),$e=()=>($e=w.Ka)();o.stackSave=()=>$e(),o.stackRestore=e=>Pe(e),o.stackAlloc=e=>le(e),o.cwrap=(e,t,r,n)=>{var i=!r||r.every(s=>s==="number"||s==="boolean");return t!=="string"&&i&&!n?o["_"+e]:(...s)=>Xr(e,t,r,s)},o.addFunction=Re,o.removeFunction=ue,o.UTF8ToString=lt,o.ALLOC_NORMAL=Xe,o.allocate=Je,o.allocateUTF8OnStack=St;function Nt(){function e(){var i;if(o.calledRun=!0,!je){if(!o.noFSInit&&!Wt){var t,r;Wt=!0,n??(n=o.stdin),t??(t=o.stdout),r??(r=o.stderr),n?se("stdin",n):wt("/dev/tty","/dev/stdin"),t?se("stdout",null,t):wt("/dev/tty","/dev/stdout"),r?se("stderr",null,r):wt("/dev/tty1","/dev/stderr"),Te("/dev/stdin",0),Te("/dev/stdout",1),Te("/dev/stderr",1)}if(w.N(),Qt=!1,(i=o.onRuntimeInitialized)==null||i.call(o),o.postRun)for(typeof o.postRun=="function"&&(o.postRun=[o.postRun]);o.postRun.length;){var n=o.postRun.shift();Ot.unshift(n)}Ct(Ot)}}if(0<de)Me=Nt;else{if(o.preRun)for(typeof o.preRun=="function"&&(o.preRun=[o.preRun]);o.preRun.length;)Pr();Ct(Lt),0<de?Me=Nt:o.setStatus?(o.setStatus("Running..."),setTimeout(()=>{setTimeout(()=>o.setStatus(""),1),e()},1)):e()}}if(o.preInit)for(typeof o.preInit=="function"&&(o.preInit=[o.preInit]);0<o.preInit.length;)o.preInit.pop()();return Nt(),_}),h)};E.exports=f,E.exports.default=f}(oe)),oe.exports}var qr=Tr(),Nr=ce(qr);const Ar=`
-- Enable foreign key support
PRAGMA foreign_keys = ON;

-- Create Customers Table
CREATE TABLE Customers (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    first_name TEXT NOT NULL,
    last_name TEXT NOT NULL,
    email TEXT NOT NULL UNIQUE,
    phone TEXT
);

-- Create Products Table
CREATE TABLE Products (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    name TEXT NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    created_at DATE NOT NULL
);

-- Create Orders Table with Foreign Key Constraints
CREATE TABLE Orders (
    id INTEGER PRIMARY KEY AUTOINCREMENT,
    customer_id INTEGER NOT NULL,
    product_id INTEGER NOT NULL,
    order_date DATE NOT NULL,
    quantity INTEGER NOT NULL,
    FOREIGN KEY (customer_id) REFERENCES Customers(id) ON DELETE CASCADE,
    FOREIGN KEY (product_id) REFERENCES Products(id) ON DELETE CASCADE
);

-- Insert 30 Customers
INSERT INTO Customers (first_name, last_name, email, phone) VALUES
('Emma', 'Rodriguez', 'emma.rodriguez@gmail.com', '(555) 123-4567'),
('Liam', 'Chen', 'liam.chen@example.com', '(555) 234-5678'),
('Olivia', 'Patel', 'olivia.patel@hotmail.com', '(555) 345-6789'),
('Noah', 'Kim', 'noah.kim@live.com', '(555) 456-7890'),
('Ava', 'Singh', 'ava.singh@gmail.com', '(555) 567-8901'),
('Ethan', 'Garcia', 'ethan.garcia@hotmail.com', '(555) 678-9012'),
('Sophia', 'Nguyen', 'sophia.nguyen@live.com', '(555) 789-0123'),
('Mason', 'Wang', 'mason.wang@example.com', '(555) 890-1234'),
('Isabella', 'Kumar', 'isabella.kumar@outlook.com', '(555) 901-2345'),
('William', 'Hernandez', 'william.hernandez@example.com', '(555) 012-3456'),
('Mia', 'Lee', 'mia.lee@example.com', '(555) 987-6543'),
('James', 'Gupta', 'james.gupta@outlook.com', '(555) 876-5432'),
('Charlotte', 'Martinez', 'charlotte.martinez@example.com', '(555) 765-4321'),
('Benjamin', 'Suzuki', 'benjamin.suzuki@hotmail.com', '(555) 654-3210'),
('Amelia', 'Ahmed', 'amelia.ahmed@outlook.com', '(555) 543-2109'),
('Lucas', 'Park', 'lucas.park@hotmail.com', '(555) 432-1098'),
('Harper', 'Tanaka', 'harper.tanaka@gmail.com', '(555) 321-0987'),
('Alexander', 'Mehta', 'alexander.mehta@proton.com', '(555) 210-9876'),
('Evelyn', 'Sato', 'evelyn.sato@outlook.com', '(555) 109-8765'),
('Michael', 'Khan', 'michael.khan@outlook.com', '(555) 098-7654'),
('Abigail', 'Yamaguchi', 'abigail.yamaguchi@proton.com', '(555) 876-5432'),
('Daniel', 'Choi', 'daniel.choi@gmail.com', '(555) 765-4321'),
('Emily', 'Gupta', 'emily.gupta@example.com', '(555) 654-3210'),
('Jacob', 'Liu', 'jacob.liu@proton.com', '(555) 543-2109'),
('Madison', 'Cho', 'madison.cho@hotmail.com', '(555) 432-1098'),
('Logan', 'Pham', 'logan.pham@gmail.com', '(555) 321-0987'),
('Elizabeth', 'Nakamura', 'elizabeth.nakamura@example.com', '(555) 210-9876'),
('Sebastian', 'Malik', 'sebastian.malik@example.com', '(555) 109-8765'),
('Avery', 'Suzuki', 'avery.suzuki@hotmail.com', '(555) 098-7654'),
('Jackson', 'Krishnamurthy', 'jackson.krishnamurthy@gmail.com', '(555) 987-6543');

-- Insert 20 Products
INSERT INTO Products (name, description, price, created_at) VALUES
('Smart Home Hub', 'Central control system for smart home devices', 129.99, '2025-01-15'),
('Wireless Earbuds', 'Noise-cancelling earbuds with long battery life', 199.99, '2025-01-16'),
('Fitness Tracker', 'Advanced health monitoring smartwatch', 149.99, '2025-01-17'),
('4K Action Camera', 'Waterproof camera for extreme sports', 299.99, '2025-01-18'),
('Portable Solar Charger', 'Eco-friendly charging solution for devices', 79.99, '2025-01-19'),
('Smart Robot Vacuum', 'AI-powered cleaning robot with mapping', 249.99, '2025-01-20'),
('Noise-Cancelling Headphones', 'Premium over-ear wireless headphones', 349.99, '2025-01-21'),
('Portable Power Station', 'High-capacity battery for outdoor adventures', 399.99, '2025-01-22'),
('Smart Garden Sensor', 'Monitors plant health and soil conditions', 59.99, '2025-01-23'),
('Electric Skateboard', 'Compact personal transportation device', 499.99, '2025-01-24'),
('Compact Drone', 'Portable aerial photography drone', 299.99, '2025-01-25'),
('Smart Thermostat', 'Energy-efficient home temperature control', 179.99, '2025-01-26'),
('Portable Projector', 'Pocket-sized HD movie projector', 249.99, '2025-01-27'),
('Wireless Charging Pad', 'Multi-device fast charging station', 69.99, '2025-01-28'),
('Smart Water Bottle', 'Hydration tracking and temperature control', 39.99, '2025-01-29'),
('Bluetooth Speaker', 'Waterproof outdoor sound system', 129.99, '2025-01-30'),
('Digital Writing Tablet', 'Electronic notebook with cloud sync', 199.99, '2025-02-01'),
('Portable Air Purifier', 'Compact air cleaning device', 99.99, '2025-02-02'),
('Smart Light Bulbs', 'Color-changing WiFi-enabled lighting', 29.99, '2025-02-03'),
('Wireless Game Controller', 'Universal gaming controller', 79.99, '2025-02-04');

-- Insert 10 Orders
INSERT INTO Orders (customer_id, product_id, order_date, quantity) VALUES
(1, 5, '2025-02-10', 2),
(7, 12, '2025-02-11', 1),
(15, 3, '2025-02-12', 3),
(22, 8, '2025-02-13', 1),
(9, 16, '2025-02-14', 2),
(18, 1, '2025-02-15', 1),
(25, 7, '2025-02-16', 1),
(11, 19, '2025-02-17', 4),
(29, 11, '2025-02-18', 1),
(5, 14, '2025-02-19', 2);

-- Verification Queries
SELECT 'Customers Count:', COUNT(*) FROM Customers;
SELECT 'Products Count:', COUNT(*) FROM Products;
SELECT 'Orders Count:', COUNT(*) FROM Orders;
`;class xr{constructor(c=100,h=5*60*1e3){j(this,"cache",new Map);j(this,"maxSize");j(this,"maxAge");this.maxSize=c,this.maxAge=h}generateKey(c,h,f,d,b){const S=d?JSON.stringify(d):"",_=b?JSON.stringify(b):"";return`${c}:${h}:${f}:${S}:${_}`}get(c,h,f,d,b){const S=this.generateKey(c,h,f,d,b),_=this.cache.get(S);if(!_)return null;const A=Date.now();return A-_.timestamp>this.maxAge?(this.cache.delete(S),null):(_.accessCount++,_.lastAccessed=A,_.data)}set(c,h,f,d,b,S){const _=this.generateKey(c,h,f,b,S),A=Date.now();this.cache.size>=this.maxSize&&this.evictLRU(),this.cache.set(_,{data:d,timestamp:A,accessCount:1,lastAccessed:A})}invalidateTable(c){const h=[];for(const f of this.cache.keys())f.startsWith(`${c}:`)&&h.push(f);h.forEach(f=>this.cache.delete(f))}clear(){this.cache.clear()}cleanup(){const c=Date.now(),h=[];for(const[f,d]of this.cache.entries())c-d.timestamp>this.maxAge&&h.push(f);h.forEach(f=>this.cache.delete(f))}evictLRU(){let c=null,h=Date.now();for(const[f,d]of this.cache.entries())d.lastAccessed<h&&(h=d.lastAccessed,c=f);c&&this.cache.delete(c)}getStats(){const c=Date.now(),h=Array.from(this.cache.entries()).map(([b,S])=>({key:b,accessCount:S.accessCount,age:c-S.timestamp})),f=h.reduce((b,S)=>b+S.accessCount,0),d=h.length>0?f/h.length:0;return{size:this.cache.size,maxSize:this.maxSize,hitRate:d,entries:h}}}const qe=new xr,ee=class ee{constructor(c,h=!1){j(this,"db");j(this,"firstTable",null);j(this,"tablesSchema",{});j(this,"indexesSchema",[]);this.db=c,h||this.db.exec(Ar),this.getDatabaseSchema()}static async initSQLjs(){if(ee.sqlJsStatic)return ee.sqlJsStatic;try{return await Nr({locateFile:h=>`/sqlite-online/wasm/${h}`})}catch(c){throw console.error("Core: Failed to initialize SQL.js:",c),new Error(`Failed to initialize SQL.js: ${c instanceof Error?c.message:String(c)}`)}}static async create(){const c=await ee.initSQLjs(),h=new c.Database;return new ee(h,!1)}static async open(c){const h=await ee.initSQLjs(),f=new h.Database(c);return new ee(f,!0)}exec(c){c=c.replace(/COLLATE\s+unicase/gi,"COLLATE NOCASE");const h=this.db.exec(c),f=c.toUpperCase();let d=!1;return Mr(f)&&(this.getDatabaseSchema(),d=!0),[h,d]}download(){return this.db.export()}getTableInfo(c){const[h]=this.exec(`PRAGMA table_info("${c}")`),[f]=this.exec(`PRAGMA foreign_key_list("${c}")`),d={};if(f.length>0)for(const _ of f[0].values)d[_[3]]=!0;let b="_rowid_";const S=[];if(h.length>0)for(const _ of h[0].values){const[A,o,R,U,C,I]=_;I===1&&(b=o),S.push({name:o||"Unknown",cid:A,type:R||"Unknown",dflt_value:C,IsNullable:U===0&&I===0,isPrimaryKey:I===1,isForeignKey:d[o]??!1})}else console.error("No table info found");return[S,b]}getDatabaseSchema(){this.tablesSchema={},this.indexesSchema=[],this.firstTable=null;const[c]=this.exec("SELECT type, name, tbl_name FROM sqlite_master WHERE name NOT LIKE 'sqlite_%'");if(c.length!==0){for(const h of c[0].values){const[f,d,b]=h;if(f==="table"||f==="view"){const[S,_]=this.getTableInfo(b);this.tablesSchema[b]={schema:S,primaryKey:f==="view"?null:_,type:f}}else f==="index"&&this.indexesSchema.push({name:d,tableName:b})}this.firstTable=Object.keys(this.tablesSchema)[0]}}getMaxSizeOfTable(c,h){const{clause:f,params:d}=tt(h),S=`SELECT COUNT(*) FROM ${_e(c)} ${f}`;if(d.length>0){const _=this.db.prepare(S);_.bind(d),_.step();const A=_.get();return _.free(),Math.ceil(A[0])}else{const[_]=this.exec(S);return _.length===0?0:Math.ceil(_[0].values[0][0])}}getTableData(c,h,f,d,b){const S=Math.max(1,Math.min(1e4,Math.floor(Number(h)))),_=Math.max(0,Math.floor(Number(f))),A=qe.get(c,S,_,d,b);if(A&&Array.isArray(A)&&A.length===2)return A;const o=this.getPrimaryKey(c),R=_e(c),U=o?`${_e(o)}, *`:"*",{clause:C,params:I}=tt(d),fe=Mt(b),he=`
      SELECT ${U} FROM ${R}
      ${C}
      ${fe}
      LIMIT ${S} OFFSET ${_}
    `;let W;if(I.length>0){const te=this.db.prepare(he);te.bind(I);const Ae=[];for(;te.step();)Ae.push(te.get());W=[{columns:te.getColumnNames(),values:Ae}],te.free()}else[W]=this.exec(he);if(W.length===0)return[[],0];const Ne=this.getMaxSizeOfTable(c,d),me=[W,Ne];return qe.set(c,S,_,me,d,b),me}getPrimaryKey(c){const h=this.tablesSchema[c];if(!h)throw new Error(`Table "${c}" not found.`);return h.primaryKey}update(c,h,f,d){try{const b=this.getPrimaryKey(c);if(!b)throw new Error(`Table or view "${c}" does not have a primary key and cannot be updated.`);const S=h.map(o=>`"${o}" = ?`).join(", "),_=`UPDATE "${c}" SET ${S} WHERE "${b}" = ?`;f=f.map(o=>o===""?null:o);const A=this.db.prepare(_);A.run([...f,d]),A.free(),qe.invalidateTable(c)}catch(b){throw b instanceof Error?new Error(`Error while updating table ${c}: ${b.message}`):new Error(`Error while updating table ${c}: ${b}`)}}delete(c,h){try{const f=this.getPrimaryKey(c);if(!f)throw new Error(`Table or view "${c}" does not have a primary key and cannot be deleted from.`);const d=`DELETE FROM "${c}" WHERE "${f}" = ?`,b=this.db.prepare(d);b.run([h]),b.free(),qe.invalidateTable(c)}catch(f){throw f instanceof Error?new Error(`Error while deleting from table ${c}: ${f.message}`):new Error(`Error while deleting from table ${c}: ${f}`)}}insert(c,h,f){try{const d=h.map((o,R)=>({col:o,val:f[R]})).filter(o=>o.val!=="");if(d.length===0)throw new Error("No valid values provided for insertion.");const b=d.map(o=>o.col),S=d.map(o=>o.val),_=`INSERT INTO "${c}" (${b.join(", ")}) VALUES (${b.map(()=>"?").join(", ")})`,A=this.db.prepare(_);A.run([...S]),A.free(),qe.invalidateTable(c)}catch(d){throw new Error(`Error while inserting into table ${c}: ${d}`)}}export({table:c,offset:h,limit:f,filters:d,sorters:b,customQuery:S}){if(S){const[C]=this.exec(S);return C}if(!c)throw new Error("Table name is required when not using custom query");const _=_e(c),{clause:A,params:o}=tt(d),R=Mt(b);let U=`SELECT * FROM ${_} ${A} ${R}`;if(h&&f){const C=Math.max(1,Math.min(1e5,Math.floor(Number(f)))),I=Math.max(0,Math.floor(Number(h)));U+=` LIMIT ${C} OFFSET ${I}`}if(o.length>0){const C=this.db.prepare(U);C.bind(o);const I=[];for(;C.step();)I.push(C.get());const fe=[{columns:C.getColumnNames(),values:I}];return C.free(),fe}else{const[C]=this.exec(U);return C}}};j(ee,"sqlJsStatic");let De=ee;function Mr(E){return RegExp(/^\s*(CREATE|DROP|ALTER)\s/i).exec(E)!==null}function _e(E){return`"${E.replace(/"/g,'""')}"`}function kr(E){return E.toUpperCase().trim()==="DESC"?"DESC":"ASC"}function tt(E){if(!E)return{clause:"",params:[]};const c=[],h=[];return Object.entries(E).forEach(([f,d])=>{const b=_e(f);c.push(`${b} LIKE ? ESCAPE '\\'`),h.push(`%${d}%`)}),{clause:c.length>0?`WHERE ${c.join(" AND ")}`:"",params:h}}function Mt(E){if(!E)return"";const c=Object.entries(E).map(([h,f])=>{const d=_e(h),b=kr(f);return`${d} ${b}`});return c.length>0?`ORDER BY ${c.join(", ")}`:""}function Cr(E,c){const h=E.map(d=>`"${d}"`).join(","),f=c.map(d=>E.map(b=>`"${d[E.indexOf(b)]}"`).join(","));return[h,...f].join(`
`)}class rt extends Error{constructor(c){super(c),this.name="CustomQueryError"}}let x=null;function Ue(){if(x)try{x.db&&typeof x.db.close=="function"&&x.db.close()}catch(E){console.warn("Error during database cleanup:",E)}finally{x=null}}self.addEventListener("beforeunload",Ue),self.addEventListener("unload",Ue),self.onmessage=async E=>{const{action:c,payload:h}=E.data;if(c==="init")try{Ue(),x=await De.create(),self.postMessage({action:"initComplete",payload:{tableSchema:x.tablesSchema,indexSchema:x.indexesSchema,currentTable:x.firstTable}});return}catch(f){console.error("Worker: Failed to initialize database:",f),self.postMessage({action:"queryError",payload:{error:{message:`Failed to initialize database: ${f instanceof Error?f.message:String(f)}`,isCustomQueryError:!1}}});return}if(x===null){self.postMessage({action:"queryError",payload:{error:{message:"Database is not initialized",isCustomQueryError:!1}}});return}try{switch(c){case"openFile":{if(Ue(),x=await De.open(new Uint8Array(h.file)),x.firstTable===null)throw new Error("Database is empty");self.postMessage({action:"initComplete",payload:{tableSchema:x.tablesSchema,indexSchema:x.indexesSchema,currentTable:x.firstTable}});break}case"refresh":case"getTableData":{const{currentTable:f,limit:d,offset:b,filters:S,sorters:_}=h,[A,o]=x.getTableData(f,d,b,S,_);self.postMessage({action:"queryComplete",payload:{results:A,maxSize:o}});break}case"exec":{try{const{query:f,currentTable:d,limit:b,offset:S,filters:_,sorters:A}=h,[o,R]=x.exec(f);if(R)self.postMessage({action:"updateInstance",payload:{tableSchema:x.tablesSchema,indexSchema:x.indexesSchema}});else{if(o.length>0){self.postMessage({action:"customQueryComplete",payload:{results:o}});return}const[U,C]=x.getTableData(d,b,S,_,A);self.postMessage({action:"queryComplete",payload:{results:U,maxSize:C}})}}catch(f){if(f instanceof Error)throw new rt(f.message)}break}case"execBatch":{try{const{queries:f,currentTable:d,limit:b,offset:S,filters:_,sorters:A}=h;let o=!1,R=null;for(const U of f){const[C,I]=x.exec(U);I&&(o=!0),C.length>0&&(R=C)}if(o)self.postMessage({action:"updateInstance",payload:{tableSchema:x.tablesSchema,indexSchema:x.indexesSchema}});else{if(R&&R.length>0){self.postMessage({action:"customQueryComplete",payload:{results:R}});return}const[U,C]=x.getTableData(d,b,S,_,A);self.postMessage({action:"queryComplete",payload:{results:U,maxSize:C}})}}catch(f){if(f instanceof Error)throw new rt(f.message)}break}case"download":{const f=x.download();self.postMessage({action:"downloadComplete",payload:{bytes:f}});break}case"update":{const{table:f,columns:d,values:b,primaryValue:S}=h;x.update(f,d,b,S),self.postMessage({action:"updateComplete",payload:{type:"updated"}});break}case"delete":{const{table:f,primaryValue:d}=h;x.delete(f,d),self.postMessage({action:"updateComplete",payload:{type:"deleted"}});break}case"insert":{const{table:f,columns:d,values:b}=h;x.insert(f,d,b),self.postMessage({action:"insertComplete"});break}case"export":{const{table:f,filters:d,sorters:b,limit:S,offset:_,exportType:A,customQuery:o}=h;let R;if(A==="table")R=x.export({table:f});else if(A==="current")R=x.export({table:f,limit:S,offset:_,filters:d,sorters:b});else if(A==="custom")R=x.export({customQuery:o});else throw new Error("Unknown export type");const U=Cr(R[0].columns,R[0].values);self.postMessage({action:"exportComplete",payload:{results:U}});break}default:console.warn("Unknown worker action:",c)}}catch(f){f instanceof Error?self.postMessage({action:"queryError",payload:{error:{message:f.message,isCustomQueryError:f instanceof rt}}}):self.postMessage({action:"queryError",payload:{error:{message:"Unknown error",isCustomQueryError:!1}}})}}})();
