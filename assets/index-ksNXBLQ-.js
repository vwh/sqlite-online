import{c as S,j as a,r as w,R as Be}from"./react-B2RL9x2s.js";import{c as ot}from"./react-dom-BizTJEze.js";import{T as ct,t as ze}from"./sonner-BTnuTZt4.js";import{c as Le}from"./zustand-B_-DjuRk.js";import{l as Te}from"./lodash-BkzDGCz7.js";import{I as dt,C as mt,a as ut,S as ft,M as xt,D as ue,b as ht,G as pt,c as bt,d as gt,T as yt,H as jt,e as Nt,f as vt,K as wt,g as St,h as ve,i as Qe,E as Ct,j as Tt,k as Et,l as _t,m as It,n as Lt,o as kt,p as Rt,q as Dt,P as je,r as $e,s as He,A as zt,t as $t,u as At,F as ke,v as Ot,w as Pt,x as be,L as Ge,y as Ne,z as ye,X as Ve,B as Mt,J as Ft,N as Ut}from"./lucide-react-B0zfX7Rp.js";import{R as Bt,T as Qt,C as Ht,L as Gt,S as Vt,P as Kt,a as Wt,I as qt,V as Xt,b as Yt,c as Jt,d as Zt,e as es,f as ts,g as ss,h as ls,i as as,j as ns,k as rs,l as is,m as os,n as cs,o as ds,p as ms,q as us,r as fs,D as xs,s as hs,t as ps,O as bs}from"./@radix-ui-CFk7L8Qh.js";import{c as gs}from"./clsx-B-dksMZM.js";import{t as ys}from"./tailwind-merge-BJOqOzcM.js";import{c as js}from"./class-variance-authority-Dp3B9jqt.js";import{P as Ns,a as vs,b as ws}from"./react-resizable-panels-CRWyJmDH.js";import{R as Ss,d as Cs}from"./@uiw-CUzkTaq_.js";import{r as Ae,G as Ts,I as Es}from"./@codemirror-BjKk2IdN.js";import{F as _s}from"./react-window-DS7bPhEA.js";import{A as Is}from"./react-virtualized-auto-sizer-Dc1p5HBS.js";import"./scheduler-SPyfQU6S.js";import"./aria-hidden-DQ5UC2Eg.js";import"./react-remove-scroll-DWlXkXzq.js";import"./tslib-CDuPK5Eb.js";import"./react-remove-scroll-bar-DpNLLOLX.js";import"./react-style-singleton-D7c23Nxa.js";import"./get-nonce-C-Z93AgS.js";import"./use-sidecar-BS8h9NSd.js";import"./use-callback-ref-hrg4jhP2.js";import"./@floating-ui-CMvgovlv.js";import"./@babel-BTbEZfjA.js";import"./@lezer-E7PapBHi.js";import"./crelt-C8TCjufn.js";import"./@marijn-DXwl3gUT.js";import"./style-mod-Bc2inJdb.js";import"./w3c-keyname-Vcq4gwWv.js";import"./memoize-one-CcMeOnPo.js";(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const n of document.querySelectorAll('link[rel="modulepreload"]'))l(n);new MutationObserver(n=>{for(const r of n)if(r.type==="childList")for(const i of r.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&l(i)}).observe(document,{childList:!0,subtree:!0});function s(n){const r={};return n.integrity&&(r.integrity=n.integrity),n.referrerPolicy&&(r.referrerPolicy=n.referrerPolicy),n.crossOrigin==="use-credentials"?r.credentials="include":n.crossOrigin==="anonymous"?r.credentials="omit":r.credentials="same-origin",r}function l(n){if(n.ep)return;n.ep=!0;const r=s(n);fetch(n.href,r)}})();function Ls(){const t=S.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx(ct,{position:"bottom-center",toastOptions:{className:"custom-toast",duration:2e3,style:{fontFamily:"Lexend, sans-serif",borderRadius:"0.5rem",fontSize:"0.875rem",boxShadow:"0 4px 12px rgba(0, 0, 0, 0.1)",border:"1px solid var(--border)",background:"var(--background)",color:"var(--foreground)"}}}),t[0]=e):e=t[0],e}const ks={theme:"system",setTheme:()=>null},Ke=w.createContext(ks);function Rs(t){const e=S.c(20);let s,l,n,r;e[0]!==t?({children:s,defaultTheme:n,storageKey:r,...l}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n,e[4]=r):(s=e[1],l=e[2],n=e[3],r=e[4]);const i=n===void 0?"system":n,o=r===void 0?"vite-ui-theme":r;let c;e[5]!==i||e[6]!==o?(c=()=>localStorage.getItem(o)||i,e[5]=i,e[6]=o,e[7]=c):c=e[7];const[u,d]=w.useState(c);let m;e[8]!==o?(m=N=>{localStorage.setItem(o,N),d(N)},e[8]=o,e[9]=m):m=e[9];const f=m;let x,p;e[10]!==u?(x=()=>{const N=document.documentElement;if(N.classList.remove("light","dark"),u==="system"){const C=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";N.classList.add(C)}else N.classList.add(u)},p=[u],e[10]=u,e[11]=x,e[12]=p):(x=e[11],p=e[12]),w.useEffect(x,p);let h,g;e[13]!==u||e[14]!==f?(g={theme:u,setTheme:f},e[13]=u,e[14]=f,e[15]=g):g=e[15],h=g;const y=h;let j;return e[16]!==s||e[17]!==l||e[18]!==y?(j=a.jsx(Ke.Provider,{...l,value:y,children:s}),e[16]=s,e[17]=l,e[18]=y,e[19]=j):j=e[19],j}const ne=(t,e,s)=>{const l=S.c(5),n=s===void 0?!1:s;let r,i;l[0]!==e||l[1]!==n||l[2]!==t?(r=()=>{const o=c=>{const u=t.split("+"),d=u.includes("ctrl");let m;m=c.key,n||(m=m.toLowerCase());const f=c.ctrlKey||!d,x=u.some(p=>p==="ctrl"?!1:n?p===c.key:p.toLowerCase()===m);f&&x&&(c.preventDefault(),c.stopPropagation(),e())};return window.addEventListener("keydown",o),()=>{window.removeEventListener("keydown",o)}},i=[t,e,n],l[0]=e,l[1]=n,l[2]=t,l[3]=r,l[4]=i):(r=l[3],i=l[4]),w.useEffect(r,i)},v=Le(t=>({tablesSchema:{},indexesSchema:[],currentTable:null,data:null,columns:null,maxSize:1,isDatabaseLoading:!1,isDataLoading:!1,errorMessage:null,filters:null,sorters:null,limit:50,offset:0,customQuery:void 0,customQueryObject:null,geminiApiKey:typeof window<"u"?localStorage.getItem("geminiApiKey"):null,isAiLoading:!1,setTablesSchema:e=>t({tablesSchema:e}),setIndexesSchema:e=>t({indexesSchema:e}),setCurrentTable:e=>t({currentTable:e}),setData:e=>t({data:e}),setColumns:e=>t({columns:e}),setMaxSize:e=>t({maxSize:e}),setIsDatabaseLoading:e=>t({isDatabaseLoading:e}),setIsDataLoading:e=>t({isDataLoading:e}),setErrorMessage:e=>t({errorMessage:e}),setFilters:e=>t({filters:e}),setSorters:e=>t({sorters:e}),setLimit:e=>t({limit:e}),setOffset:e=>t({offset:e}),setCustomQuery:e=>t({customQuery:e}),setCustomQueryObject:e=>t({customQueryObject:e}),setGeminiApiKey:e=>{t({geminiApiKey:e}),e?localStorage.setItem("geminiApiKey",e):localStorage.removeItem("geminiApiKey")},setIsAiLoading:e=>t({isAiLoading:e}),resetPagination:()=>t({offset:0})})),ae=Le(t=>{const e=Te.debounce(l=>t({schemaPanelSize:l}),200),s=Te.debounce(l=>t({dataPanelSize:l}),200);return{schemaPanelSize:25,dataPanelSize:75,editValues:[],isInserting:!1,setSchemaPanelSize:e,setDataPanelSize:s,setEditValues:l=>t({editValues:l}),setIsInserting:l=>t({isInserting:l})}}),We=w.createContext(void 0),fe=()=>{const t=w.useContext(We);if(t===void 0)throw new Error("usePanelManager must be used within a PanelProvider");return t},Oe={success:"#22c55e",error:"#ef4444",info:"#3b82f6"};function F(t,e="info",s={}){if(typeof t=="string"){const l={success:a.jsx(ut,{className:"h-5 w-5 text-green-500"}),error:a.jsx(mt,{className:"h-5 w-5 text-red-500"}),info:a.jsx(dt,{className:"h-5 w-5 text-blue-500"})};setTimeout(()=>{ze(a.jsxs("div",{className:"flex items-center gap-2",children:[l[e],a.jsx("div",{className:"flex-1 capitalize",children:t})]}),{style:{borderLeft:`4px solid ${Oe[e]}`,background:"var(--background)"},...s})},0)}else setTimeout(()=>{ze(t,{style:{borderLeft:`4px solid ${Oe[e]}`,background:"var(--background)"},...s})},0)}const qe=w.createContext(void 0),Pe=33,Ds=({children:t})=>{const e=w.useRef(null),s=v(b=>b.setTablesSchema),l=v(b=>b.setIndexesSchema),n=v(b=>b.setCurrentTable),r=v(b=>b.setData),i=v(b=>b.setCustomQuery),o=v(b=>b.setColumns),c=v(b=>b.setMaxSize),u=v(b=>b.setIsDatabaseLoading),d=v(b=>b.setIsDataLoading),m=v(b=>b.setErrorMessage),f=v(b=>b.filters),x=v(b=>b.sorters),p=v(b=>b.limit),h=v(b=>b.offset),g=v(b=>b.currentTable),y=v(b=>b.maxSize),j=v(b=>b.setOffset),N=v(b=>b.setFilters),C=v(b=>b.setSorters),T=v(b=>b.setLimit),E=v(b=>b.resetPagination),_=v(b=>b.setCustomQueryObject),k=v(b=>b.customQuery),O=v(b=>b.tablesSchema),{selectedRowObject:I,setSelectedRowObject:R,setIsInserting:z,handleCloseEdit:U}=fe(),[B,M]=w.useState(!0);w.useEffect(()=>(e.current=new Worker(new URL("/sqlite-online/assets/sqliteWorker-D_vMRI7r.js",import.meta.url),{type:"module"}),e.current.onmessage=b=>{var H,q,xe;const L=b.data,{action:D}=L;if(D==="initComplete"){window.parent.postMessage({type:"loadDatabaseBufferReady"},"*");const{payload:P}=L;s(P.tableSchema),l(P.indexSchema),n(P.currentTable),o(P.tableSchema[P.currentTable].schema.map(se=>se.name)),N(null),C(null),R(null),z(!1),_(null),i(""),j(0),u(!1)}else if(D==="queryComplete"){const{payload:P}=L;c(P.maxSize);const se=P.results;if(!se)r(null);else{const ie=((H=se[0])==null?void 0:H.values)||[];ie.length!==0?r(ie):r(null)}d(!1)}else if(D==="customQueryComplete"){const{payload:P}=L,se=P.results;if(!se)r(null);else{const ie=((q=se[0])==null?void 0:q.values)||[];ie.length!==0?_({data:ie,columns:((xe=se[0])==null?void 0:xe.columns)||[]}):_(null)}d(!1),m(null)}else if(D==="updateInstance"){const{payload:P}=L;s(P.tableSchema),l(P.indexSchema),d(!1),m(null),F("Database schema updated successfully","success")}else if(D==="updateComplete"){const{payload:P}=L;m(null),U(),F(`Row ${P.type} successfully`,"success")}else if(D==="insertComplete")m(null),U(),F("Row inserted successfully","success");else if(D==="downloadComplete"){const{payload:P}=L,se=new Blob([P.bytes],{type:"application/octet-stream"}),ie=URL.createObjectURL(se),ce=document.createElement("a");ce.href=ie,ce.download="database.sqlite",ce.click(),F("Database downloaded successfully","success")}else if(D==="exportComplete"){const{payload:P}=L,se=new Blob([P.results],{type:"text/csv"}),ie=URL.createObjectURL(se),ce=document.createElement("a");ce.href=ie,ce.download="export.csv",ce.click(),F("Database exported successfully","success")}else if(D==="queryError"){const{payload:P}=L;console.error("Worker error:",P.error),d(!1),P.error.isCustomQueryError&&m(P.error.message),F(P.error.message,"error")}else console.warn("Unknown action:",D)},u(!0),e.current.postMessage({action:"init"}),()=>{var b;(b=e.current)==null||b.terminate()}),[o,j,u,s,n,l,_,r,c,d,m,N,C,R,U,z,i]),w.useEffect(()=>{if(!g)return;const b=setTimeout(()=>{var xe,P,se;if(!e.current){F("Worker is not initialized","error");return}d(!0);let L=50;const D=(xe=document.getElementById("tableHeader"))==null?void 0:xe.getBoundingClientRect().height,H=(P=document.getElementById("dataSection"))==null?void 0:P.getBoundingClientRect().height,q=(se=document.getElementById("paginationControls"))==null?void 0:se.getBoundingClientRect().height;B?(M(!1),H&&q&&(L=Math.floor((H-q-47.5)/Pe))):D&&H&&q&&(L=Math.floor((H-D-q)/Pe)),T(L),e.current.postMessage({action:"getTableData",payload:{currentTable:g,filters:f,sorters:x,limit:L,offset:h}})},100);return()=>clearTimeout(b)},[g,f,x,B,h,T,d]);const V=w.useCallback(async b=>{var L;(L=e.current)==null||L.postMessage({action:"openFile",payload:{file:b}})},[]);w.useEffect(()=>{window.loadDatabaseBuffer=V;const b=async L=>{var D,H;if(L.data.type==="invokeLoadDatabaseBuffer")try{const q=L.data.buffer;await V(q),(D=L.source)==null||D.postMessage({type:"loadDatabaseBufferSuccess"},L.origin)}catch(q){(H=L.source)==null||H.postMessage({type:"loadDatabaseBufferError",error:q==null?void 0:q.message},L.origin)}};return window.addEventListener("message",b),()=>{window.removeEventListener("message",b)}},[V]);const K=w.useCallback(b=>{F("Opening database","info");const L=new FileReader;L.onload=D=>{var q;const H=(q=D.target)==null?void 0:q.result;if(!e.current){F("Worker is not initialized","error");return}e.current.postMessage({action:"openFile",payload:{file:H}})},L.readAsArrayBuffer(b)},[]),W=w.useCallback(b=>{var D;const L=(D=b.target.files)==null?void 0:D[0];if(!L){F("No file selected","error");return}K(L)},[K]),X=w.useCallback(()=>{if(!e.current){F("Worker is not initialized","error");return}e.current.postMessage({action:"download"})},[]),Z=w.useCallback(b=>{N(null),C(null),E(),c(0),R(null),z(!1),n(b),o(O[b].schema.map(L=>L.name))},[N,C,E,c,n,R,z,O,o]),Y=w.useCallback((b,L)=>{const H={...v.getState().filters||{},[b]:L};N(H),E()},[N,E]),J=w.useCallback(b=>{const H=((v.getState().sorters||{})[b]||"asc")==="asc"?"desc":"asc",q={[b]:H};C(q)},[C]),G=w.useCallback(b=>{const L=v.getState().offset;if(y){if(typeof b=="number")j(b);else if(b==="next"){const D=L+p;D>=y?y-p<0&&j(0):j(D)}else if(b==="prev"){const D=L-p;D<0?j(0):j(D)}else b==="first"?j(0):b==="last"&&(y-p<0?j(0):j(y-p));R(null)}},[y,p,j,R]),ee=w.useCallback(b=>{if(!e.current){F("Worker is not initialized","error");return}e.current.postMessage({action:"export",payload:{table:g,offset:h,limit:p,filters:f,sorters:x,customQuery:k,exportType:b}})},[g,f,x,h,p,k]),Q=w.useCallback(()=>{if(!e.current){F("Worker is not initialized","error");return}const b=k;if(!b)return;const D=b.replace(/--.*$/gm,"").replace(/\/\*[\s\S]*?\*\//g,"").split(";").map(H=>H.trim()).filter(H=>H!=="");for(const H of D)d(!0),e.current.postMessage({action:"exec",payload:{query:H,currentTable:g,filters:f,sorters:x,limit:p,offset:h}})},[g,f,x,p,h,d,k]),te=w.useCallback(b=>{if(!e.current){F("Worker is not initialized","error");return}if(!(I!=null&&I.primaryValue)&&b!=="insert"){F(b==="delete"?"No row selected to delete":`No values provided to ${b}`,"error");return}d(!0),e.current.postMessage({action:b,payload:{table:g,columns:v.getState().columns,values:ae.getState().editValues,primaryValue:I==null?void 0:I.primaryValue}}),e.current.postMessage({action:"refresh",payload:{currentTable:g,offset:h,limit:p,filters:f,sorters:x}})},[g,f,x,h,p,d,I]);ne("ctrl+s",()=>X()),ne("ctrl+I",()=>te("insert"),!0),ne("ctrl+u",()=>te("update")),ne("ctrl+d",()=>te("delete")),ne("ctrl+q",()=>Q()),ne("ctrl+ArrowRight",()=>G("next")),ne("ctrl+ArrowUp",()=>G("first")),ne("ctrl+ArrowDown",()=>G("last")),ne("ctrl+ArrowLeft",()=>G("prev"));const oe=w.useMemo(()=>({workerRef:e,handleFileUpload:K,handleFileChange:W,handleDownload:X,handleTableChange:Z,handleQueryFilter:Y,handleQuerySorter:J,handlePageChange:G,handleExport:ee,handleQueryExecute:Q,handleEditSubmit:te}),[e,K,W,X,Z,Y,J,G,ee,Q,te]);return a.jsx(qe.Provider,{value:oe,children:t})},zs=t=>{const e=S.c(10),{children:s}=t,[l,n]=w.useState(null),[r,i]=w.useState(!1),o=l!==null||r;let c;e[0]===Symbol.for("react.memo_cache_sentinel")?(c=(j,N,C)=>{i(!1),n({data:j,index:N,primaryValue:C})},e[0]=c):c=e[0];const u=c;let d;e[1]===Symbol.for("react.memo_cache_sentinel")?(d=()=>{n(null),i(!0)},e[1]=d):d=e[1];const m=d;let f;e[2]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{i(!1),n(null)},e[2]=f):f=e[2];const x=f;ne("ctrl+i",m,!0),ne("ctrl+`",x,!0);let p,h;e[3]!==o||e[4]!==r||e[5]!==l?(h={handleRowClick:u,handleInsert:m,handleCloseEdit:x,isEditing:o,selectedRowObject:l,isInserting:r,setIsInserting:i,setSelectedRowObject:n},e[3]=o,e[4]=r,e[5]=l,e[6]=h):h=e[6],p=h;const g=p;let y;return e[7]!==s||e[8]!==g?(y=a.jsx(We.Provider,{value:g,children:s}),e[7]=s,e[8]=g,e[9]=y):y=e[9],y};function A(...t){return ys(gs(t))}const $s=w.memo(function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("flex flex-col",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx(Bt,{"data-slot":"tabs",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i});function As(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("bg-muted text-muted-foreground inline-flex h-9 w-fit items-center justify-center p-1",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx(Gt,{"data-slot":"tabs-list",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}const we=Be.memo(function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("inline-flex flex-1 cursor-pointer items-center justify-center gap-1.5 rounded-md! px-2 py-1 text-sm font-medium whitespace-nowrap transition-[color,box-shadow]","data-[state=active]:bg-white data-[state=active]:text-black","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:outline-ring focus-visible:ring-[3px] focus-visible:outline-1","disabled:pointer-events-none disabled:opacity-50","[&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx(Qt,{"data-slot":"tabs-trigger",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i}),Se=Be.memo(function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("flex-1 outline-none",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx(Ht,{"data-slot":"tabs-content",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i}),re=()=>{const t=w.useContext(qe);if(t===void 0)throw new Error("useDatabaseWorker must be used within a DatabaseWorkerProvider");return t},Os=js("inline-flex cursor-pointer items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-[color,box-shadow] disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg:not([class*='size-'])]:size-4 [&_svg]:shrink-0 outline-none focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px] aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",{variants:{variant:{default:"bg-primary text-primary-foreground shadow-xs hover:bg-primary/90",destructive:"bg-destructive text-white shadow-xs hover:bg-destructive/90 focus-visible:ring-destructive/20 dark:focus-visible:ring-destructive/40",outline:"border border-input bg-background shadow-xs hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-xs hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2 has-[>svg]:px-3",sm:"h-8 rounded-md gap-1.5 px-3 has-[>svg]:px-2.5",lg:"h-10 rounded-md px-6 has-[>svg]:px-4",icon:"size-9"}},defaultVariants:{variant:"default",size:"default"}}),Ps=t=>{const e=S.c(18);let s,l,n,r,i,o;e[0]!==t?({className:s,variant:o,size:r,asChild:i,onClick:l,...n}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n,e[4]=r,e[5]=i,e[6]=o):(s=e[1],l=e[2],n=e[3],r=e[4],i=e[5],o=e[6]);const u=(i===void 0?!1:i)?Vt:"button";let d;e[7]!==l?(d=g=>{l&&l(g)},e[7]=l,e[8]=d):d=e[8];const m=d;let f,x;e[9]!==s||e[10]!==r||e[11]!==o?(x=A(Os({variant:o,size:r,className:s})),e[9]=s,e[10]=r,e[11]=o,e[12]=x):x=e[12],f=x;const p=f;let h;return e[13]!==u||e[14]!==p||e[15]!==m||e[16]!==n?(h=a.jsx(u,{"data-slot":"button",className:p,onClick:m,...n}),e[13]=u,e[14]=p,e[15]=m,e[16]=n,e[17]=h):h=e[17],h},$=Ps,Ms=t=>{const e=S.c(10);let s,l,n;e[0]!==t?({className:s,type:n,...l}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n):(s=e[1],l=e[2],n=e[3]);let r;e[4]!==s?(r=A("border-input file:text-foreground placeholder:text-muted-foreground selection:bg-primary selection:text-primary-foreground flex h-5 w-full min-w-0 rounded-md border bg-transparent px-3 py-1 text-base shadow-xs transition-[color,box-shadow] outline-none file:inline-flex file:h-7 file:border-0 file:bg-transparent file:text-sm file:font-medium disabled:pointer-events-none disabled:cursor-not-allowed disabled:opacity-50 md:text-sm","focus-visible:border-ring focus-visible:ring-ring/50 focus-visible:ring-[3px]","aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive",s),e[4]=s,e[5]=r):r=e[5];let i;return e[6]!==l||e[7]!==r||e[8]!==n?(i=a.jsx("input",{type:n,"data-slot":"input",className:r,...l}),e[6]=l,e[7]=r,e[8]=n,e[9]=i):i=e[9],i},ge=Ms,Xe=()=>{const t=w.useContext(Ke);if(t===void 0)throw new Error("useTheme must be used within a ThemeProvider");return t};function Fs(){const t=S.c(10),{theme:e,setTheme:s}=Xe();let l;t[0]!==s||t[1]!==e?(l=()=>s(e==="dark"?"light":"dark"),t[0]=s,t[1]=e,t[2]=l):l=t[2];const n=e==="dark"?"Switch to light mode":"Switch to dark mode",r=e==="dark"?"Switch to light mode":"Switch to dark mode";let i;t[3]!==e?(i=e==="dark"?a.jsx(ft,{className:"h-[1.2rem] w-[1.2rem]"}):a.jsx(xt,{className:"h-[1.2rem] w-[1.2rem]"}),t[3]=e,t[4]=i):i=t[4];let o;return t[5]!==l||t[6]!==n||t[7]!==r||t[8]!==i?(o=a.jsx($,{variant:"outline",size:"sm",onClick:l,"aria-label":n,title:r,className:"border-foreground/25 relative flex items-center justify-center transition-transform duration-300",children:i}),t[5]=l,t[6]=n,t[7]=r,t[8]=i,t[9]=o):o=t[9],o}function Us(){const t=S.c(14),{handleFileChange:e,handleDownload:s}=re();let l;t[0]!==e?(l=a.jsx(ge,{id:"file-upload",type:"file",className:"absolute inset-0 cursor-pointer opacity-0",onChange:e}),t[0]=e,t[1]=l):l=t[1];let n;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsxs($,{size:"sm",variant:"outline",className:"border-foreground/25 pointer-events-none h-8 cursor-pointer px-3 text-xs font-medium sm:w-[200px]",children:[a.jsx(ue,{className:"mr-1.5 h-3.5 w-3.5"}),"Open Database"]}),t[2]=n):n=t[2];let r;t[3]!==l?(r=a.jsxs("label",{htmlFor:"file-upload",className:"relative cursor-pointer transition-opacity hover:opacity-80",children:[l,n]}),t[3]=l,t[4]=r):r=t[4];let i;t[5]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx(ht,{className:"mr-1.5 h-3.5 w-3.5"}),t[5]=i):i=t[5];let o;t[6]!==s?(o=a.jsxs($,{size:"sm",variant:"outline",className:"border-foreground/25 h-8 px-3 text-xs font-medium",onClick:s,title:"Save the database",children:[i,"Save Database"]}),t[6]=s,t[7]=o):o=t[7];let c;t[8]!==r||t[9]!==o?(c=a.jsxs("div",{className:"flex items-center gap-1",children:[r,o]}),t[8]=r,t[9]=o,t[10]=c):c=t[10];let u;t[11]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsxs("div",{className:"flex items-center gap-1",children:[a.jsx("a",{href:"https://github.com/vwh/sqlite-online",target:"_blank",rel:"noreferrer",className:"transition-opacity hover:opacity-80",children:a.jsx($,{size:"icon",variant:"ghost",className:"hidden h-8 w-8 sm:flex",title:"View Source Code on GitHub",children:a.jsx(pt,{className:"h-4 w-4"})})}),a.jsx(Fs,{})]}),t[11]=u):u=t[11];let d;return t[12]!==c?(d=a.jsxs("header",{className:"flex items-center justify-between gap-2 border-b px-1 py-1.5",children:[c,u]}),t[12]=c,t[13]=d):d=t[13],d}const he=Le(t=>({expandedTables:[],expandedIndexSection:!0,toggleTable:e=>t(s=>({expandedTables:s.expandedTables.includes(e)?s.expandedTables.filter(n=>n!==e):[...s.expandedTables,e]})),setExpandedTables:e=>t(()=>({expandedTables:e})),toggleExpandedIndexSection:()=>t(e=>({expandedIndexSection:!e.expandedIndexSection})),setExpandedIndexSection:e=>t(()=>({expandedIndexSection:e}))})),le=w.memo(function(e){const s=S.c(3),{children:l,className:n}=e,r=`block max-w-80 overflow-hidden text-ellipsis ${n??""}`;let i;return s[0]!==l||s[1]!==r?(i=a.jsx("span",{className:r,children:l}),s[0]=l,s[1]=r,s[2]=i):i=s[2],i}),Bs={DATE:/DATE|TIMESTAMP/i,BLOB:/^BLOB$/i,TEXT:/CHAR|TEXT|CLOB|VARCHAR/i,INTEGER:/INT/i,REAL:/REAL|FLOAT|DOUBLE|DECIMAL/i,NUMERIC:/NUMERIC/i,BOOLEAN:/BOOL/i},de=(t,e)=>Bs[e].test(t),Ye=t=>de(t,"DATE"),Qs=t=>de(t,"BLOB"),Je=t=>de(t,"TEXT"),Hs=t=>de(t,"NUMERIC"),Gs=t=>de(t,"BOOLEAN"),Vs=t=>de(t,"INTEGER"),Ks=t=>de(t,"REAL"),Ze=t=>Vs(t)||Ks(t)||Hs(t);function Re(t){const e=S.c(12),{columnSchema:s}=t;if(!s)return null;const{type:l,isPrimaryKey:n,isForeignKey:r}=s;let i;e[0]!==l?(i=()=>l?Qs(l)?a.jsx(bt,{className:"h-4 w-4 text-green-500"}):Ye(l)?a.jsx(gt,{className:"h-4 w-4 text-blue-500"}):Je(l)?a.jsx(yt,{className:"h-4 w-4 text-indigo-500"}):Ze(l)?a.jsx(jt,{className:"h-4 w-4 text-red-500"}):Gs(l)?a.jsx(Nt,{className:"h-4 w-4 text-pink-500"}):a.jsx(vt,{className:"h-4 w-4 text-gray-500"}):null,e[0]=l,e[1]=i):i=e[1];const o=i;let c;e[2]!==o?(c=o(),e[2]=o,e[3]=c):c=e[3];const u=c;let d;e[4]!==n?(d=n&&a.jsx(wt,{className:"h-4 w-4 text-yellow-500"}),e[4]=n,e[5]=d):d=e[5];let m;e[6]!==r?(m=r&&a.jsx(St,{className:"h-4 w-4 text-purple-500"}),e[6]=r,e[7]=m):m=e[7];let f;return e[8]!==d||e[9]!==m||e[10]!==u?(f=a.jsxs("div",{className:"flex items-center gap-[2px]",children:[d,m,u]}),e[8]=d,e[9]=m,e[10]=u,e[11]=f):f=e[11],f}const Ws=w.memo(t=>{const e=S.c(12),{columnSchema:s}=t;let l;e[0]!==s?(l=a.jsx(Re,{columnSchema:s}),e[0]=s,e[1]=l):l=e[1];let n;e[2]!==s.name?(n=a.jsx("span",{className:"text-primary/60 ml-1 text-xs",children:s.name}),e[2]=s.name,e[3]=n):n=e[3];let r;e[4]!==l||e[5]!==n?(r=a.jsxs("div",{className:"flex items-center",children:[l,n]}),e[4]=l,e[5]=n,e[6]=r):r=e[6];let i;e[7]!==s.type?(i=a.jsx(le,{className:"text-primary/60 text-xs whitespace-nowrap",children:a.jsx("span",{className:"text-primary/50 bg-primary/5 rounded-full px-2 py-0.5 text-xs",children:s.type})}),e[7]=s.type,e[8]=i):i=e[8];let o;return e[9]!==r||e[10]!==i?(o=a.jsxs("div",{className:"flex items-center justify-between gap-1",children:[r,i]}),e[9]=r,e[10]=i,e[11]=o):o=e[11],o}),qs=w.memo(ve),Xs=w.memo(Qe),et=w.memo(t=>{const e=S.c(4),{expanded:s,size:l}=t,n=l===void 0?4:l,r=`h-${n} w-${n}`;if(s){let o;return e[0]!==r?(o=a.jsx(qs,{className:r}),e[0]=r,e[1]=o):o=e[1],o}let i;return e[2]!==r?(i=a.jsx(Xs,{className:r}),e[2]=r,e[3]=i):i=e[3],i}),Ys=w.memo(t=>{const e=S.c(29),{name:s,table:l,expanded:n,toggleTable:r}=t;let i;e[0]!==s||e[1]!==r?(i=()=>r(s),e[0]=s,e[1]=r,e[2]=i):i=e[2];const o=i,c=n&&"ml-1";let u;e[3]!==c?(u=A("flex cursor-pointer items-center rounded px-1.5 py-1 transition-all hover:ml-2",c),e[3]=c,e[4]=u):u=e[4];let d;e[5]!==n?(d=a.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:a.jsx(et,{expanded:n})}),e[5]=n,e[6]=d):d=e[6];let m;e[7]!==l.type?(m=l.type==="view"&&a.jsx(Ct,{className:"h-4 w-4"}),e[7]=l.type,e[8]=m):m=e[8];let f;e[9]!==s?(f=a.jsx("span",{className:"text-sm",children:s}),e[9]=s,e[10]=f):f=e[10];let x;e[11]!==l.schema.length?(x=a.jsxs("span",{className:"text-primary/50 text-xs",children:["(",l.schema.length,")"]}),e[11]=l.schema.length,e[12]=x):x=e[12];let p;e[13]!==m||e[14]!==f||e[15]!==x?(p=a.jsxs("span",{className:"flex items-center gap-1 capitalize",children:[m,f,x]}),e[13]=m,e[14]=f,e[15]=x,e[16]=p):p=e[16];let h;e[17]!==n||e[18]!==o||e[19]!==u||e[20]!==d||e[21]!==p?(h=a.jsxs("button",{className:u,onClick:o,"aria-expanded":n,children:[d,p]}),e[17]=n,e[18]=o,e[19]=u,e[20]=d,e[21]=p,e[22]=h):h=e[22];let g;e[23]!==n||e[24]!==l.schema?(g=n&&a.jsx("div",{className:"border-primary/20 mt-1 mb-2 ml-4 flex flex-col gap-1 space-y-0.5 border-l-2 pl-2",children:l.schema.map(Js)}),e[23]=n,e[24]=l.schema,e[25]=g):g=e[25];let y;return e[26]!==g||e[27]!==h?(y=a.jsxs("article",{children:[h,g]}),e[26]=g,e[27]=h,e[28]=y):y=e[28],y});function Js(t){return a.jsx(Ws,{columnSchema:t},t.cid)}const tt=w.memo(t=>{const e=S.c(17),{title:s,expanded:l,icon:n,onToggle:r,children:i}=t;let o;e[0]!==r?(o=p=>{(p.key==="Enter"||p.key===" ")&&(p.preventDefault(),r())},e[0]=r,e[1]=o):o=e[1];const c=o,u=!l&&"mb-0";let d;e[2]!==u?(d=A("hover:bg-primary/5 bg-primary/7 flex cursor-pointer items-center px-2 py-2 transition-colors",u),e[2]=u,e[3]=d):d=e[3];let m;e[4]!==l?(m=a.jsx("div",{className:"flex h-5 w-5 items-center justify-center",children:a.jsx(et,{expanded:l,size:5})}),e[4]=l,e[5]=m):m=e[5];let f;e[6]!==s?(f=a.jsx(le,{className:"flex items-center gap-1",children:s}),e[6]=s,e[7]=f):f=e[7];let x;return e[8]!==i||e[9]!==l||e[10]!==c||e[11]!==n||e[12]!==r||e[13]!==d||e[14]!==m||e[15]!==f?(x=a.jsxs("header",{className:d,role:"button",tabIndex:0,onClick:r,onKeyDown:c,"aria-expanded":l,children:[m,n,f,i]}),e[8]=i,e[9]=l,e[10]=c,e[11]=n,e[12]=r,e[13]=d,e[14]=m,e[15]=f,e[16]=x):x=e[16],x}),Zs=w.memo(t=>{const e=S.c(23),{tablesSchema:s,expandAllTables:l,collapseAllTables:n,expandedTableSection:r,toggleTableSection:i,expandedTables:o,toggleTable:c}=t,[u,d]=w.useState(!1);let m;e[0]!==l||e[1]!==s?(m=T=>{T.stopPropagation(),l(s),d(!0)},e[0]=l,e[1]=s,e[2]=m):m=e[2];const f=m;let x;e[3]!==n?(x=T=>{T.stopPropagation(),n(),d(!1)},e[3]=n,e[4]=x):x=e[4];const p=x;let h;e[5]!==r||e[6]!==p||e[7]!==f||e[8]!==u?(h=r&&a.jsx("div",{className:"ml-auto flex",children:u?a.jsx($,{className:"text-primary hover:bg-primary/5 h-7 rounded px-2 py-0.5 text-xs transition-colors",variant:"ghost",size:"icon",onClick:p,"aria-label":"Collapse all tables",children:a.jsx(Tt,{className:"h-4 w-4"})}):a.jsx($,{className:"text-primary hover:bg-primary/5 h-7 rounded px-2 py-0.5 text-xs transition-colors",variant:"ghost",size:"icon",onClick:f,"aria-label":"Expand all tables",children:a.jsx(Et,{className:"h-4 w-4"})})}),e[5]=r,e[6]=p,e[7]=f,e[8]=u,e[9]=h):h=e[9];const g=h;let y;e[10]===Symbol.for("react.memo_cache_sentinel")?(y=a.jsx(ue,{className:"mr-2 h-4 w-4"}),e[10]=y):y=e[10];let j;e[11]!==g||e[12]!==r||e[13]!==i?(j=a.jsx(tt,{title:"Tables",expanded:r,icon:y,onToggle:i,children:g}),e[11]=g,e[12]=r,e[13]=i,e[14]=j):j=e[14];let N;e[15]!==r||e[16]!==o||e[17]!==s||e[18]!==c?(N=r&&a.jsx("div",{className:"space-y-0.5 overflow-y-auto pr-1 pl-2",children:Object.entries(s).map(T=>{const[E,_]=T;return a.jsx(Ys,{name:E,table:_,expanded:o.includes(E),toggleTable:c},E)})}),e[15]=r,e[16]=o,e[17]=s,e[18]=c,e[19]=N):N=e[19];let C;return e[20]!==j||e[21]!==N?(C=a.jsxs("section",{children:[j,N]}),e[20]=j,e[21]=N,e[22]=C):C=e[22],C}),el=w.memo(t=>{const e=S.c(7),{index:s}=t;let l;e[0]!==s.name?(l=a.jsx("span",{className:"text-sm",children:s.name}),e[0]=s.name,e[1]=l):l=e[1];let n;e[2]!==s.tableName?(n=a.jsx(le,{className:"text-primary/60 text-xs font-medium whitespace-nowrap",children:a.jsx("span",{className:"text-primary/50 bg-primary/5 rounded-full px-2 py-0.5 text-xs",children:s.tableName})}),e[2]=s.tableName,e[3]=n):n=e[3];let r;return e[4]!==l||e[5]!==n?(r=a.jsx("article",{children:a.jsx("div",{className:"flex cursor-pointer items-center rounded px-1.5 py-1 transition-all hover:ml-2",children:a.jsxs("div",{className:"flex w-full items-center justify-between gap-1",children:[l,n]})})}),e[4]=l,e[5]=n,e[6]=r):r=e[6],r}),tl=w.memo(t=>{const e=S.c(10),{indexes:s,expandedIndexSection:l,toggleIndexSection:n}=t;let r;e[0]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx(_t,{className:"mr-2 h-4 w-4"}),e[0]=r):r=e[0];let i;e[1]!==l||e[2]!==n?(i=a.jsx(tt,{title:"Indexes",expanded:l,icon:r,onToggle:n}),e[1]=l,e[2]=n,e[3]=i):i=e[3];let o;e[4]!==l||e[5]!==s?(o=l&&a.jsx("div",{className:"space-y-0.5 overflow-y-auto pr-1 pl-2",children:s.map(sl)}),e[4]=l,e[5]=s,e[6]=o):o=e[6];let c;return e[7]!==i||e[8]!==o?(c=a.jsxs("section",{children:[i,o]}),e[7]=i,e[8]=o,e[9]=c):c=e[9],c});function sl(t){return a.jsx(el,{index:t},t.name)}const ll=w.memo(t=>{const e=S.c(3),{onFilterChange:s}=t;let l;e[0]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(It,{className:"text-primary/40 absolute top-1/2 left-2 h-4 w-4 -translate-y-1/2 transform"}),e[0]=l):l=e[0];let n;return e[1]!==s?(n=a.jsxs("div",{className:"relative",children:[l,a.jsx(ge,{placeholder:"Search tables and indexes",className:"border-primary/20 h-8 w-full pl-8 text-sm text-[0.8rem]!",onChange:r=>s(r.target.value),"aria-label":"Search tables and indexes"})]}),e[1]=s,e[2]=n):n=e[2],n}),De=()=>{const t=S.c(29),[e,s]=w.useState(""),[l,n]=w.useState(!0),r=he(al),i=he(nl),o=v(rl),c=v(il),u=he(ol),d=he(cl),m=he(dl);let f;t[0]===Symbol.for("react.memo_cache_sentinel")?(f=()=>{n(ml)},t[0]=f):f=t[0];const x=f;let p;t[1]!==m?(p=I=>{m(Object.keys(I)),n(!0)},t[1]=m,t[2]=p):p=t[2];const h=p;let g;t[3]!==m?(g=()=>{m([]),n(!1)},t[3]=m,t[4]=g):g=t[4];const y=g;let j;e:{if(!e){j=o;break e}let I;if(t[5]!==e||t[6]!==o){I={};for(const[R,z]of Object.entries(o))R.toLowerCase().includes(e.toLowerCase())&&(I[R]=z);t[5]=e,t[6]=o,t[7]=I}else I=t[7];j=I}const N=j;let C;e:{if(!e){C=c;break e}let I;if(t[8]!==e||t[9]!==c){let R;t[11]!==e?(R=z=>z.name.toLowerCase().includes(e.toLowerCase())||z.tableName.toLowerCase().includes(e.toLowerCase()),t[11]=e,t[12]=R):R=t[12],I=c.filter(R),t[8]=e,t[9]=c,t[10]=I}else I=t[10];C=I}const T=C;let E;t[13]===Symbol.for("react.memo_cache_sentinel")?(E=a.jsx("div",{className:"bg-primary/5 border-b p-2",children:a.jsx(ll,{onFilterChange:s})}),t[13]=E):E=t[13];let _;t[14]!==y||t[15]!==h||t[16]!==l||t[17]!==u||t[18]!==N||t[19]!==d?(_=a.jsx(Zs,{tablesSchema:N,expandedTableSection:l,toggleTableSection:x,expandAllTables:h,collapseAllTables:y,expandedTables:u,toggleTable:d}),t[14]=y,t[15]=h,t[16]=l,t[17]=u,t[18]=N,t[19]=d,t[20]=_):_=t[20];let k;t[21]!==r||t[22]!==T||t[23]!==c.length||t[24]!==i?(k=c.length>0&&a.jsx(tl,{indexes:T,expandedIndexSection:r,toggleIndexSection:i}),t[21]=r,t[22]=T,t[23]=c.length,t[24]=i,t[25]=k):k=t[25];let O;return t[26]!==_||t[27]!==k?(O=a.jsxs("section",{className:"flex h-full w-full flex-col overflow-hidden",children:[E,a.jsxs("nav",{className:"flex-1 overflow-auto",children:[_,k]})]}),t[26]=_,t[27]=k,t[28]=O):O=t[28],O};function al(t){return t.expandedIndexSection}function nl(t){return t.toggleExpandedIndexSection}function rl(t){return t.tablesSchema}function il(t){return t.indexesSchema}function ol(t){return t.expandedTables}function cl(t){return t.toggleTable}function dl(t){return t.setExpandedTables}function ml(t){return!t}const ul=()=>{const t=S.c(1);let e;return t[0]===Symbol.for("react.memo_cache_sentinel")?(e=a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsx(De,{})}),t[0]=e):e=t[0],e};function Ee(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("flex h-full w-full data-[panel-group-direction=vertical]:flex-col",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx(ws,{"data-slot":"resizable-panel-group",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function me(t){const e=S.c(2);let s;return e[0]!==t?(s=a.jsx(Ns,{"data-slot":"resizable-panel",...t}),e[0]=t,e[1]=s):s=e[1],s}function _e(t){const e=S.c(12);let s,l,n;e[0]!==t?({withHandle:n,className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n):(s=e[1],l=e[2],n=e[3]);let r;e[4]!==s?(r=A("bg-border focus-visible:ring-ring relative flex w-px items-center justify-center after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:ring-1 focus-visible:ring-offset-1 focus-visible:outline-hidden data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:translate-x-0 data-[panel-group-direction=vertical]:after:-translate-y-1/2 [&[data-panel-group-direction=vertical]>div]:rotate-90",s),e[4]=s,e[5]=r):r=e[5];let i;e[6]!==n?(i=n&&a.jsx("div",{className:"bg-border border-primary/20 z-50 flex h-9 w-4 items-center justify-center rounded-xs border",children:a.jsx(Lt,{className:"size-2.5"})}),e[6]=n,e[7]=i):i=e[7];let o;return e[8]!==l||e[9]!==r||e[10]!==i?(o=a.jsx(vs,{"data-slot":"resizable-handle",className:r,...l,children:i}),e[8]=l,e[9]=r,e[10]=i,e[11]=o):o=e[11],o}function fl(t){const e=S.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let l;return e[2]!==s?(l=a.jsx(ls,{"data-slot":"select",...s}),e[2]=s,e[3]=l):l=e[3],l}function xl(t){const e=S.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let l;return e[2]!==s?(l=a.jsx(ss,{"data-slot":"select-value",...s}),e[2]=s,e[3]=l):l=e[3],l}function hl(t){const e=S.c(11);let s,l,n;e[0]!==t?({className:l,children:s,...n}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n):(s=e[1],l=e[2],n=e[3]);let r;e[4]!==l?(r=A("border-input data-[placeholder]:text-muted-foreground [&_svg:not([class*='text-'])]:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive flex h-9 w-fit items-center justify-between gap-2 rounded-md border bg-transparent px-3 py-2 text-sm whitespace-nowrap shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 *:data-[slot=select-value]:line-clamp-1 *:data-[slot=select-value]:flex *:data-[slot=select-value]:items-center *:data-[slot=select-value]:gap-2 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",l),e[4]=l,e[5]=r):r=e[5];let i;e[6]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx(as,{asChild:!0,children:a.jsx(ve,{className:"size-4 opacity-50"})}),e[6]=i):i=e[6];let o;return e[7]!==s||e[8]!==n||e[9]!==r?(o=a.jsxs(ts,{"data-slot":"select-trigger",className:r,...n,children:[s,i]}),e[7]=s,e[8]=n,e[9]=r,e[10]=o):o=e[10],o}function pl(t){const e=S.c(20);let s,l,n,r;e[0]!==t?({className:l,children:s,position:r,...n}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n,e[4]=r):(s=e[1],l=e[2],n=e[3],r=e[4]);const i=r===void 0?"popper":r,o=i==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1";let c;e[5]!==l||e[6]!==o?(c=A("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border shadow-md",o,l),e[5]=l,e[6]=o,e[7]=c):c=e[7];let u;e[8]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(gl,{}),e[8]=u):u=e[8];const d=i==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)] scroll-my-1";let m;e[9]!==d?(m=A("p-1",d),e[9]=d,e[10]=m):m=e[10];let f;e[11]!==s||e[12]!==m?(f=a.jsx(Xt,{className:m,children:s}),e[11]=s,e[12]=m,e[13]=f):f=e[13];let x;e[14]===Symbol.for("react.memo_cache_sentinel")?(x=a.jsx(yl,{}),e[14]=x):x=e[14];let p;return e[15]!==i||e[16]!==n||e[17]!==c||e[18]!==f?(p=a.jsx(Kt,{children:a.jsxs(Wt,{"data-slot":"select-content",className:c,position:i,...n,children:[u,f,x]})}),e[15]=i,e[16]=n,e[17]=c,e[18]=f,e[19]=p):p=e[19],p}function bl(t){const e=S.c(13);let s,l,n;e[0]!==t?({className:l,children:s,...n}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n):(s=e[1],l=e[2],n=e[3]);let r;e[4]!==l?(r=A("focus:bg-accent focus:text-accent-foreground [&_svg:not([class*='text-'])]:text-muted-foreground relative flex w-full cursor-default items-center gap-2 rounded-sm py-1.5 pr-8 pl-2 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4 *:[span]:last:flex *:[span]:last:items-center *:[span]:last:gap-2",l),e[4]=l,e[5]=r):r=e[5];let i;e[6]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx("span",{className:"absolute right-2 flex size-3.5 items-center justify-center",children:a.jsx(Yt,{children:a.jsx(kt,{className:"size-4"})})}),e[6]=i):i=e[6];let o;e[7]!==s?(o=a.jsx(Jt,{children:s}),e[7]=s,e[8]=o):o=e[8];let c;return e[9]!==n||e[10]!==r||e[11]!==o?(c=a.jsxs(qt,{"data-slot":"select-item",className:r,...n,children:[i,o]}),e[9]=n,e[10]=r,e[11]=o,e[12]=c):c=e[12],c}const gl=function(e){const s=S.c(9);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("flex cursor-default items-center justify-center py-1",l),s[3]=l,s[4]=r):r=s[4];let i;s[5]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx(Rt,{className:"size-4"}),s[5]=i):i=s[5];let o;return s[6]!==n||s[7]!==r?(o=a.jsx(Zt,{"data-slot":"select-scroll-up-button",className:r,...n,children:i}),s[6]=n,s[7]=r,s[8]=o):o=s[8],o};function yl(t){const e=S.c(9);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("flex cursor-default items-center justify-center py-1",s),e[3]=s,e[4]=n):n=e[4];let r;e[5]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx(ve,{className:"size-4"}),e[5]=r):r=e[5];let i;return e[6]!==l||e[7]!==n?(i=a.jsx(es,{"data-slot":"select-scroll-down-button",className:n,...l,children:r}),e[6]=l,e[7]=n,e[8]=i):i=e[8],i}function jl(){const t=S.c(7),{handleTableChange:e}=re(),s=v(wl),n=v(vl)??void 0;let r;t[0]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx(hl,{className:"border-primary/20 h-8 w-30 border text-sm sm:w-48",children:a.jsx(xl,{placeholder:"Select Table"})}),t[0]=r):r=t[0];let i;t[1]!==s?(i=a.jsx(pl,{children:Object.keys(s).map(Nl)}),t[1]=s,t[2]=i):i=t[2];let o;return t[3]!==e||t[4]!==n||t[5]!==i?(o=a.jsxs(fl,{onValueChange:e,value:n,children:[r,i]}),t[3]=e,t[4]=n,t[5]=i,t[6]=o):o=t[6],o}function Nl(t){return a.jsx(bl,{value:t,children:a.jsx(le,{className:"text-[0.8rem]! capitalize",children:t})},t)}function vl(t){return t.currentTable}function wl(t){return t.tablesSchema}function Sl(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("border-input placeholder:text-muted-foreground focus-visible:border-ring focus-visible:ring-ring/50 aria-invalid:ring-destructive/20 dark:aria-invalid:ring-destructive/40 aria-invalid:border-destructive dark:bg-input/30 flex field-sizing-content min-h-16 w-full rounded-md border bg-transparent px-3 py-2 text-base shadow-xs transition-[color,box-shadow] outline-none focus-visible:ring-[3px] disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx("textarea",{"data-slot":"textarea",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function Cl(){var K,W,X;const t=S.c(49),{handleEditSubmit:e}=re(),{selectedRowObject:s,isInserting:l,handleCloseEdit:n}=fe(),r=ae(Rl),i=ae(kl),o=v(Ll),c=v(Il),u=v(_l);let d,m;t[0]!==u||t[1]!==l||t[2]!==s||t[3]!==i?(d=()=>{l?i((u==null?void 0:u.map(El))||[]):s&&i(s.data.map(Tl))},m=[l,s,u,i],t[0]=u,t[1]=l,t[2]=s,t[3]=i,t[4]=d,t[5]=m):(d=t[4],m=t[5]),w.useEffect(d,m);let f;t[6]!==i?(f=(Z,Y)=>{const J=ae.getState().editValues;i(J.map((G,ee)=>ee===Z?Y:G))},t[6]=i,t[7]=f):f=t[7];const x=f;let p;e:{if(!u||!c||!o[c]){p=null;break e}const Z=(K=o[c])==null?void 0:K.schema;let Y;if(t[8]!==u||t[9]!==r||t[10]!==x||t[11]!==Z){let J;t[13]!==r||t[14]!==x||t[15]!==Z?(J=(G,ee)=>{const Q=Z[ee],te=(Q==null?void 0:Q.dflt_value)||"Null",oe=(()=>{const b=(Q==null?void 0:Q.type)??"";return Ze(b)?"number":Ye(b)?"date":"text"})();return a.jsxs("div",{className:"border-primary/10 border shadow-sm",children:[a.jsx("label",{htmlFor:G,className:"bg-primary/5 border-primary/10 flex items-center gap-1 border-b p-1.5",children:a.jsxs("div",{className:"flex w-full items-center justify-between gap-2",children:[a.jsxs("div",{className:"flex items-center gap-1.5",children:[a.jsx(Re,{columnSchema:Q}),a.jsx(le,{className:"text-xs font-medium capitalize",children:G})]}),Q.IsNullable&&a.jsx("span",{className:"text-primary/50 bg-primary/5 rounded-full px-2 py-0.5 text-xs",children:"Nullable"})]})}),a.jsx("div",{className:"p-1",children:Je((Q==null?void 0:Q.type)??"")?a.jsx(Sl,{id:G,name:G,className:"border-primary/20 focus:ring-primary/30 focus:border-primary/40 rounded border text-sm text-[0.8rem]! focus:ring-1",value:r[ee]||"",onChange:b=>x(ee,b.target.value),placeholder:te}):a.jsx(ge,{id:G,name:G,type:oe,className:"border-primary/20 focus:ring-primary/30 focus:border-primary/40 h-9 rounded border text-[0.8rem]! focus:ring-1",value:r[ee]||"",onChange:b=>x(ee,b.target.value),placeholder:te})})]},G)},t[13]=r,t[14]=x,t[15]=Z,t[16]=J):J=t[16],Y=u.map(J),t[8]=u,t[9]=r,t[10]=x,t[11]=Z,t[12]=Y}else Y=t[12];p=Y}const h=p;let g,y;t[17]!==e||t[18]!==l?(y=()=>e(l?"insert":"update"),t[17]=e,t[18]=l,t[19]=y):y=t[19];const j=l?"Insert row":"Apply changes",N=((W=o[c])==null?void 0:W.type)==="view";let C;t[20]!==l?(C=l?a.jsxs(a.Fragment,{children:[a.jsx(je,{className:"mr-2 h-3.5 w-3.5"}),"Insert row"]}):a.jsxs(a.Fragment,{children:[a.jsx($e,{className:"mr-2 h-3.5 w-3.5"}),"Apply changes"]}),t[20]=l,t[21]=C):C=t[21];let T;t[22]!==y||t[23]!==j||t[24]!==N||t[25]!==C?(T=a.jsx($,{size:"sm",variant:"outline",className:"w-full py-2 text-xs font-medium",onClick:y,"aria-label":j,disabled:N,children:C}),t[22]=y,t[23]=j,t[24]=N,t[25]=C,t[26]=T):T=t[26];let E;t[27]!==c||t[28]!==e||t[29]!==l||t[30]!==o?(E=!l&&a.jsx($,{size:"sm",variant:"destructive",className:"hover:bg-destructive/50 rounded text-xs",onClick:()=>e("delete"),"aria-label":"Delete row",disabled:((X=o[c])==null?void 0:X.type)==="view",children:a.jsx(Dt,{className:"h-3.5 w-3.5"})}),t[27]=c,t[28]=e,t[29]=l,t[30]=o,t[31]=E):E=t[31];let _;t[32]!==E||t[33]!==T?(_=a.jsxs("div",{className:"bg-primary/5 border-primary/10 flex w-full gap-1 border-t p-2 shadow-inner",children:[T,E]}),t[32]=E,t[33]=T,t[34]=_):_=t[34],g=_;const k=g;let O,I;t[35]!==l?(I=a.jsx("div",{className:"flex items-center gap-2",children:l?a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-primary/10 rounded p-1.5",children:a.jsx(je,{className:"h-4 w-4"})}),a.jsx(le,{className:"text-sm font-medium whitespace-nowrap",children:"Inserting new row"})]}):a.jsxs(a.Fragment,{children:[a.jsx("div",{className:"bg-primary/10 rounded p-1.5",children:a.jsx($e,{className:"h-4 w-4"})}),a.jsx(le,{className:"text-sm font-medium whitespace-nowrap",children:"Updating row"})]})}),t[35]=l,t[36]=I):I=t[36];let R;t[37]===Symbol.for("react.memo_cache_sentinel")?(R=a.jsx(He,{className:"mr-1 h-3 w-3"}),t[37]=R):R=t[37];let z;t[38]!==n?(z=a.jsxs($,{size:"sm",variant:"outline",className:"text-xs",onClick:n,title:"Go back to data","aria-label":"Go back to data",children:[R,"Back"]}),t[38]=n,t[39]=z):z=t[39];let U;t[40]!==I||t[41]!==z?(U=a.jsxs("div",{className:"bg-primary/5 sticky top-0 z-10 flex w-full items-center justify-between gap-1 border-b p-2 shadow-sm",children:[I,z]}),t[40]=I,t[41]=z,t[42]=U):U=t[42],O=U;const B=O;let M;t[43]!==h?(M=a.jsx("div",{className:"flex-1 overflow-auto",children:h}),t[43]=h,t[44]=M):M=t[44];let V;return t[45]!==k||t[46]!==B||t[47]!==M?(V=a.jsxs("section",{className:"flex h-full flex-col",children:[B,M,k]}),t[45]=k,t[46]=B,t[47]=M,t[48]=V):V=t[48],V}function Tl(t){return(t==null?void 0:t.toString())??""}function El(){return""}function _l(t){return t.columns}function Il(t){return t.currentTable}function Ll(t){return t.tablesSchema}function kl(t){return t.setEditValues}function Rl(t){return t.editValues}const Dl=function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("w-full caption-bottom text-sm",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx("div",{"data-slot":"table-container",className:"relative w-full overflow-x-auto",children:a.jsx("table",{"data-slot":"table",className:r,...n})}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i},zl=function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("[&_tr]:border-b",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx("thead",{"data-slot":"table-header",id:"tableHeader",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i},$l=function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("[&_tr:last-child]:border-0",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx("tbody",{"data-slot":"table-body",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i},Ce=function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("hover:bg-muted/50 data-[state=selected]:bg-muted border-b transition-colors",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx("tr",{"data-slot":"table-row",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i},Me=function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("text-muted-foreground min-h-6 px-2 text-left align-middle font-medium whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx("th",{"data-slot":"table-head",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i},Fe=function(e){const s=S.c(8);let l,n;s[0]!==e?({className:l,...n}=e,s[0]=e,s[1]=l,s[2]=n):(l=s[1],n=s[2]);let r;s[3]!==l?(r=A("p-2 align-middle whitespace-nowrap [&:has([role=checkbox])]:pr-0 [&>[role=checkbox]]:translate-y-[2px]",l),s[3]=l,s[4]=r):r=s[4];let i;return s[5]!==n||s[6]!==r?(i=a.jsx("td",{"data-slot":"table-cell",id:"tableCell",className:r,...n}),s[5]=n,s[6]=r,s[7]=i):i=s[7],i};function Al(t){const e=S.c(17),{column:s,value:l,onChange:n,debounceTime:r}=t,i=r===void 0?300:r,[o,c]=w.useState(l);let u,d;e[0]!==l?(u=()=>{c(l)},d=[l],e[0]=l,e[1]=u,e[2]=d):(u=e[1],d=e[2]),w.useEffect(u,d);let m,f;e[3]!==n?(f=(T,E)=>{n(T,E)},e[3]=n,e[4]=f):f=e[4];let x;e[5]!==i||e[6]!==f?(x=Te.debounce(f,i),e[5]=i,e[6]=f,e[7]=x):x=e[7],m=x;const h=m;let g;e[8]!==s||e[9]!==h?(g=T=>{const E=T.target.value;c(E),h(s,E)},e[8]=s,e[9]=h,e[10]=g):g=e[10];const y=g;let j,N;e[11]!==h?(j=()=>()=>{h.cancel()},N=[h],e[11]=h,e[12]=j,e[13]=N):(j=e[12],N=e[13]),w.useEffect(j,N);let C;return e[14]!==y||e[15]!==o?(C=a.jsx(ge,{type:"text",className:"border-primary/20 max-h-6 w-full rounded px-2 py-1 text-[0.8rem]",value:o,onChange:y,placeholder:"Filter"}),e[14]=y,e[15]=o,e[16]=C):C=e[16],C}function Ie(t){const e=S.c(2),{children:s}=t;let l;return e[0]!==s?(l=a.jsx("span",{className:"text-muted-foreground bg-primary/5 rounded px-2 py-0.5 text-xs italic",children:s}),e[0]=s,e[1]=l):l=e[1],l}const Ol=w.memo(t=>{const e=S.c(18),{column:s}=t,l=v(Pl),{handleQuerySorter:n}=re();if(l!=null&&l[s])if(l[s]==="asc"){let c;e[0]!==s||e[1]!==n?(c=()=>n(s),e[0]=s,e[1]=n,e[2]=c):c=e[2];let u;e[3]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(zt,{className:"h-3 w-3"}),e[3]=u):u=e[3];let d;return e[4]!==c?(d=a.jsx("button",{title:"Sort column in descending order",type:"button","aria-label":"Sort descending",className:"cursor-pointer",onClick:c,children:u}),e[4]=c,e[5]=d):d=e[5],d}else{let c;e[6]!==s||e[7]!==n?(c=()=>n(s),e[6]=s,e[7]=n,e[8]=c):c=e[8];let u;e[9]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx($t,{className:"h-3 w-3"}),e[9]=u):u=e[9];let d;return e[10]!==c?(d=a.jsx("button",{title:"Sort column in ascending order",type:"button","aria-label":"Sort ascending",className:"cursor-pointer",onClick:c,children:u}),e[10]=c,e[11]=d):d=e[11],d}let r;e[12]!==s||e[13]!==n?(r=()=>n(s),e[12]=s,e[13]=n,e[14]=r):r=e[14];let i;e[15]===Symbol.for("react.memo_cache_sentinel")?(i=a.jsx(At,{className:"h-3 w-3"}),e[15]=i):i=e[15];let o;return e[16]!==r?(o=a.jsx("button",{title:"Sort column in ascending order",type:"button","aria-label":"Sort column",className:"cursor-pointer",onClick:r,children:i}),e[16]=r,e[17]=o):o=e[17],o});function Pl(t){return t.sorters}function Ml(){const t=S.c(31),e=v(Gl),s=v(Hl),l=v(Ql),n=v(Bl),r=v(Ul),i=v(Fl),{handleQueryFilter:o}=re(),{handleRowClick:c}=fe();let u,d;t[0]!==r||t[1]!==i?(d=a.jsx("div",{className:"flex h-full flex-col items-center justify-center gap-1 px-4",children:r?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"mb-1 font-medium",children:"No Data To Show"}),a.jsx("p",{className:"text-muted-foreground max-w-md text-sm",children:"The current filters did not return any results"})]}),a.jsxs($,{size:"sm",variant:"outline",className:"text-xs",onClick:()=>i(null),children:[a.jsx(ke,{className:"mr-1 h-3 w-3"}),"Clear filters"]})]}):a.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 p-8",children:[a.jsx("div",{className:"bg-primary/10 rounded-full p-4",children:a.jsx(ue,{className:"text-primary/70 h-8 w-8"})}),a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"mb-1 font-medium",children:"No Data To Show"}),a.jsx("p",{className:"text-muted-foreground max-w-md text-sm",children:"This table does not have any data to display"})]})]})}),t[0]=r,t[1]=i,t[2]=d):d=t[2],u=d;const m=u;let f,x;t[3]!==s?(x=s||[],t[3]=s,t[4]=x):x=t[4];let p;if(t[5]!==r||t[6]!==o||t[7]!==x){let T;t[9]!==r||t[10]!==o?(T=E=>a.jsx(Al,{column:E,value:(r==null?void 0:r[E])??"",onChange:o},E),t[9]=r,t[10]=o,t[11]=T):T=t[11],p=x.map(T),t[5]=r,t[6]=o,t[7]=x,t[8]=p}else p=t[8];f=p;const h=f;let g;t[12]!==s||t[13]!==l||t[14]!==h||t[15]!==n?(g=s&&l?s.map((T,E)=>a.jsxs(Me,{className:"p-1 text-xs",children:[a.jsxs("div",{className:"flex items-center gap-1 py-[1.5px]",children:[a.jsx(Ol,{column:T}),a.jsx(le,{className:"text-foreground font-medium capitalize",children:T}),a.jsx(Re,{columnSchema:n[l].schema[E]})]}),h==null?void 0:h[E]]},T)):a.jsx(Me,{children:a.jsx("p",{className:"text-xs",children:"No columns found"})}),t[12]=s,t[13]=l,t[14]=h,t[15]=n,t[16]=g):g=t[16];let y;t[17]!==g?(y=a.jsx(zl,{children:a.jsx(Ce,{className:"bg-primary/5",children:g})}),t[17]=g,t[18]=y):y=t[18];let j;t[19]!==(s==null?void 0:s.length)||t[20]!==l||t[21]!==e||t[22]!==m||t[23]!==c||t[24]!==n?(j=e&&e.length>0?e.map((T,E)=>{var R,z;const _=((R=n[l])==null?void 0:R.type)==="view",k=(z=n[l])==null?void 0:z.primaryKey,O=k&&!_?T[0]:null,I=k&&!_?T.slice(1):T;return a.jsx(Ce,{onClick:()=>c(I,E,O),className:"hover:bg-primary/5 focus:bg-primary/5 cursor-pointer text-xs",children:I.map((U,B)=>{var M;return a.jsx(Fe,{className:"border-primary/5 border-t p-2",children:U===null?a.jsx(Ie,{children:U===null?"NULL":JSON.stringify(U)}):a.jsx(a.Fragment,{children:((M=n[l].schema[B])==null?void 0:M.type)==="BLOB"?a.jsx(Ie,{children:"BLOB"}):a.jsx(le,{className:"text-xs",children:U})})},B)})},E)}):a.jsx(Ce,{children:a.jsx(Fe,{colSpan:(s==null?void 0:s.length)??1,className:"h-32 text-center",children:m})}),t[19]=s==null?void 0:s.length,t[20]=l,t[21]=e,t[22]=m,t[23]=c,t[24]=n,t[25]=j):j=t[25];let N;t[26]!==j?(N=a.jsx($l,{children:j}),t[26]=j,t[27]=N):N=t[27];let C;return t[28]!==y||t[29]!==N?(C=a.jsxs(Dl,{children:[y,N]}),t[28]=y,t[29]=N,t[30]=C):C=t[30],C}function Fl(t){return t.setFilters}function Ul(t){return t.filters}function Bl(t){return t.tablesSchema}function Ql(t){return t.currentTable}function Hl(t){return t.columns}function Gl(t){return t.data}function Vl(){const t=S.c(49),{handlePageChange:e,handleExport:s}=re(),{isInserting:l,handleInsert:n}=fe(),r=v(Yl),i=v(Xl),o=v(ql),c=v(Wl),u=v(Kl);let d;t[0]!==e?(d=()=>e("first"),t[0]=e,t[1]=d):d=t[1];const m=r===0||c||!o;let f;t[2]===Symbol.for("react.memo_cache_sentinel")?(f=a.jsx(Ot,{className:"h-4 w-4"}),t[2]=f):f=t[2];let x;t[3]!==d||t[4]!==m?(x=a.jsx($,{onClick:d,disabled:m,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-l-md rounded-r-none border-r",title:"Go to first page",children:f}),t[3]=d,t[4]=m,t[5]=x):x=t[5];let p;t[6]!==e?(p=()=>e("prev"),t[6]=e,t[7]=p):p=t[7];const h=r===0||c||!o;let g;t[8]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsx(He,{className:"h-4 w-4"}),t[8]=g):g=t[8];let y;t[9]!==p||t[10]!==h?(y=a.jsx($,{onClick:p,disabled:h,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-none border-r",title:"Go to previous page",children:g}),t[9]=p,t[10]=h,t[11]=y):y=t[11];let j;t[12]!==i||t[13]!==o||t[14]!==r?(j=a.jsx("div",{className:"flex items-center justify-center px-3 text-xs font-medium",children:o?a.jsxs("span",{children:[r+1,a.jsx("span",{className:"text-primary/50 mx-1",children:"-"}),r+i>o?o:r+i,a.jsx("span",{className:"text-primary/50 mx-1",children:"of"}),o]}):a.jsx("span",{children:"No data"})}),t[12]=i,t[13]=o,t[14]=r,t[15]=j):j=t[15];let N;t[16]!==e?(N=()=>e("next"),t[16]=e,t[17]=N):N=t[17];const C=r+i>=o||c||!o;let T;t[18]===Symbol.for("react.memo_cache_sentinel")?(T=a.jsx(Qe,{className:"h-4 w-4"}),t[18]=T):T=t[18];let E;t[19]!==C||t[20]!==N?(E=a.jsx($,{onClick:N,disabled:C,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-none border-l",title:"Go to next page",children:T}),t[19]=C,t[20]=N,t[21]=E):E=t[21];let _;t[22]!==e?(_=()=>e("last"),t[22]=e,t[23]=_):_=t[23];const k=r+i>=o||c||!o;let O;t[24]===Symbol.for("react.memo_cache_sentinel")?(O=a.jsx(Pt,{className:"h-4 w-4"}),t[24]=O):O=t[24];let I;t[25]!==_||t[26]!==k?(I=a.jsx($,{onClick:_,disabled:k,size:"icon",variant:"ghost",className:"h-8 w-8 rounded-l-none rounded-r-md border-l",title:"Go to last page",children:O}),t[25]=_,t[26]=k,t[27]=I):I=t[27];let R;t[28]!==E||t[29]!==I||t[30]!==x||t[31]!==y||t[32]!==j?(R=a.jsx("section",{className:"bg-primary/10 flex h-full grow items-center gap-2 p-1",children:a.jsxs("div",{className:"flex items-center rounded-md border shadow-sm",children:[x,y,j,E,I]})}),t[28]=E,t[29]=I,t[30]=x,t[31]=y,t[32]=j,t[33]=R):R=t[33];const z=l||u;let U;t[34]===Symbol.for("react.memo_cache_sentinel")?(U=a.jsx(je,{className:"mr-2 h-3.5 w-3.5"}),t[34]=U):U=t[34];let B;t[35]!==n||t[36]!==z?(B=a.jsxs($,{size:"sm",variant:"outline",className:"h-8 text-xs font-medium shadow-sm",onClick:n,disabled:z,children:[U,"Insert row"]}),t[35]=n,t[36]=z,t[37]=B):B=t[37];let M;t[38]!==s?(M=()=>s("current"),t[38]=s,t[39]=M):M=t[39];let V;t[40]===Symbol.for("react.memo_cache_sentinel")?(V=a.jsx(be,{className:"mr-2 h-3.5 w-3.5"}),t[40]=V):V=t[40];let K;t[41]!==M?(K=a.jsxs($,{onClick:M,size:"sm",variant:"outline",className:"h-8 text-xs font-medium shadow-sm",title:"Export current data as CSV",children:[V,"Export data"]}),t[41]=M,t[42]=K):K=t[42];let W;t[43]!==B||t[44]!==K?(W=a.jsxs("section",{className:"bg-primary/10 hidden h-full items-center gap-1 p-2 md:flex",children:[B,K]}),t[43]=B,t[44]=K,t[45]=W):W=t[45];let X;return t[46]!==R||t[47]!==W?(X=a.jsxs("footer",{className:"bg-background flex w-full items-center justify-between border-t shadow-sm",id:"paginationControls",children:[R,W]}),t[46]=R,t[47]=W,t[48]=X):X=t[48],X}function Kl(t){var e;return((e=t.tablesSchema[t.currentTable])==null?void 0:e.type)==="view"}function Wl(t){return t.isDataLoading}function ql(t){return t.maxSize}function Xl(t){return t.limit}function Yl(t){return t.offset}function Jl(t){const e=S.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let l;return e[2]!==s?(l=a.jsx(is,{"data-slot":"dropdown-menu",...s}),e[2]=s,e[3]=l):l=e[3],l}function Zl(t){const e=S.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let l;return e[2]!==s?(l=a.jsx(ns,{"data-slot":"dropdown-menu-trigger",...s}),e[2]=s,e[3]=l):l=e[3],l}function ea(t){const e=S.c(10);let s,l,n;e[0]!==t?({className:s,sideOffset:n,...l}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n):(s=e[1],l=e[2],n=e[3]);const r=n===void 0?4:n;let i;e[4]!==s?(i=A("bg-popover text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 z-50 max-h-(--radix-dropdown-menu-content-available-height) min-w-[8rem] overflow-x-hidden overflow-y-auto rounded-md border p-1 shadow-md",s),e[4]=s,e[5]=i):i=e[5];let o;return e[6]!==l||e[7]!==r||e[8]!==i?(o=a.jsx(os,{children:a.jsx(cs,{"data-slot":"dropdown-menu-content",sideOffset:r,className:i,...l})}),e[6]=l,e[7]=r,e[8]=i,e[9]=o):o=e[9],o}function pe(t){const e=S.c(12);let s,l,n,r;e[0]!==t?({className:s,inset:l,variant:r,...n}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n,e[4]=r):(s=e[1],l=e[2],n=e[3],r=e[4]);const i=r===void 0?"default":r;let o;e[5]!==s?(o=A("focus:bg-accent focus:text-accent-foreground data-[variant=destructive]:text-destructive data-[variant=destructive]:focus:bg-destructive/10 dark:data-[variant=destructive]:focus:bg-destructive/20 data-[variant=destructive]:focus:text-destructive data-[variant=destructive]:*:[svg]:!text-destructive [&_svg:not([class*='text-'])]:text-muted-foreground relative flex cursor-default items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-hidden select-none data-[disabled]:pointer-events-none data-[disabled]:opacity-50 data-[inset]:pl-8 [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",s),e[5]=s,e[6]=o):o=e[6];let c;return e[7]!==l||e[8]!==n||e[9]!==o||e[10]!==i?(c=a.jsx(rs,{"data-slot":"dropdown-menu-item","data-inset":l,"data-variant":i,className:o,...n}),e[7]=l,e[8]=n,e[9]=o,e[10]=i,e[11]=c):c=e[11],c}function ta(t){const e=S.c(33),{setFilters:s,setSorters:l,filters:n,sorters:r,handleExport:i}=t,{isInserting:o,handleInsert:c}=fe(),u=v(sa);let d;e[0]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsx(Zl,{asChild:!0,children:a.jsxs($,{variant:"outline",size:"sm",className:"h-8 text-xs",children:["Actions ",a.jsx(ve,{className:"ml-1 h-3 w-3"})]})}),e[0]=d):d=e[0];let m;e[1]!==s?(m=()=>s(null),e[1]=s,e[2]=m):m=e[2];const f=n==null;let x;e[3]===Symbol.for("react.memo_cache_sentinel")?(x=a.jsx(ke,{className:"mr-1 h-3 w-3"}),e[3]=x):x=e[3];let p;e[4]!==m||e[5]!==f?(p=a.jsx(pe,{asChild:!0,children:a.jsxs($,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:m,disabled:f,title:"Clear applied filters",children:[x,"Clear filters"]})}),e[4]=m,e[5]=f,e[6]=p):p=e[6];let h;e[7]!==l?(h=()=>l(null),e[7]=l,e[8]=h):h=e[8];const g=r==null;let y;e[9]===Symbol.for("react.memo_cache_sentinel")?(y=a.jsx(Ge,{className:"mr-1 h-3 w-3"}),e[9]=y):y=e[9];let j;e[10]!==h||e[11]!==g?(j=a.jsx(pe,{asChild:!0,children:a.jsxs($,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:h,disabled:g,title:"Reset sorting",children:[y,"Reset sorting"]})}),e[10]=h,e[11]=g,e[12]=j):j=e[12];const N=o||u;let C;e[13]===Symbol.for("react.memo_cache_sentinel")?(C=a.jsx(je,{className:"mr-1 h-3 w-3"}),e[13]=C):C=e[13];let T;e[14]!==c||e[15]!==N?(T=a.jsx(pe,{asChild:!0,children:a.jsxs($,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:c,disabled:N,title:"Insert a new row",children:[C,"Insert row"]})}),e[14]=c,e[15]=N,e[16]=T):T=e[16];let E;e[17]!==i?(E=()=>i("table"),e[17]=i,e[18]=E):E=e[18];let _;e[19]===Symbol.for("react.memo_cache_sentinel")?(_=a.jsx(be,{className:"mr-1 h-3 w-3"}),e[19]=_):_=e[19];let k;e[20]!==E?(k=a.jsx(pe,{asChild:!0,children:a.jsxs($,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:E,title:"Export the current table as CSV",children:[_,"Export table"]})}),e[20]=E,e[21]=k):k=e[21];let O;e[22]!==i?(O=()=>i("current"),e[22]=i,e[23]=O):O=e[23];let I;e[24]===Symbol.for("react.memo_cache_sentinel")?(I=a.jsx(be,{className:"mr-1 h-3 w-3"}),e[24]=I):I=e[24];let R;e[25]!==O?(R=a.jsx(pe,{asChild:!0,children:a.jsxs($,{variant:"ghost",size:"sm",className:"h-8 w-full justify-start text-xs",onClick:O,title:"Export the current data as CSV",children:[I,"Export data"]})}),e[25]=O,e[26]=R):R=e[26];let z;return e[27]!==T||e[28]!==k||e[29]!==R||e[30]!==p||e[31]!==j?(z=a.jsxs(Jl,{children:[d,a.jsxs(ea,{className:"w-40",children:[p,j,T,k,R]})]}),e[27]=T,e[28]=k,e[29]=R,e[30]=p,e[31]=j,e[32]=z):z=e[32],z}function sa(t){var e;return((e=t.tablesSchema[t.currentTable])==null?void 0:e.type)==="view"}function la(t){const e=S.c(30),{filters:s,sorters:l}=t,n=v(na),r=v(aa),{handleExport:i}=re();let o;e[0]!==n?(o=()=>n(null),e[0]=n,e[1]=o):o=e[1];const c=s==null;let u;e[2]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(ke,{className:"mr-1 h-3 w-3"}),e[2]=u):u=e[2];let d;e[3]!==o||e[4]!==c?(d=a.jsxs($,{size:"sm",variant:"outline",className:"h-8 text-xs",onClick:o,disabled:c,title:"Clear applied filters",children:[u,"Clear filters"]}),e[3]=o,e[4]=c,e[5]=d):d=e[5];let m;e[6]!==r?(m=()=>r(null),e[6]=r,e[7]=m):m=e[7];const f=l==null;let x;e[8]===Symbol.for("react.memo_cache_sentinel")?(x=a.jsx(Ge,{className:"mr-1 h-3 w-3"}),e[8]=x):x=e[8];let p;e[9]!==m||e[10]!==f?(p=a.jsxs($,{size:"sm",variant:"outline",className:"h-8 text-xs",onClick:m,disabled:f,title:"Reset sorting",children:[x,"Reset sorting"]}),e[9]=m,e[10]=f,e[11]=p):p=e[11];let h;e[12]!==i?(h=()=>i("table"),e[12]=i,e[13]=h):h=e[13];let g;e[14]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsx(be,{className:"mr-1 h-3 w-3"}),e[14]=g):g=e[14];let y;e[15]!==h?(y=a.jsxs($,{size:"sm",variant:"outline",className:"h-8 text-xs",onClick:h,title:"Export the current table as CSV",children:[g,"Export table"]}),e[15]=h,e[16]=y):y=e[16];let j;e[17]!==y||e[18]!==d||e[19]!==p?(j=a.jsxs("div",{className:"hidden items-center gap-1 md:flex",children:[d,p,y]}),e[17]=y,e[18]=d,e[19]=p,e[20]=j):j=e[20];let N;e[21]!==s||e[22]!==i||e[23]!==n||e[24]!==r||e[25]!==l?(N=a.jsx("div",{className:"md:hidden",children:a.jsx(ta,{setFilters:n,setSorters:r,filters:s,sorters:l,handleExport:i})}),e[21]=s,e[22]=i,e[23]=n,e[24]=r,e[25]=l,e[26]=N):N=e[26];let C;return e[27]!==j||e[28]!==N?(C=a.jsxs(a.Fragment,{children:[j,N]}),e[27]=j,e[28]=N,e[29]=C):C=e[29],C}function aa(t){return t.setSorters}function na(t){return t.setFilters}function ra(){const t=S.c(30),e=v(xa),s=v(fa),l=v(ua),n=v(ma),r=ae(da),i=ae(ca),o=ae(oa),c=ae(ia),{isEditing:u}=fe();let d;t[0]===Symbol.for("react.memo_cache_sentinel")?(d=a.jsx(jl,{}),t[0]=d):d=t[0];let m;t[1]!==e||t[2]!==s?(m=a.jsx(la,{filters:e,sorters:s}),t[1]=e,t[2]=s,t[3]=m):m=t[3];let f;t[4]!==l||t[5]!==n?(f=(l||n)&&a.jsxs("span",{className:"ml-2 flex items-center text-xs text-gray-500",children:[a.jsx(Ne,{className:"mr-1 h-3 w-3 animate-spin"}),"Loading data"]}),t[4]=l,t[5]=n,t[6]=f):f=t[6];let x;t[7]!==m||t[8]!==f?(x=a.jsxs("div",{className:"flex items-center gap-1 border-b px-1 py-2",children:[d,m,f]}),t[7]=m,t[8]=f,t[9]=x):x=t[9];let p;t[10]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsxs("div",{className:"flex h-full flex-col justify-between border-l",id:"dataSection",children:[a.jsx(Ml,{}),a.jsx(Vl,{})]}),t[10]=p):p=t[10];let h;t[11]!==r||t[12]!==o?(h=a.jsx(me,{id:"dataPanel",defaultSize:r,onResize:o,children:p}),t[11]=r,t[12]=o,t[13]=h):h=t[13];let g;t[14]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsx(_e,{className:"hidden md:flex",withHandle:!0}),t[14]=g):g=t[14];const y=`static md:relative md:block ${u?"block":"hidden"}`;let j;t[15]===Symbol.for("react.memo_cache_sentinel")?(j=a.jsx("div",{className:"h-full overflow-hidden",children:a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsx(De,{})})}),t[15]=j):j=t[15];const N=`bg-background absolute top-0 right-0 z-40 h-full w-full ${u?"block":"hidden"}`;let C;t[16]===Symbol.for("react.memo_cache_sentinel")?(C=a.jsx("section",{className:"bg-primary/5 h-full",children:a.jsx(Cl,{})}),t[16]=C):C=t[16];let T;t[17]!==N?(T=a.jsx("div",{className:N,children:C}),t[17]=N,t[18]=T):T=t[18];let E;t[19]!==i||t[20]!==c||t[21]!==T||t[22]!==y?(E=a.jsxs(me,{id:"schemaPanel",defaultSize:i,onResize:c,className:y,children:[j,T]}),t[19]=i,t[20]=c,t[21]=T,t[22]=y,t[23]=E):E=t[23];let _;t[24]!==E||t[25]!==h?(_=a.jsx("div",{className:"relative h-full overflow-hidden",children:a.jsxs(Ee,{direction:"horizontal",className:"h-full",children:[h,g,E]})}),t[24]=E,t[25]=h,t[26]=_):_=t[26];let k;return t[27]!==_||t[28]!==x?(k=a.jsxs("div",{className:"flex h-full flex-col",children:[x,_]}),t[27]=_,t[28]=x,t[29]=k):k=t[29],k}function ia(t){return t.setSchemaPanelSize}function oa(t){return t.setDataPanelSize}function ca(t){return t.schemaPanelSize}function da(t){return t.dataPanelSize}function ma(t){return t.isDatabaseLoading}function ua(t){return t.isDataLoading}function fa(t){return t.sorters}function xa(t){return t.filters}function ha(){const t=v(c=>c.geminiApiKey),e=v(c=>c.tablesSchema),s=v(c=>c.customQuery),l=v(c=>c.setCustomQuery),n=v(c=>c.setErrorMessage),r=v(c=>c.setIsAiLoading),i=v(c=>c.isAiLoading);return{generateSqlQuery:w.useCallback(async()=>{if(!t){n("Gemini API key not set.");return}if(!(!s||!s.startsWith("/ai "))){r(!0),n(null);try{let d=(await(await fetch(`https://generativelanguage.googleapis.com/v1beta/models/gemini-1.5-flash-latest:generateContent?key=${t}`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({contents:[{parts:[{text:`You are an expert SQLite assistant. Your role is to generate a single, valid SQLite query based on the provided database schema and user prompt.
                **Instructions:**
                1. **Analyze the Schema:** Carefully review the following table and index information to understand the database structure.
                2. **Interpret the Prompt:** Understand the user's request and translate it into a precise SQLite query.
                3. **Generate SQL Only:** Your output must be **only** the raw SQL query. Do not include any other text, explanations, or markdown formatting.
                4. **Use SQL Comments for Notes:** If you need to add any notes or clarifications, use SQL comments (e.g., -- your note here).

                **Database Schema:**
                \`\`\`json
                ${JSON.stringify(e,null,2)}
                \`\`\`
                **User Prompt:**
                ${s.substring(4)}`}]}]})})).json()).candidates[0].content.parts[0].text;const m=d.match(/```(?:sql|sqlite)\n([\s\S]*?)\n```/);m&&m[1]?d=m[1].trim():d=d.trim(),l(d)}catch(c){console.error("Error calling Gemini API:",c),n("Error calling Gemini API.")}finally{r(!1)}}},[t,s,e,l,n,r]),isAiLoading:i}}const pa=["ABORT","ACTION","ADD","AFTER","ALL","ALTER","ANALYZE","AND","AS","ASC","ATTACH","AUTOINCREMENT","BEFORE","BEGIN","BETWEEN","BY","CASCADE","CASE","CAST","CHECK","COLLATE","COLUMN","COMMIT","CONFLICT","CONSTRAINT","CREATE","CROSS","CURRENT_DATE","CURRENT_TIME","CURRENT_TIMESTAMP","DATABASE","DEFAULT","DEFERRABLE","DEFERRED","DELETE","DESC","DETACH","DISTINCT","DROP","EACH","ELSE","END","ESCAPE","EXCEPT","EXCLUSIVE","EXISTS","EXPLAIN","FAIL","FOR","FOREIGN","FROM","FULL","GLOB","GROUP","HAVING","IF","IGNORE","IMMEDIATE","IN","INDEX","INDEXED","INITIALLY","INNER","INSERT","INSTEAD","INTERSECT","INTO","IS","ISNULL","JOIN","KEY","LEFT","LIKE","LIMIT","MATCH","NATURAL","NO","NOT","NOTNULL","NULL","OF","OFFSET","ON","OR","ORDER","OUTER","PLAN","PRAGMA","PRIMARY","QUERY","RAISE","RECURSIVE","REFERENCES","REGEXP","REINDEX","RELEASE","RENAME","REPLACE","RESTRICT","RIGHT","ROLLBACK","ROW","SAVEPOINT","SELECT","SET","TABLE","TEMP","TEMPORARY","THEN","TO","TRANSACTION","TRIGGER","UNION","UNIQUE","UPDATE","USING","VACUUM","VALUES","VIEW","VIRTUAL","WHEN","WHERE","WITH","WITHOUT"],ba=["ABS","ACOS","ASIN","ATAN","CEIL","COS","EXP","FLOOR","HEX","LENGTH","LOG","LOWER","LTRIM","OCT","PI","POW","ROUND","SIGN","SIN","SQRT","TAN","TRIM","UPPER"];function ga(){const{theme:t}=Xe(),e=v(d=>d.customQuery),s=v(d=>d.setCustomQuery),l=v(d=>d.tablesSchema),{tableNames:n,columnNames:r}=w.useMemo(()=>{const d=Object.keys(l),m=d.flatMap(f=>l[f].schema.map(x=>x.name));return{tableNames:d,columnNames:m}},[l]),i=w.useMemo(()=>[...pa.map(d=>({label:d,type:"keyword"})),...ba.map(d=>({label:d,type:"function"})),...n.map(d=>({label:d,type:"table"})),...r.map(d=>({label:d,type:"column"}))],[n,r]),o=w.useCallback(d=>{const m=d.matchBefore(/\w*/);return!m||m.from===m.to&&!d.explicit?null:{from:m.from,to:m.to,options:i}},[i]),c=w.useCallback(d=>{d!==e&&s(d)},[e,s]),u=w.useMemo(()=>e&&e.startsWith("/ai ")?[Ae({override:[o]})]:[Ts,Es(),Ae({override:[o]})],[o,e]);return a.jsx(Ss,{value:e,height:"100%",extensions:u,onChange:c,className:"h-full w-full",theme:t==="dark"?Cs:"light"})}const Ue=36;function ya(){const t=S.c(23),e=v(ja);if(!e){let c;t[0]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx("div",{className:"bg-primary/10 rounded-full p-4",children:a.jsx(ue,{className:"text-primary/70 h-8 w-8"})}),t[0]=c):c=t[0];let u;return t[1]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4 p-8",children:[c,a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"mb-1 font-medium",children:"No Query Results"}),a.jsx("p",{className:"text-muted-foreground max-w-md text-sm",children:"Execute a SQL query to view the results here"})]})]}),t[1]=u):u=t[1],u}if(!e.data||e.data.length===0){let c,u;t[2]===Symbol.for("react.memo_cache_sentinel")?(c=a.jsx(ye,{className:"text-primary/70 h-4 w-4"}),u=a.jsx("h3",{className:"text-sm font-medium",children:"Query Results"}),t[2]=c,t[3]=u):(c=t[2],u=t[3]);let d;t[4]!==e.columns.length?(d=a.jsx("div",{className:"bg-primary/5 border-b p-3",children:a.jsxs("div",{className:"flex items-center gap-2",children:[c,u,a.jsxs("span",{className:"bg-primary/10 rounded-full px-2 py-0.5 text-xs",children:[e.columns.length," columns"]})]})}),t[4]=e.columns.length,t[5]=d):d=t[5];let m;t[6]===Symbol.for("react.memo_cache_sentinel")?(m=a.jsxs("div",{className:"flex flex-col items-center justify-center p-12 text-center",children:[a.jsx("div",{className:"bg-primary/5 mb-4 rounded-full p-4",children:a.jsx(ye,{className:"text-primary/50 h-6 w-6"})}),a.jsx("p",{className:"text-md mb-1 font-medium",children:"Query returned no results"}),a.jsx("p",{className:"text-muted-foreground text-sm",children:"Your query executed successfully but returned no data"})]}),t[6]=m):m=t[6];let f;return t[7]!==d?(f=a.jsxs("div",{className:"h-full shadow-sm",children:[d,m]}),t[7]=d,t[8]=f):f=t[8],f}let s;t[9]===Symbol.for("react.memo_cache_sentinel")?(s=a.jsxs("div",{className:"flex items-center gap-2",children:[a.jsx(ye,{className:"text-primary/70 h-4 w-4"}),a.jsx(le,{className:"mr-2 text-sm font-medium text-nowrap",children:"Query Results"})]}),t[9]=s):s=t[9];let l;t[10]!==e.data.length?(l=a.jsxs(le,{className:"bg-primary/10 rounded-full px-2 py-0.5 text-xs text-nowrap",children:[e.data.length," rows"]}),t[10]=e.data.length,t[11]=l):l=t[11];let n;t[12]!==e.columns.length?(n=a.jsxs(le,{className:"bg-primary/10 rounded-full px-2 py-0.5 text-xs text-nowrap",children:[e.columns.length," columns"]}),t[12]=e.columns.length,t[13]=n):n=t[13];let r;t[14]!==l||t[15]!==n?(r=a.jsx("div",{className:"bg-primary/5 flex-shrink-0 border-b p-3",children:a.jsxs("div",{className:"flex items-center justify-between",children:[s,a.jsxs("div",{className:"flex items-center gap-2",children:[l,n]})]})}),t[14]=l,t[15]=n,t[16]=r):r=t[16];let i;t[17]!==e.columns||t[18]!==e.data?(i=a.jsx("div",{className:"h-0 min-h-0 flex-grow overflow-hidden",children:a.jsx(Is,{children:c=>{const{height:u,width:d}=c;return a.jsxs("div",{style:{height:u,width:d},children:[a.jsx("div",{className:"bg-primary/5 sticky top-0 z-10 flex border-b",style:{width:d},children:e.columns.map(m=>{const f=100/e.columns.length;return a.jsx("div",{className:"p-2 text-xs font-medium text-ellipsis whitespace-nowrap",style:{width:`${f}%`,flexShrink:0},children:a.jsx(le,{className:"text-foreground capitalize",children:m})},m)})}),a.jsx(_s,{height:u-Ue,width:d,itemCount:e.data.length,itemSize:Ue,overscanCount:5,children:m=>{const{index:f,style:x}=m,p=e.data[f];return a.jsx("div",{style:{...x,display:"flex",width:d},children:p.map((h,g)=>{const y=100/e.columns.length;return a.jsx("div",{className:"border-primary/5 overflow-hidden border-t p-2 text-ellipsis whitespace-nowrap",style:{width:`${y}%`,minWidth:"100px",flexShrink:0},children:h!==null?a.jsx(le,{className:"text-xs",children:String(h)}):a.jsx(Ie,{children:"NULL"})},g)})},f)}})]})}})}),t[17]=e.columns,t[18]=e.data,t[19]=i):i=t[19];let o;return t[20]!==r||t[21]!==i?(o=a.jsxs("div",{className:"flex h-full w-full flex-col shadow-sm",children:[r,i]}),t[20]=r,t[21]=i,t[22]=o):o=t[22],o}function ja(t){return t.customQueryObject}function Na(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("flex items-center gap-2 text-sm leading-none font-medium select-none group-data-[disabled=true]:pointer-events-none group-data-[disabled=true]:opacity-50 peer-disabled:cursor-not-allowed peer-disabled:opacity-50",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx(ds,{"data-slot":"label",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function st(t){const e=S.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let l;return e[2]!==s?(l=a.jsx(ms,{"data-slot":"dialog",...s}),e[2]=s,e[3]=l):l=e[3],l}function va(t){const e=S.c(4);let s;e[0]!==t?({...s}=t,e[0]=t,e[1]=s):s=e[1];let l;return e[2]!==s?(l=a.jsx(hs,{"data-slot":"dialog-portal",...s}),e[2]=s,e[3]=l):l=e[3],l}function wa(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 fixed inset-0 z-50 bg-black/50",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx(bs,{"data-slot":"dialog-overlay",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function lt(t){const e=S.c(12);let s,l,n;e[0]!==t?({className:l,children:s,...n}=t,e[0]=t,e[1]=s,e[2]=l,e[3]=n):(s=e[1],l=e[2],n=e[3]);let r;e[4]===Symbol.for("react.memo_cache_sentinel")?(r=a.jsx(wa,{}),e[4]=r):r=e[4];let i;e[5]!==l?(i=A("bg-background data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 fixed top-[50%] left-[50%] z-50 grid w-full max-w-[calc(100%-2rem)] translate-x-[-50%] translate-y-[-50%] gap-4 rounded-lg border p-6 shadow-lg duration-200 sm:max-w-lg",l),e[5]=l,e[6]=i):i=e[6];let o;e[7]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsxs(ps,{className:"ring-offset-background focus:ring-ring data-[state=open]:bg-accent data-[state=open]:text-muted-foreground absolute top-4 right-4 rounded-xs opacity-70 transition-opacity hover:opacity-100 focus:ring-2 focus:ring-offset-2 focus:outline-hidden disabled:pointer-events-none [&_svg]:pointer-events-none [&_svg]:shrink-0 [&_svg:not([class*='size-'])]:size-4",children:[a.jsx(Ve,{}),a.jsx("span",{className:"sr-only",children:"Close"})]}),e[7]=o):o=e[7];let c;return e[8]!==s||e[9]!==n||e[10]!==i?(c=a.jsxs(va,{"data-slot":"dialog-portal",children:[r,a.jsxs(us,{"data-slot":"dialog-content",className:i,...n,children:[s,o]})]}),e[8]=s,e[9]=n,e[10]=i,e[11]=c):c=e[11],c}function at(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("flex flex-col gap-2 text-center sm:text-left",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx("div",{"data-slot":"dialog-header",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function nt(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("flex flex-col-reverse gap-2 sm:flex-row sm:justify-end",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx("div",{"data-slot":"dialog-footer",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function rt(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("text-lg leading-none font-semibold",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx(fs,{"data-slot":"dialog-title",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function it(t){const e=S.c(8);let s,l;e[0]!==t?({className:s,...l}=t,e[0]=t,e[1]=s,e[2]=l):(s=e[1],l=e[2]);let n;e[3]!==s?(n=A("text-muted-foreground text-sm",s),e[3]=s,e[4]=n):n=e[4];let r;return e[5]!==l||e[6]!==n?(r=a.jsx(xs,{"data-slot":"dialog-description",className:n,...l}),e[5]=l,e[6]=n,e[7]=r):r=e[7],r}function Sa(t){const e=S.c(25),{isOpen:s,onClose:l}=t,n=v(Ta),[r,i]=w.useState(n||""),o=v(Ca);let c,u;e[0]!==n||e[1]!==s?(c=()=>{s&&i(n||"")},u=[s,n],e[0]=n,e[1]=s,e[2]=c,e[3]=u):(c=e[2],u=e[3]),w.useEffect(c,u);let d;e[4]!==r||e[5]!==l||e[6]!==o?(d=()=>{o(r),l()},e[4]=r,e[5]=l,e[6]=o,e[7]=d):d=e[7];const m=d;let f;e[8]===Symbol.for("react.memo_cache_sentinel")?(f=a.jsxs(at,{children:[a.jsx(rt,{children:"Set Gemini API Key"}),a.jsx(it,{children:"You can get your API key from Google AI Studio."})]}),e[8]=f):f=e[8];let x;e[9]===Symbol.for("react.memo_cache_sentinel")?(x=a.jsx(Na,{htmlFor:"api-key",className:"text-right",children:"API Key"}),e[9]=x):x=e[9];let p;e[10]===Symbol.for("react.memo_cache_sentinel")?(p=T=>i(T.target.value),e[10]=p):p=e[10];let h;e[11]!==r?(h=a.jsxs("div",{className:"grid grid-cols-[auto_1fr] items-center gap-2",children:[x,a.jsx(ge,{id:"api-key",value:r,onChange:p,className:"h-10 text-lg"})]}),e[11]=r,e[12]=h):h=e[12];let g;e[13]===Symbol.for("react.memo_cache_sentinel")?(g=a.jsxs("p",{className:"text-muted-foreground text-sm",children:["To use AI, type"," ",a.jsx("code",{className:"bg-muted relative rounded px-2 py-1 font-mono text-sm font-semibold",children:"/ai"})," ","followed by your prompt in the SQL editor."]}),e[13]=g):g=e[13];let y;e[14]!==h?(y=a.jsxs("div",{className:"grid gap-2 py-4",children:[h,g]}),e[14]=h,e[15]=y):y=e[15];let j;e[16]!==m?(j=a.jsx(nt,{children:a.jsx($,{onClick:m,children:"Save"})}),e[16]=m,e[17]=j):j=e[17];let N;e[18]!==j||e[19]!==y?(N=a.jsxs(lt,{children:[f,y,j]}),e[18]=j,e[19]=y,e[20]=N):N=e[20];let C;return e[21]!==s||e[22]!==l||e[23]!==N?(C=a.jsx(st,{open:s,onOpenChange:l,children:N}),e[21]=s,e[22]=l,e[23]=N,e[24]=C):C=e[24],C}function Ca(t){return t.setGeminiApiKey}function Ta(t){return t.geminiApiKey}function Ea(){const t=S.c(58),e=v(Oa),s=v(Aa),l=v($a),n=v(za),r=ae(Da),i=ae(Ra),o=ae(ka),c=ae(La),[u,d]=w.useState(!1),m=v(Ia),f=v(_a),{handleQueryExecute:x,handleExport:p}=re(),{generateSqlQuery:h,isAiLoading:g}=ha();let y;t[0]!==f||t[1]!==h||t[2]!==x?(y=()=>{f&&f.startsWith("/ai ")?h():x()},t[0]=f,t[1]=h,t[2]=x,t[3]=y):y=t[3];const j=y;let N;t[4]!==s?(N=()=>{s(null)},t[4]=s,t[5]=N):N=t[5];const C=N;let T;t[6]===Symbol.for("react.memo_cache_sentinel")?(T=()=>{d(!0)},t[6]=T):T=t[6];const E=T;let _;t[7]!==g?(_=g?a.jsx(Ne,{className:"mr-1 h-3 w-3 animate-spin"}):a.jsx(Mt,{className:"mr-1 h-3 w-3"}),t[7]=g,t[8]=_):_=t[8];let k;t[9]!==j||t[10]!==g||t[11]!==_?(k=a.jsxs($,{size:"sm",variant:"outline",className:"w-[150px] text-xs",onClick:j,disabled:g,title:"Execute SQL",children:[_,"Execute SQL"]}),t[9]=j,t[10]=g,t[11]=_,t[12]=k):k=t[12];let O;t[13]!==p?(O=()=>p("custom"),t[13]=p,t[14]=O):O=t[14];const I=!(m!=null&&m.data);let R;t[15]===Symbol.for("react.memo_cache_sentinel")?(R=a.jsx(be,{className:"mr-1 h-3 w-3"}),t[15]=R):R=t[15];let z;t[16]!==O||t[17]!==I?(z=a.jsxs($,{onClick:O,size:"sm",variant:"outline",className:"text-xs",disabled:I,children:[R,"Export data"]}),t[16]=O,t[17]=I,t[18]=z):z=t[18];let U;t[19]===Symbol.for("react.memo_cache_sentinel")?(U=a.jsxs($,{size:"sm",variant:"outline",className:"text-xs",onClick:E,children:[a.jsx(Ft,{className:"mr-1 h-3 w-3"}),"Gemini"]}),t[19]=U):U=t[19];let B;t[20]!==l||t[21]!==n?(B=(l||n)&&a.jsxs("span",{className:"ml-2 flex items-center text-xs text-gray-500",children:[a.jsx(Ne,{className:"mr-1 h-3 w-3 animate-spin"}),"Loading data"]}),t[20]=l,t[21]=n,t[22]=B):B=t[22];let M;t[23]!==B||t[24]!==k||t[25]!==z?(M=a.jsxs("div",{className:"flex items-center gap-1 border-b px-1 py-2",children:[k,z,U,B]}),t[23]=B,t[24]=k,t[25]=z,t[26]=M):M=t[26];let V;t[27]!==e||t[28]!==C?(V=e&&a.jsxs("div",{className:"flex items-center justify-between p-2",children:[a.jsx("div",{className:"text-sm text-red-400",children:e}),a.jsx($,{size:"sm",variant:"outline",className:"text-xs",onClick:C,children:a.jsx(Ve,{className:"h-3 w-3"})})]}),t[27]=e,t[28]=C,t[29]=V):V=t[29];let K;t[30]===Symbol.for("react.memo_cache_sentinel")?(K=a.jsx(ga,{}),t[30]=K):K=t[30];let W;t[31]!==V?(W=a.jsxs(me,{defaultSize:25,children:[V,K]}),t[31]=V,t[32]=W):W=t[32];let X;t[33]===Symbol.for("react.memo_cache_sentinel")?(X=a.jsx(_e,{withHandle:!0}),t[33]=X):X=t[33];let Z;t[34]===Symbol.for("react.memo_cache_sentinel")?(Z=a.jsx(me,{defaultSize:75,children:a.jsx("div",{className:"flex h-full flex-col justify-between border",children:a.jsx(ya,{})})}),t[34]=Z):Z=t[34];let Y;t[35]!==W?(Y=a.jsxs(Ee,{direction:"vertical",children:[W,X,Z]}),t[35]=W,t[36]=Y):Y=t[36];let J;t[37]!==r||t[38]!==o||t[39]!==Y?(J=a.jsx(me,{defaultSize:r,onResize:o,children:Y}),t[37]=r,t[38]=o,t[39]=Y,t[40]=J):J=t[40];let G;t[41]===Symbol.for("react.memo_cache_sentinel")?(G=a.jsx(_e,{className:"hidden md:flex",withHandle:!0}),t[41]=G):G=t[41];let ee;t[42]===Symbol.for("react.memo_cache_sentinel")?(ee=a.jsx("div",{className:"h-full overflow-hidden",children:a.jsx("div",{className:"h-full overflow-y-auto",children:a.jsx(De,{})})}),t[42]=ee):ee=t[42];let Q;t[43]!==i||t[44]!==c?(Q=a.jsx(me,{defaultSize:i,onResize:c,className:"hidden md:block",children:ee}),t[43]=i,t[44]=c,t[45]=Q):Q=t[45];let te;t[46]!==J||t[47]!==Q?(te=a.jsxs(Ee,{direction:"horizontal",className:"h-full",children:[J,G,Q]}),t[46]=J,t[47]=Q,t[48]=te):te=t[48];let oe;t[49]===Symbol.for("react.memo_cache_sentinel")?(oe=()=>d(!1),t[49]=oe):oe=t[49];let b;t[50]!==u?(b=a.jsx(Sa,{isOpen:u,onClose:oe}),t[50]=u,t[51]=b):b=t[51];let L;t[52]!==te||t[53]!==b?(L=a.jsxs("div",{className:"h-full overflow-hidden",children:[te,b]}),t[52]=te,t[53]=b,t[54]=L):L=t[54];let D;return t[55]!==M||t[56]!==L?(D=a.jsxs("div",{className:"flex h-full flex-col",children:[M,L]}),t[55]=M,t[56]=L,t[57]=D):D=t[57],D}function _a(t){return t.customQuery}function Ia(t){return t.customQueryObject}function La(t){return t.setSchemaPanelSize}function ka(t){return t.setDataPanelSize}function Ra(t){return t.schemaPanelSize}function Da(t){return t.dataPanelSize}function za(t){return t.isDatabaseLoading}function $a(t){return t.isDataLoading}function Aa(t){return t.setErrorMessage}function Oa(t){return t.errorMessage}const Pa=()=>{const{handleFileUpload:t}=re(),[e,s]=w.useState(!1),l=w.useCallback(i=>{var o;i.preventDefault(),i.stopPropagation(),(o=i.dataTransfer)!=null&&o.types&&(i.dataTransfer.types.includes("Files")||i.dataTransfer.types.includes("application/x-moz-file"))&&s(!0)},[]),n=w.useCallback(i=>{i.preventDefault(),i.stopPropagation(),i.target===document.documentElement&&s(!1)},[]),r=w.useCallback(i=>{var o,c,u,d,m;i.preventDefault(),i.stopPropagation(),s(!1);try{if(!((c=(o=i.dataTransfer)==null?void 0:o.types)!=null&&c.includes("Files"))&&!((d=(u=i.dataTransfer)==null?void 0:u.types)!=null&&d.includes("application/x-moz-file")))return;const f=(m=i.dataTransfer)==null?void 0:m.files;if(!f||f.length===0){F("No file detected","error");return}const x=f[0];t(x)}catch(f){const x=f instanceof Error?f.message:"Failed to process file";F(`Failed to process file: ${x}`,"error")}},[t]);return w.useEffect(()=>(window.addEventListener("dragover",l),window.addEventListener("dragleave",n),window.addEventListener("drop",r),()=>{window.removeEventListener("dragover",l),window.removeEventListener("dragleave",n),window.removeEventListener("drop",r)}),[l,n,r]),{isDragging:e}};function Ma(t){const e=S.c(5),{children:s}=t,{isDragging:l}=Pa();let n;e[0]!==l?(n=l&&a.jsx("section",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black/50 backdrop-blur-sm transition-all",children:a.jsxs("div",{className:"border-primary/60 bg-background/95 animate-in fade-in zoom-in-95 flex flex-col items-center justify-center rounded-lg border-2 border-dashed p-8 shadow-lg transition-transform duration-200",children:[a.jsx("div",{className:"bg-primary/10 mb-6 flex items-center justify-center rounded-full p-5",children:a.jsx(ue,{className:"text-primary h-12 w-12"})}),a.jsx("h3",{className:"mb-2 text-xl font-medium",children:"Drop SQLite Database"}),a.jsx("p",{className:"text-muted-foreground mb-4 text-center text-sm",children:"Release to load your database file"})]})}),e[0]=l,e[1]=n):n=e[1];let r;return e[2]!==s||e[3]!==n?(r=a.jsxs(a.Fragment,{children:[s,n]}),e[2]=s,e[3]=n,e[4]=r):r=e[4],r}function Fa(){const{handleFileUpload:t}=re(),e=v(x=>x.setIsDatabaseLoading),[s,l]=w.useState(null),[n,r]=w.useState(null),[i,o]=w.useState(!1),c=w.useRef(!1),u=w.useRef(!1),d=w.useCallback(x=>{try{return new URL(x),!0}catch{return!1}},[]),m=w.useCallback(async(x,p=!1)=>{if(u.current)return console.log("Fetch already in progress, ignoring duplicate call"),!1;if(u.current=!0,!d(x)){const h="Invalid URL format";return l(h),F(h,"error"),u.current=!1,!1}try{e(!0);const h=p?`https://corsproxy.io/?url=${encodeURIComponent(x)}`:x,g=await fetch(h,{method:"GET"});if(!g.ok)throw new Error(`HTTP error! status: ${g.status}`);F(p?"Retrieving database with CORS proxy, please wait":"Retrieving database, please wait","info");const y=await g.blob();if(y.size<100)throw new Error("The downloaded file seems too small to be a valid SQLite database");const j=new File([y],"database.sqlite");return t(j),F("Database loaded successfully","success"),l(null),!0}catch(h){const g=h instanceof Error?h.message:String(h);return l(g),p?F(`Failed to load with CORS proxy: ${g}`,"error"):(r(x),o(!0)),!1}finally{e(!1),u.current=!1}},[t,d,e]);w.useEffect(()=>{if(c.current)return;c.current=!0;const x=new AbortController;return(async()=>{const g=new URLSearchParams(window.location.search).get("url");if(g){const y=decodeURIComponent(g);try{await m(y)}catch(j){console.error("Initial fetch error:",j)}}})(),()=>{x.abort()}},[m]);const f=w.useCallback(()=>{n&&(m(n,!0),o(!1))},[n,m]);return a.jsx(st,{open:i,onOpenChange:o,children:a.jsxs(lt,{className:"sm:max-w-md",children:[a.jsxs(at,{children:[a.jsx(rt,{className:"text-xl font-semibold",children:"CORS Error Detected"}),a.jsx(it,{className:"text-muted-foreground pt-2 text-sm",children:"Something went wrong while loading the database. This might be due to Cross-Origin Resource Sharing (CORS) restrictions."})]}),a.jsxs("div",{className:"mt-4 space-y-4",children:[a.jsxs("p",{className:"text-sm",children:["Would you like to try using a CORS proxy?"," ",a.jsx("span",{className:"font-medium text-yellow-500 dark:text-yellow-400",children:"Note that this will send your database request through a third-party service."})]}),s&&a.jsx("div",{className:"bg-destructive/10 dark:bg-destructive/20 rounded-md p-3 text-red-400",children:a.jsxs("p",{className:"text-xs",children:["Error details: ",s]})})]}),a.jsxs(nt,{className:"mt-6 flex justify-end gap-3",children:[a.jsx($,{variant:"outline",onClick:()=>{o(!1),l(null)},children:"Cancel"}),a.jsx($,{variant:"default",onClick:f,children:"Use CORS Proxy"})]})]})})}function Ua(){const t=S.c(25),e=v(Ba);let s;t[0]===Symbol.for("react.memo_cache_sentinel")?(s=a.jsx(Fa,{}),t[0]=s):s=t[0];let l;t[1]===Symbol.for("react.memo_cache_sentinel")?(l=a.jsx(Us,{}),t[1]=l):l=t[1];let n,r;t[2]===Symbol.for("react.memo_cache_sentinel")?(n=a.jsx(ye,{className:"hidden h-4 w-4 md:block"}),r=a.jsx("span",{children:"Browse Data"}),t[2]=n,t[3]=r):(n=t[2],r=t[3]);let i;t[4]!==e?(i=a.jsxs(we,{id:"data",disabled:e,value:"data",className:"data-[state=active]: data-[state=active]:border-primary h-8 rounded-none text-xs",children:[n,r]},"data"),t[4]=e,t[5]=i):i=t[5];let o;t[6]===Symbol.for("react.memo_cache_sentinel")?(o=a.jsx(Ut,{className:"hidden h-4 w-4 md:block"}),t[6]=o):o=t[6];let c;t[7]!==e?(c=a.jsxs(we,{disabled:e,id:"execute",value:"execute",className:"data-[state=active]: data-[state=active]:border-primary h-8 rounded-none text-xs",children:[o,"Execute SQL"]},"execute"),t[7]=e,t[8]=c):c=t[8];let u;t[9]===Symbol.for("react.memo_cache_sentinel")?(u=a.jsx(ue,{className:"hidden h-4 w-4 md:block"}),t[9]=u):u=t[9];let d;t[10]!==e?(d=a.jsxs(we,{id:"structure",disabled:e,value:"structure",className:"data-[state=active]: data-[state=active]:border-primary h-8 rounded-none text-xs",children:[u,"Database Structure"]},"structure"),t[10]=e,t[11]=d):d=t[11];let m;t[12]!==i||t[13]!==c||t[14]!==d?(m=a.jsxs(As,{className:"bg-primary/5 h-9 w-full justify-start rounded-none border-b",children:[i,c,d]}),t[12]=i,t[13]=c,t[14]=d,t[15]=m):m=t[15];let f;t[16]!==e?(f=a.jsx(Se,{value:"data",className:"m-0 h-full border-none p-0",children:e?a.jsxs("div",{className:"flex h-full flex-col items-center justify-center gap-4",children:[a.jsx("div",{className:"bg-primary/10 rounded-full p-4",children:a.jsx(Ne,{className:"text-primary h-8 w-8 animate-spin"})}),a.jsxs("div",{className:"flex flex-col items-center",children:[a.jsx("span",{className:"text-xl font-medium",children:"Loading Database"}),a.jsx("span",{className:"text-muted-foreground text-sm",children:"Please wait while the database is initializing"})]})]}):a.jsx(ra,{})}),t[16]=e,t[17]=f):f=t[17];let x;t[18]===Symbol.for("react.memo_cache_sentinel")?(x=a.jsx(Se,{value:"structure",className:"m-0 h-full border-none p-0",children:a.jsx(ul,{})}),t[18]=x):x=t[18];let p;t[19]===Symbol.for("react.memo_cache_sentinel")?(p=a.jsx(Se,{value:"execute",className:"m-0 h-full border border-none p-0",children:a.jsx(Ea,{})}),t[19]=p):p=t[19];let h;t[20]!==f?(h=a.jsxs("section",{className:"max-h-custom-dvh flex-1 overflow-hidden",children:[f,x,p]}),t[20]=f,t[21]=h):h=t[21];let g;return t[22]!==h||t[23]!==m?(g=a.jsxs(a.Fragment,{children:[s,a.jsx(Ma,{children:a.jsxs("main",{className:"bg-primary/5 flex h-screen flex-col overflow-hidden",children:[l,a.jsxs($s,{defaultValue:"data",className:"flex flex-1 flex-col",children:[m,h]})]})})]}),t[22]=h,t[23]=m,t[24]=g):g=t[24],g}function Ba(t){return t.isDatabaseLoading}ot.createRoot(document.getElementById("root")).render(a.jsx(w.StrictMode,{children:a.jsxs(Rs,{defaultTheme:"dark",storageKey:"ui-theme",children:[a.jsx(zs,{children:a.jsx(Ds,{children:a.jsx(Ua,{})})}),a.jsx(Ls,{})]})}));
